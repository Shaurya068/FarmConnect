/*! For license information please see main.5db33e60.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),i=n(43),s=n(950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(a(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),E=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope");var T=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var C=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var I=Symbol.iterator;function A(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var P=Symbol.for("react.client.reference");function R(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===P?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case v:return"Profiler";case y:return"StrictMode";case k:return"Suspense";case x:return"SuspenseList";case T:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case m:return"Portal";case E:return(e.displayName||"Context")+".Provider";case w:return(e._context.displayName||"Context")+".Consumer";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case _:return null!==(t=e.displayName||null)?t:R(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return R(e(t))}catch(as){}}return null}var O=Array.isArray,j=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},M=[],F=-1;function U(e){return{current:e}}function V(e){0>F||(e.current=M[F],M[F]=null,F--)}function z(e,t){F++,M[F]=e.current,e.current=t}var B=U(null),q=U(null),H=U(null),W=U(null);function K(e,t){switch(z(H,t),z(q,e),z(B,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?sd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=ad(t=sd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(B),z(B,e)}function G(){V(B),V(q),V(H)}function Q(e){null!==e.memoizedState&&z(W,e);var t=B.current,n=ad(t,e.type);t!==n&&(z(q,e),z(B,n))}function Y(e){q.current===e&&(V(B),V(q)),W.current===e&&(V(W),Yd._currentValue=L)}var X=Object.prototype.hasOwnProperty,J=r.unstable_scheduleCallback,$=r.unstable_cancelCallback,Z=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,ie=r.unstable_UserBlockingPriority,se=r.unstable_NormalPriority,ae=r.unstable_LowPriority,oe=r.unstable_IdlePriority,le=r.log,ce=r.unstable_setDisableYieldValue,ue=null,de=null;function he(e){if("function"===typeof le&&ce(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ue,e)}catch(t){}}var fe=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(pe(e)/me|0)|0},pe=Math.log,me=Math.LN2;var ge=256,ye=4194304;function ve(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,s=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~s)?i=ve(r):0!==(a&=o)?i=ve(a):n||0!==(n=o&~e)&&(i=ve(n)):0!==(o=r&~s)?i=ve(o):0!==a?i=ve(a):n||0!==(n=r&~e)&&(i=ve(n)),0===i?0:0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(n=t&-t)||32===s&&0!==(4194048&n))?t:i}function we(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ee(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Se(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function ke(){var e=ye;return 0===(62914560&(ye<<=1))&&(ye=4194304),e}function xe(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _e(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ne(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-fe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Te(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-fe(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Ce(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ie(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Ae(){var e=D.p;return 0!==e?e:void 0===(e=window.event)?32:uh(e.type)}var Pe=Math.random().toString(36).slice(2),Re="__reactFiber$"+Pe,Oe="__reactProps$"+Pe,je="__reactContainer$"+Pe,De="__reactEvents$"+Pe,Le="__reactListeners$"+Pe,Me="__reactHandles$"+Pe,Fe="__reactResources$"+Pe,Ue="__reactMarker$"+Pe;function Ve(e){delete e[Re],delete e[Oe],delete e[De],delete e[Le],delete e[Me]}function ze(e){var t=e[Re];if(t)return t;for(var n=e.parentNode;n;){if(t=n[je]||n[Re]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=wd(e);null!==e;){if(n=e[Re])return n;e=wd(e)}return t}n=(e=n).parentNode}return null}function Be(e){if(e=e[Re]||e[je]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function qe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function He(e){var t=e[Fe];return t||(t=e[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function We(e){e[Ue]=!0}var Ke=new Set,Ge={};function Qe(e,t){Ye(e,t),Ye(e+"Capture",t)}function Ye(e,t){for(Ge[e]=t,e=0;e<t.length;e++)Ke.add(t[e])}var Xe,Je,$e=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(i=t,X.call(et,i)||!X.call(Ze,i)&&($e.test(i)?et[i]=!0:(Ze[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function it(e){if(void 0===Xe)try{throw Error()}catch(as){var t=as.stack.trim().match(/\n( *(at )?)/);Xe=t&&t[1]||"",Je=-1<as.stack.indexOf("\n    at")?" (<anonymous>)":-1<as.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Xe+e+Je}var st=!1;function at(e,t){if(!e||st)return"";st=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(as){var r=as}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(s){r=s}(n=e())&&"function"===typeof n.catch&&n.catch((function(){}))}}catch(a){if(a&&r&&"string"===typeof a.stack)return[a.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),a=s[0],o=s[1];if(a&&o){var l=a.split("\n"),c=o.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{st=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?it(n):""}function ot(e){switch(e.tag){case 26:case 27:case 5:return it(e.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return at(e.type,!1);case 11:return at(e.type.render,!1);case 1:return at(e.type,!0);case 31:return it("Activity");default:return""}}function lt(e){try{var t="";do{t+=ot(e),e=e.return}while(e);return t}catch(as){return"\nError generating stack: "+as.message+"\n"+as.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function mt(e){return e.replace(pt,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function gt(e,t,n,r,i,s,a,o){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?vt(e,a,ct(t)):null!=n?vt(e,a,ct(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=s&&(e.defaultChecked=!!s),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+ct(o):e.removeAttribute("name")}function yt(e,t,n,r,i,s,a,o){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=n){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a)}function vt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function Et(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(a(92));if(O(r)){if(1<r.length)throw Error(a(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function St(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var kt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||kt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function _t(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&xt(e,i,r)}else for(var s in t)t.hasOwnProperty(s)&&xt(e,s,t[s])}function Nt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ct=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function It(e){return Ct.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var At=null;function Pt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Rt=null,Ot=null;function jt(e){var t=Be(e);if(t&&(e=t.stateNode)){var n=e[Oe]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[Oe]||null;if(!i)throw Error(a(90));gt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var Dt=!1;function Lt(e,t,n){if(Dt)return e(t,n);Dt=!0;try{return e(t)}finally{if(Dt=!1,(null!==Rt||null!==Ot)&&(Bc(),Rt&&(t=Rt,e=Ot,Ot=Rt=null,jt(t),e)))for(t=0;t<e.length;t++)jt(e[t])}}function Mt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Oe]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ft=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ut=!1;if(Ft)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){Ut=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch(jh){Ut=!1}var zt=null,Bt=null,qt=null;function Ht(){if(qt)return qt;var e,t,n=Bt,r=n.length,i="value"in zt?zt.value:zt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return qt=i.slice(e,1<t?1-t:void 0)}function Wt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Kt(){return!0}function Gt(){return!1}function Qt(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Kt:Gt,this.isPropagationStopped=Gt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Kt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Kt)},persist:function(){},isPersistent:Kt}),t}var Yt,Xt,Jt,$t={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Qt($t),en=h({},$t,{view:0,detail:0}),tn=Qt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jt&&(Jt&&"mousemove"===e.type?(Yt=e.screenX-Jt.screenX,Xt=e.screenY-Jt.screenY):Xt=Yt=0,Jt=e),Yt)},movementY:function(e){return"movementY"in e?e.movementY:Xt}}),rn=Qt(nn),sn=Qt(h({},nn,{dataTransfer:0})),an=Qt(h({},en,{relatedTarget:0})),on=Qt(h({},$t,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Qt(h({},$t,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Qt(h({},$t,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function pn(){return fn}var mn=Qt(h({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Wt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pn,charCode:function(e){return"keypress"===e.type?Wt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Wt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=Qt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),yn=Qt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pn})),vn=Qt(h({},$t,{propertyName:0,elapsedTime:0,pseudoElement:0})),bn=Qt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),wn=Qt(h({},$t,{newState:0,oldState:0})),En=[9,13,27,32],Sn=Ft&&"CompositionEvent"in window,kn=null;Ft&&"documentMode"in document&&(kn=document.documentMode);var xn=Ft&&"TextEvent"in window&&!kn,_n=Ft&&(!Sn||kn&&8<kn&&11>=kn),Nn=String.fromCharCode(32),Tn=!1;function Cn(e,t){switch(e){case"keyup":return-1!==En.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function In(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var An=!1;var Pn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Pn[e.type]:"textarea"===t}function On(e,t,n,r){Rt?Ot?Ot.push(r):Ot=[r]:Rt=r,0<(t=Wu(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var jn=null,Dn=null;function Ln(e){Mu(e,0)}function Mn(e){if(ht(qe(e)))return e}function Fn(e,t){if("change"===e)return t}var Un=!1;if(Ft){var Vn;if(Ft){var zn="oninput"in document;if(!zn){var Bn=document.createElement("div");Bn.setAttribute("oninput","return;"),zn="function"===typeof Bn.oninput}Vn=zn}else Vn=!1;Un=Vn&&(!document.documentMode||9<document.documentMode)}function qn(){jn&&(jn.detachEvent("onpropertychange",Hn),Dn=jn=null)}function Hn(e){if("value"===e.propertyName&&Mn(Dn)){var t=[];On(t,Dn,e,Pt(e)),Lt(Ln,t)}}function Wn(e,t,n){"focusin"===e?(qn(),Dn=n,(jn=t).attachEvent("onpropertychange",Hn)):"focusout"===e&&qn()}function Kn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Mn(Dn)}function Gn(e,t){if("click"===e)return Mn(t)}function Qn(e,t){if("input"===e||"change"===e)return Mn(t)}var Yn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Xn(e,t){if(Yn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!X.call(t,i)||!Yn(e[i],t[i]))return!1}return!0}function Jn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $n(e,t){var n,r=Jn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Jn(r)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Ft&&"documentMode"in document&&11>=document.documentMode,rr=null,ir=null,sr=null,ar=!1;function or(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ar||null==rr||rr!==ft(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},sr&&Xn(sr,r)||(sr=r,0<(r=Wu(ir,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},ur={},dr={};function hr(e){if(ur[e])return ur[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return ur[e]=n[t];return e}Ft&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var fr=hr("animationend"),pr=hr("animationiteration"),mr=hr("animationstart"),gr=hr("transitionrun"),yr=hr("transitionstart"),vr=hr("transitioncancel"),br=hr("transitionend"),wr=new Map,Er="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(e,t){wr.set(e,t),Qe(t,[e])}Er.push("scrollEnd");var kr=new WeakMap;function xr(e,t){if("object"===typeof e&&null!==e){var n=kr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},kr.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var _r=[],Nr=0,Tr=0;function Cr(){for(var e=Nr,t=Tr=Nr=0;t<e;){var n=_r[t];_r[t++]=null;var r=_r[t];_r[t++]=null;var i=_r[t];_r[t++]=null;var s=_r[t];if(_r[t++]=null,null!==r&&null!==i){var a=r.pending;null===a?i.next=i:(i.next=a.next,a.next=i),r.pending=i}0!==s&&Rr(n,i,s)}}function Ir(e,t,n,r){_r[Nr++]=e,_r[Nr++]=t,_r[Nr++]=n,_r[Nr++]=r,Tr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Ar(e,t,n,r){return Ir(e,t,n,r),Or(e)}function Pr(e,t){return Ir(e,null,null,t),Or(e)}function Rr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(i=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,i&&null!==t&&(i=31-fe(n),null===(r=(e=s.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),s):null}function Or(e){if(50<Oc)throw Oc=0,jc=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var jr={};function Dr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lr(e,t,n,r){return new Dr(e,t,n,r)}function Mr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fr(e,t){var n=e.alternate;return null===n?((n=Lr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ur(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Vr(e,t,n,r,i,s){var o=0;if(r=e,"function"===typeof e)Mr(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,B.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case T:return(e=Lr(31,n,t,i)).elementType=T,e.lanes=s,e;case g:return zr(n.children,i,s,t);case y:o=8,i|=24;break;case v:return(e=Lr(12,n,t,2|i)).elementType=v,e.lanes=s,e;case k:return(e=Lr(13,n,t,i)).elementType=k,e.lanes=s,e;case x:return(e=Lr(19,n,t,i)).elementType=x,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case b:case E:o=10;break e;case w:o=9;break e;case S:o=11;break e;case _:o=14;break e;case N:o=16,r=null;break e}o=29,n=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=Lr(o,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function zr(e,t,n,r){return(e=Lr(7,e,r,t)).lanes=n,e}function Br(e,t,n){return(e=Lr(6,e,null,t)).lanes=n,e}function qr(e,t,n){return(t=Lr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Hr=[],Wr=0,Kr=null,Gr=0,Qr=[],Yr=0,Xr=null,Jr=1,$r="";function Zr(e,t){Hr[Wr++]=Gr,Hr[Wr++]=Kr,Kr=e,Gr=t}function ei(e,t,n){Qr[Yr++]=Jr,Qr[Yr++]=$r,Qr[Yr++]=Xr,Xr=e;var r=Jr;e=$r;var i=32-fe(r)-1;r&=~(1<<i),n+=1;var s=32-fe(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Jr=1<<32-fe(t)+i|n<<i|r,$r=s+e}else Jr=1<<s|n<<i|r,$r=e}function ti(e){null!==e.return&&(Zr(e,1),ei(e,1,0))}function ni(e){for(;e===Kr;)Kr=Hr[--Wr],Hr[Wr]=null,Gr=Hr[--Wr],Hr[Wr]=null;for(;e===Xr;)Xr=Qr[--Yr],Qr[Yr]=null,$r=Qr[--Yr],Qr[Yr]=null,Jr=Qr[--Yr],Qr[Yr]=null}var ri=null,ii=null,si=!1,ai=null,oi=!1,li=Error(a(519));function ci(e){throw mi(xr(Error(a(418,"")),e)),li}function ui(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Re]=e,t[Oe]=r,n){case"dialog":Fu("cancel",t),Fu("close",t);break;case"iframe":case"object":case"embed":Fu("load",t);break;case"video":case"audio":for(n=0;n<Du.length;n++)Fu(Du[n],t);break;case"source":Fu("error",t);break;case"img":case"image":case"link":Fu("error",t),Fu("load",t);break;case"details":Fu("toggle",t);break;case"input":Fu("invalid",t),yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Fu("invalid",t);break;case"textarea":Fu("invalid",t),Et(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Ju(t.textContent,n)?(null!=r.popover&&(Fu("beforetoggle",t),Fu("toggle",t)),null!=r.onScroll&&Fu("scroll",t),null!=r.onScrollEnd&&Fu("scrollend",t),null!=r.onClick&&(t.onclick=$u),t=!0):t=!1,t||ci(e)}function di(e){for(ri=e.return;ri;)switch(ri.tag){case 5:case 13:return void(oi=!1);case 27:case 3:return void(oi=!0);default:ri=ri.return}}function hi(e){if(e!==ri)return!1;if(!si)return di(e),si=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||od(e.type,e.memoizedProps)),t=!t),t&&ii&&ci(e),di(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ii=vd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ii=null}}else 27===n?(n=ii,pd(e.type)?(e=bd,bd=null,ii=e):ii=n):ii=ri?vd(e.stateNode.nextSibling):null;return!0}function fi(){ii=ri=null,si=!1}function pi(){var e=ai;return null!==e&&(null===wc?wc=e:wc.push.apply(wc,e),ai=null),e}function mi(e){null===ai?ai=[e]:ai.push(e)}var gi=U(null),yi=null,vi=null;function bi(e,t,n){z(gi,t._currentValue),t._currentValue=n}function wi(e){e._currentValue=gi.current,V(gi)}function Ei(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Si(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var s=i.dependencies;if(null!==s){var o=i.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Ei(s.return,n,e),r||(o=null);break e}s=l.next}}else if(18===i.tag){if(null===(o=i.return))throw Error(a(341));o.lanes|=n,null!==(s=o.alternate)&&(s.lanes|=n),Ei(o,n,e),o=null}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===e){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}}function ki(e,t,n,r){e=null;for(var i=t,s=!1;null!==i;){if(!s)if(0!==(524288&i.flags))s=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var o=i.alternate;if(null===o)throw Error(a(387));if(null!==(o=o.memoizedProps)){var l=i.type;Yn(i.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(i===W.current){if(null===(o=i.alternate))throw Error(a(387));o.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(Yd):e=[Yd])}i=i.return}null!==e&&Si(t,e,n,r),t.flags|=262144}function xi(e){for(e=e.firstContext;null!==e;){if(!Yn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function _i(e){yi=e,vi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ni(e){return Ci(yi,e)}function Ti(e,t){return null===yi&&_i(e),Ci(e,t)}function Ci(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===vi){if(null===e)throw Error(a(308));vi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else vi=vi.next=t;return n}var Ii="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},Ai=r.unstable_scheduleCallback,Pi=r.unstable_NormalPriority,Ri={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Oi(){return{controller:new Ii,data:new Map,refCount:0}}function ji(e){e.refCount--,0===e.refCount&&Ai(Pi,(function(){e.controller.abort()}))}var Di=null,Li=0,Mi=0,Fi=null;function Ui(){if(0===--Li&&null!==Di){null!==Fi&&(Fi.status="fulfilled");var e=Di;Di=null,Mi=0,Fi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Vi=j.S;j.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Di){var n=Di=[];Li=0,Mi=Au(),Fi={status:"pending",value:void 0,then:function(e){n.push(e)}}}Li++,t.then(Ui,Ui)}(0,t),null!==Vi&&Vi(e,t)};var zi=U(null);function Bi(){var e=zi.current;return null!==e?e:ic.pooledCache}function qi(e,t){z(zi,null===t?zi.current:t.pool)}function Hi(){var e=Bi();return null===e?null:{parent:Ri._currentValue,pool:e}}var Wi=Error(a(460)),Ki=Error(a(474)),Gi=Error(a(542)),Qi={then:function(){}};function Yi(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Xi(){}function Ji(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Xi,Xi),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e;default:if("string"===typeof t.status)t.then(Xi,Xi);else{if(null!==(e=ic)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}}),(function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e}throw $i=t,Wi}}var $i=null;function Zi(){if(null===$i)throw Error(a(459));var e=$i;return $i=null,e}function es(e){if(e===Wi||e===Gi)throw Error(a(483))}var ts=!1;function ns(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function is(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ss(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&rc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Or(e),Rr(e,null,n),t}return Ir(e,r,t,n),Or(e)}function os(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Te(e,n)}}function ls(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var cs=!1;function us(){if(cs){if(null!==Fi)throw Fi}}function ds(e,t,n,r){cs=!1;var i=e.updateQueue;ts=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(a=0,u=c=l=null,o=s;;){var f=-536870913&o.lane,p=f!==o.lane;if(p?(ac&f)===f:(r&f)===f){0!==f&&f===Mi&&(cs=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var m=e,g=o;f=t;var y=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){d=m.call(y,d,f);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(f="function"===typeof(m=g.payload)?m.call(y,d,f):m)||void 0===f)break e;d=h({},d,f);break e;case 2:ts=!0}}null!==(f=o.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,a|=f;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(p=o).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===s&&(i.shared.lanes=0),pc|=a,e.lanes=a,e.memoizedState=d}}function hs(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function fs(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)hs(n[e],t)}var ps=U(null),ms=U(0);function gs(e,t){z(ms,e=hc),z(ps,t),hc=e|t.baseLanes}function ys(){z(ms,hc),z(ps,ps.current)}function vs(){hc=ms.current,V(ps),V(ms)}var bs=0,ws=null,Es=null,Ss=null,ks=!1,xs=!1,_s=!1,Ns=0,Ts=0,Cs=null,Is=0;function As(){throw Error(a(321))}function Ps(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yn(e[n],t[n]))return!1;return!0}function Rs(e,t,n,r,i,s){return bs=s,ws=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,j.H=null===e||null===e.memoizedState?Ka:Ga,_s=!1,s=n(r,i),_s=!1,xs&&(s=js(t,n,r,i)),Os(e),s}function Os(e){j.H=Wa;var t=null!==Es&&null!==Es.next;if(bs=0,Ss=Es=ws=null,ks=!1,Ts=0,Cs=null,t)throw Error(a(300));null===e||Co||null!==(e=e.dependencies)&&xi(e)&&(Co=!0)}function js(e,t,n,r){ws=e;var i=0;do{if(xs&&(Cs=null),Ts=0,xs=!1,25<=i)throw Error(a(301));if(i+=1,Ss=Es=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}j.H=Qa,s=t(n,r)}while(xs);return s}function Ds(){var e=j.H,t=e.useState()[0];return t="function"===typeof t.then?zs(t):t,e=e.useState()[0],(null!==Es?Es.memoizedState:null)!==e&&(ws.flags|=1024),t}function Ls(){var e=0!==Ns;return Ns=0,e}function Ms(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Fs(e){if(ks){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ks=!1}bs=0,Ss=Es=ws=null,xs=!1,Ts=Ns=0,Cs=null}function Us(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ss?ws.memoizedState=Ss=e:Ss=Ss.next=e,Ss}function Vs(){if(null===Es){var e=ws.alternate;e=null!==e?e.memoizedState:null}else e=Es.next;var t=null===Ss?ws.memoizedState:Ss.next;if(null!==t)Ss=t,Es=e;else{if(null===e){if(null===ws.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(Es=e).memoizedState,baseState:Es.baseState,baseQueue:Es.baseQueue,queue:Es.queue,next:null},null===Ss?ws.memoizedState=Ss=e:Ss=Ss.next=e}return Ss}function zs(e){var t=Ts;return Ts+=1,null===Cs&&(Cs=[]),e=Ji(Cs,e,t),t=ws,null===(null===Ss?t.memoizedState:Ss.next)&&(t=t.alternate,j.H=null===t||null===t.memoizedState?Ka:Ga),e}function Bs(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return zs(e);if(e.$$typeof===E)return Ni(e)}throw Error(a(438,String(e)))}function qs(e){var t=null,n=ws.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=ws.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map((function(e){return e.slice()})),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},ws.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=C;return t.index++,n}function Hs(e,t){return"function"===typeof t?t(e):t}function Ws(e){return Ks(Vs(),Es,e)}function Ks(e,t,n){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=n;var i=e.baseQueue,s=r.pending;if(null!==s){if(null!==i){var o=i.next;i.next=s.next,s.next=o}t.baseQueue=i=s,r.pending=null}if(s=e.baseState,null===i)e.memoizedState=s;else{var l=o=null,c=null,u=t=i.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(ac&h)===h:(bs&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Mi&&(d=!0);else{if((bs&f)===f){u=u.next,f===Mi&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=s):c=c.next=h,ws.lanes|=f,pc|=f}h=u.action,_s&&n(s,h),s=u.hasEagerState?u.eagerState:n(s,h)}else f={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,o=s):c=c.next=f,ws.lanes|=h,pc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=s:c.next=l,!Yn(s,e.memoizedState)&&(Co=!0,d&&null!==(n=Fi)))throw n;e.memoizedState=s,e.baseState=o,e.baseQueue=c,r.lastRenderedState=s}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Gs(e){var t=Vs(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{s=e(s,o.action),o=o.next}while(o!==i);Yn(s,t.memoizedState)||(Co=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Qs(e,t,n){var r=ws,i=Vs(),s=si;if(s){if(void 0===n)throw Error(a(407));n=n()}else n=t();var o=!Yn((Es||i).memoizedState,n);if(o&&(i.memoizedState=n,Co=!0),i=i.queue,ya(2048,8,Js.bind(null,r,i,e),[e]),i.getSnapshot!==t||o||null!==Ss&&1&Ss.memoizedState.tag){if(r.flags|=2048,pa(9,{destroy:void 0,resource:void 0},Xs.bind(null,r,i,n,t),null),null===ic)throw Error(a(349));s||0!==(124&bs)||Ys(r,t,n)}return n}function Ys(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ws.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},ws.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Xs(e,t,n,r){t.value=n,t.getSnapshot=r,$s(t)&&Zs(e)}function Js(e,t,n){return n((function(){$s(t)&&Zs(e)}))}function $s(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Yn(e,n)}catch(r){return!0}}function Zs(e){var t=Pr(e,2);null!==t&&Mc(t,e,2)}function ea(e){var t=Us();if("function"===typeof e){var n=e;if(e=n(),_s){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:e},t}function ta(e,t,n,r){return e.baseState=n,Ks(e,Es,"function"===typeof r?r:Hs)}function na(e,t,n,r,i){if(Ba(e))throw Error(a(485));if(null!==(e=t.action)){var s={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==j.T?n(!0):s.isTransition=!1,r(s),null===(n=t.pending)?(s.next=t.pending=s,ra(t,s)):(s.next=n.next,t.pending=n.next=s)}}function ra(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var s=j.T,a={};j.T=a;try{var o=n(i,r),l=j.S;null!==l&&l(a,o),ia(e,t,o)}catch(c){aa(e,t,c)}finally{j.T=s}}else try{ia(e,t,s=n(i,r))}catch(u){aa(e,t,u)}}function ia(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then((function(n){sa(e,t,n)}),(function(n){return aa(e,t,n)})):sa(e,t,n)}function sa(e,t,n){t.status="fulfilled",t.value=n,oa(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ra(e,n)))}function aa(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,oa(t),t=t.next}while(t!==r)}e.action=null}function oa(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function la(e,t){return t}function ca(e,t){if(si){var n=ic.formState;if(null!==n){e:{var r=ws;if(si){if(ii){t:{for(var i=ii,s=oi;8!==i.nodeType;){if(!s){i=null;break t}if(null===(i=vd(i.nextSibling))){i=null;break t}}i="F!"===(s=i.data)||"F"===s?i:null}if(i){ii=vd(i.nextSibling),r="F!"===i.data;break e}}ci(r)}r=!1}r&&(t=n[0])}}return(n=Us()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:t},n.queue=r,n=Ua.bind(null,ws,r),r.dispatch=n,r=ea(!1),s=za.bind(null,ws,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=Us()).queue=i,n=na.bind(null,ws,i,s,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function ua(e){return da(Vs(),Es,e)}function da(e,t,n){if(t=Ks(e,t,la)[0],e=Ws(Hs)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=zs(t)}catch(as){if(as===Wi)throw Gi;throw as}else r=t;var i=(t=Vs()).queue,s=i.dispatch;return n!==t.memoizedState&&(ws.flags|=2048,pa(9,{destroy:void 0,resource:void 0},ha.bind(null,i,n),null)),[r,s,e]}function ha(e,t){e.action=t}function fa(e){var t=Vs(),n=Es;if(null!==n)return da(t,n,e);Vs(),t=t.memoizedState;var r=(n=Vs()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function pa(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=ws.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},ws.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ma(){return Vs().memoizedState}function ga(e,t,n,r){var i=Us();r=void 0===r?null:r,ws.flags|=e,i.memoizedState=pa(1|t,{destroy:void 0,resource:void 0},n,r)}function ya(e,t,n,r){var i=Vs();r=void 0===r?null:r;var s=i.memoizedState.inst;null!==Es&&null!==r&&Ps(r,Es.memoizedState.deps)?i.memoizedState=pa(t,s,n,r):(ws.flags|=e,i.memoizedState=pa(1|t,s,n,r))}function va(e,t){ga(8390656,8,e,t)}function ba(e,t){ya(2048,8,e,t)}function wa(e,t){return ya(4,2,e,t)}function Ea(e,t){return ya(4,4,e,t)}function Sa(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function ka(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ya(4,4,Sa.bind(null,t,e),n)}function xa(){}function _a(e,t){var n=Vs();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Ps(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Na(e,t){var n=Vs();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Ps(t,r[1]))return r[0];if(r=e(),_s){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r}function Ta(e,t,n){return void 0===n||0!==(1073741824&bs)?e.memoizedState=t:(e.memoizedState=n,e=Lc(),ws.lanes|=e,pc|=e,n)}function Ca(e,t,n,r){return Yn(n,t)?n:null!==ps.current?(e=Ta(e,n,r),Yn(e,t)||(Co=!0),e):0===(42&bs)?(Co=!0,e.memoizedState=n):(e=Lc(),ws.lanes|=e,pc|=e,t)}function Ia(e,t,n,r,i){var s=D.p;D.p=0!==s&&8>s?s:8;var a=j.T,o={};j.T=o,za(e,!1,t,n);try{var l=i(),c=j.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Va(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then((function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)}),(function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)})),r}(l,r),Dc());else Va(e,t,r,Dc())}catch(u){Va(e,t,{then:function(){},status:"rejected",reason:u},Dc())}finally{D.p=s,j.T=a}}function Aa(){}function Pa(e,t,n,r){if(5!==e.tag)throw Error(a(476));var i=Ra(e).queue;Ia(e,i,t,L,null===n?Aa:function(){return Oa(e),n(r)})}function Ra(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:L},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Oa(e){Va(e,Ra(e).next.queue,{},Dc())}function ja(){return Ni(Yd)}function Da(){return Vs().memoizedState}function La(){return Vs().memoizedState}function Ma(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Dc(),r=ss(t,e=is(n),n);return null!==r&&(Mc(r,t,n),os(r,t,n)),t={cache:Oi()},void(e.payload=t)}t=t.return}}function Fa(e,t,n){var r=Dc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Ba(e)?qa(t,n):null!==(n=Ar(e,t,n,r))&&(Mc(n,e,r),Ha(n,t,r))}function Ua(e,t,n){Va(e,t,n,Dc())}function Va(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ba(e))qa(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,Yn(o,a))return Ir(e,t,i,0),null===ic&&Cr(),!1}catch(l){}if(null!==(n=Ar(e,t,i,r)))return Mc(n,e,r),Ha(n,t,r),!0}return!1}function za(e,t,n,r){if(r={lane:2,revertLane:Au(),action:r,hasEagerState:!1,eagerState:null,next:null},Ba(e)){if(t)throw Error(a(479))}else null!==(t=Ar(e,n,r,2))&&Mc(t,e,2)}function Ba(e){var t=e.alternate;return e===ws||null!==t&&t===ws}function qa(e,t){xs=ks=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ha(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Te(e,n)}}var Wa={readContext:Ni,use:Bs,useCallback:As,useContext:As,useEffect:As,useImperativeHandle:As,useLayoutEffect:As,useInsertionEffect:As,useMemo:As,useReducer:As,useRef:As,useState:As,useDebugValue:As,useDeferredValue:As,useTransition:As,useSyncExternalStore:As,useId:As,useHostTransitionStatus:As,useFormState:As,useActionState:As,useOptimistic:As,useMemoCache:As,useCacheRefresh:As},Ka={readContext:Ni,use:Bs,useCallback:function(e,t){return Us().memoizedState=[e,void 0===t?null:t],e},useContext:Ni,useEffect:va,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ga(4194308,4,Sa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ga(4194308,4,e,t)},useInsertionEffect:function(e,t){ga(4,2,e,t)},useMemo:function(e,t){var n=Us();t=void 0===t?null:t;var r=e();if(_s){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Us();if(void 0!==n){var i=n(t);if(_s){he(!0);try{n(t)}finally{he(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=Fa.bind(null,ws,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Us().memoizedState=e},useState:function(e){var t=(e=ea(e)).queue,n=Ua.bind(null,ws,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:xa,useDeferredValue:function(e,t){return Ta(Us(),e,t)},useTransition:function(){var e=ea(!1);return e=Ia.bind(null,ws,e.queue,!0,!1),Us().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=ws,i=Us();if(si){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===ic)throw Error(a(349));0!==(124&ac)||Ys(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,va(Js.bind(null,r,s,e),[e]),r.flags|=2048,pa(9,{destroy:void 0,resource:void 0},Xs.bind(null,r,s,n,t),null),n},useId:function(){var e=Us(),t=ic.identifierPrefix;if(si){var n=$r;t="\xab"+t+"R"+(n=(Jr&~(1<<32-fe(Jr)-1)).toString(32)+n),0<(n=Ns++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Is++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:ja,useFormState:ca,useActionState:ca,useOptimistic:function(e){var t=Us();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=za.bind(null,ws,!0,n),n.dispatch=t,[e,t]},useMemoCache:qs,useCacheRefresh:function(){return Us().memoizedState=Ma.bind(null,ws)}},Ga={readContext:Ni,use:Bs,useCallback:_a,useContext:Ni,useEffect:ba,useImperativeHandle:ka,useInsertionEffect:wa,useLayoutEffect:Ea,useMemo:Na,useReducer:Ws,useRef:ma,useState:function(){return Ws(Hs)},useDebugValue:xa,useDeferredValue:function(e,t){return Ca(Vs(),Es.memoizedState,e,t)},useTransition:function(){var e=Ws(Hs)[0],t=Vs().memoizedState;return["boolean"===typeof e?e:zs(e),t]},useSyncExternalStore:Qs,useId:Da,useHostTransitionStatus:ja,useFormState:ua,useActionState:ua,useOptimistic:function(e,t){return ta(Vs(),0,e,t)},useMemoCache:qs,useCacheRefresh:La},Qa={readContext:Ni,use:Bs,useCallback:_a,useContext:Ni,useEffect:ba,useImperativeHandle:ka,useInsertionEffect:wa,useLayoutEffect:Ea,useMemo:Na,useReducer:Gs,useRef:ma,useState:function(){return Gs(Hs)},useDebugValue:xa,useDeferredValue:function(e,t){var n=Vs();return null===Es?Ta(n,e,t):Ca(n,Es.memoizedState,e,t)},useTransition:function(){var e=Gs(Hs)[0],t=Vs().memoizedState;return["boolean"===typeof e?e:zs(e),t]},useSyncExternalStore:Qs,useId:Da,useHostTransitionStatus:ja,useFormState:fa,useActionState:fa,useOptimistic:function(e,t){var n=Vs();return null!==Es?ta(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:qs,useCacheRefresh:La},Ya=null,Xa=0;function Ja(e){var t=Xa;return Xa+=1,null===Ya&&(Ya=[]),Ji(Ya,e,t)}function $a(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Za(e,t){if(t.$$typeof===f)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function eo(e){return(0,e._init)(e._payload)}function to(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Fr(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Br(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===g?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===N&&eo(s)===t.type)?($a(t=i(t,n.props),n),t.return=e,t):($a(t=Vr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=qr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=zr(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Br(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return $a(n=Vr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case m:return(t=qr(t,e.mode,n)).return=e,t;case N:return h(e,t=(0,t._init)(t._payload),n)}if(O(t)||A(t))return(t=zr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Ja(t),n);if(t.$$typeof===E)return h(e,Ti(e,t),n);Za(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===i?c(e,t,n,r):null;case m:return n.key===i?u(e,t,n,r):null;case N:return f(e,t,n=(i=n._init)(n._payload),r)}if(O(n)||A(n))return null!==i?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,Ja(n),r);if(n.$$typeof===E)return f(e,t,Ti(e,n),r);Za(e,n)}return null}function y(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case p:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case m:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case N:return y(e,t,n,r=(0,r._init)(r._payload),i)}if(O(r)||A(r))return d(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return y(e,t,n,Ja(r),i);if(r.$$typeof===E)return y(e,t,n,Ti(t,r),i);Za(t,r)}return null}function v(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case p:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===g){if(7===c.tag){n(l,c.sibling),(d=i(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===N&&eo(b)===c.type){n(l,c.sibling),$a(d=i(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===g?((d=zr(u.props.children,l.mode,d,u.key)).return=l,l=d):($a(d=Vr(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return o(l);case m:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=i(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=qr(u,l.mode,d)).return=l,l=d}return o(l);case N:return v(l,c,u=(b=u._init)(u._payload),d)}if(O(u))return function(i,a,o,l){for(var c=null,u=null,d=a,p=a=0,m=null;null!==d&&p<o.length;p++){d.index>p?(m=d,d=null):m=d.sibling;var g=f(i,d,o[p],l);if(null===g){null===d&&(d=m);break}e&&d&&null===g.alternate&&t(i,d),a=s(g,a,p),null===u?c=g:u.sibling=g,u=g,d=m}if(p===o.length)return n(i,d),si&&Zr(i,p),c;if(null===d){for(;p<o.length;p++)null!==(d=h(i,o[p],l))&&(a=s(d,a,p),null===u?c=d:u.sibling=d,u=d);return si&&Zr(i,p),c}for(d=r(d);p<o.length;p++)null!==(m=y(d,i,p,o[p],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?p:m.key),a=s(m,a,p),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach((function(e){return t(i,e)})),si&&Zr(i,p),c}(l,c,u,d);if(A(u)){if("function"!==typeof(b=A(u)))throw Error(a(150));return function(i,o,l,c){if(null==l)throw Error(a(151));for(var u=null,d=null,p=o,m=o=0,g=null,v=l.next();null!==p&&!v.done;m++,v=l.next()){p.index>m?(g=p,p=null):g=p.sibling;var b=f(i,p,v.value,c);if(null===b){null===p&&(p=g);break}e&&p&&null===b.alternate&&t(i,p),o=s(b,o,m),null===d?u=b:d.sibling=b,d=b,p=g}if(v.done)return n(i,p),si&&Zr(i,m),u;if(null===p){for(;!v.done;m++,v=l.next())null!==(v=h(i,v.value,c))&&(o=s(v,o,m),null===d?u=v:d.sibling=v,d=v);return si&&Zr(i,m),u}for(p=r(p);!v.done;m++,v=l.next())null!==(v=y(p,i,m,v.value,c))&&(e&&null!==v.alternate&&p.delete(null===v.key?m:v.key),o=s(v,o,m),null===d?u=v:d.sibling=v,d=v);return e&&p.forEach((function(e){return t(i,e)})),si&&Zr(i,m),u}(l,c,u=b.call(u),d)}if("function"===typeof u.then)return v(l,c,Ja(u),d);if(u.$$typeof===E)return v(l,c,Ti(l,u),d);Za(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=i(c,u)).return=l,l=d):(n(l,c),(d=Br(u,l.mode,d)).return=l,l=d),o(l)):n(l,c)}return function(e,t,n,r){try{Xa=0;var i=v(e,t,n,r);return Ya=null,i}catch(as){if(as===Wi||as===Gi)throw as;var s=Lr(29,as,null,e.mode);return s.lanes=r,s.return=e,s}}}var no=to(!0),ro=to(!1),io=U(null),so=null;function ao(e){var t=e.alternate;z(uo,1&uo.current),z(io,e),null===so&&(null===t||null!==ps.current||null!==t.memoizedState)&&(so=e)}function oo(e){if(22===e.tag){if(z(uo,uo.current),z(io,e),null===so){var t=e.alternate;null!==t&&null!==t.memoizedState&&(so=e)}}else lo()}function lo(){z(uo,uo.current),z(io,io.current)}function co(e){V(io),so===e&&(so=null),V(uo)}var uo=U(0);function ho(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||yd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function fo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var po={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Dc(),i=is(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ss(e,i,r))&&(Mc(t,e,r),os(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Dc(),i=is(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ss(e,i,r))&&(Mc(t,e,r),os(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Dc(),r=is(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=ss(e,r,n))&&(Mc(t,e,n),os(t,e,n))}};function mo(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!Xn(n,r)||!Xn(i,s))}function go(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&po.enqueueReplaceState(t,t.state,null)}function yo(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var vo="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function bo(e){vo(e)}function wo(e){console.error(e)}function Eo(e){vo(e)}function So(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout((function(){throw n}))}}function ko(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout((function(){throw r}))}}function xo(e,t,n){return(n=is(n)).tag=3,n.payload={element:null},n.callback=function(){So(e,t)},n}function _o(e){return(e=is(e)).tag=3,e}function No(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var s=r.value;e.payload=function(){return i(s)},e.callback=function(){ko(t,n,r)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){ko(t,n,r),"function"!==typeof i&&(null===_c?_c=new Set([this]):_c.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var To=Error(a(461)),Co=!1;function Io(e,t,n,r){t.child=null===e?ro(t,null,n,r):no(t,e.child,n,r)}function Ao(e,t,n,r,i){n=n.render;var s=t.ref;if("ref"in r){var a={};for(var o in r)"ref"!==o&&(a[o]=r[o])}else a=r;return _i(t),r=Rs(e,t,n,a,s,i),o=Ls(),null===e||Co?(si&&o&&ti(t),t.flags|=1,Io(e,t,r,i),t.child):(Ms(e,t,i),Xo(e,t,i))}function Po(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Mr(s)||void 0!==s.defaultProps||null!==n.compare?((e=Vr(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ro(e,t,s,r,i))}if(s=e.child,!Jo(e,i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:Xn)(a,r)&&e.ref===t.ref)return Xo(e,t,i)}return t.flags|=1,(e=Fr(s,r)).ref=t.ref,e.return=t,t.child=e}function Ro(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(Xn(s,r)&&e.ref===t.ref){if(Co=!1,t.pendingProps=r=s,!Jo(e,i))return t.lanes=e.lanes,Xo(e,t,i);0!==(131072&e.flags)&&(Co=!0)}}return Lo(e,t,n,r,i)}function Oo(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==s?s.baseLanes|n:n,null!==e){for(i=t.child=e.child,s=0;null!==i;)s=s|i.lanes|i.childLanes,i=i.sibling;t.childLanes=s&~r}else t.childLanes=0,t.child=null;return jo(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,jo(e,t,null!==s?s.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&qi(0,null!==s?s.cachePool:null),null!==s?gs(t,s):ys(),oo(t)}else null!==s?(qi(0,s.cachePool),gs(t,s),lo(),t.memoizedState=null):(null!==e&&qi(0,null),ys(),lo());return Io(e,t,i,n),t.child}function jo(e,t,n,r){var i=Bi();return i=null===i?null:{parent:Ri._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&qi(0,null),ys(),oo(t),null!==e&&ki(e,t,r,!0),null}function Do(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Lo(e,t,n,r,i){return _i(t),n=Rs(e,t,n,r,void 0,i),r=Ls(),null===e||Co?(si&&r&&ti(t),t.flags|=1,Io(e,t,n,i),t.child):(Ms(e,t,i),Xo(e,t,i))}function Mo(e,t,n,r,i,s){return _i(t),t.updateQueue=null,n=js(t,r,n,i),Os(e),r=Ls(),null===e||Co?(si&&r&&ti(t),t.flags|=1,Io(e,t,n,s),t.child):(Ms(e,t,s),Xo(e,t,s))}function Fo(e,t,n,r,i){if(_i(t),null===t.stateNode){var s=jr,a=n.contextType;"object"===typeof a&&null!==a&&(s=Ni(a)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=po,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},ns(t),a=n.contextType,s.context="object"===typeof a&&null!==a?Ni(a):jr,s.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(fo(t,n,a,r),s.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(a=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),a!==s.state&&po.enqueueReplaceState(s,s.state,null),ds(t,r,s,i),us(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var o=t.memoizedProps,l=yo(n,o);s.props=l;var c=s.context,u=n.contextType;a=jr,"object"===typeof u&&null!==u&&(a=Ni(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o||c!==a)&&go(t,s,r,a),ts=!1;var h=t.memoizedState;s.state=h,ds(t,r,s,i),us(),c=t.memoizedState,o||h!==c||ts?("function"===typeof d&&(fo(t,n,d,r),c=t.memoizedState),(l=ts||mo(t,n,l,r,h,c,a))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=a,r=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,rs(e,t),u=yo(n,a=t.memoizedProps),s.props=u,d=t.pendingProps,h=s.context,c=n.contextType,l=jr,"object"===typeof c&&null!==c&&(l=Ni(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==l)&&go(t,s,r,l),ts=!1,h=t.memoizedState,s.state=h,ds(t,r,s,i),us();var f=t.memoizedState;a!==d||h!==f||ts||null!==e&&null!==e.dependencies&&xi(e.dependencies)?("function"===typeof o&&(fo(t,n,o,r),f=t.memoizedState),(u=ts||mo(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&xi(e.dependencies))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,Do(e,t),r=0!==(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=no(t,e.child,null,i),t.child=no(t,null,n,i)):Io(e,t,n,i),t.memoizedState=s.state,e=t.child):e=Xo(e,t,i),e}function Uo(e,t,n,r){return fi(),t.flags|=256,Io(e,t,n,r),t.child}var Vo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zo(e){return{baseLanes:e,cachePool:Hi()}}function Bo(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=yc),e}function qo(e,t,n){var r,i=t.pendingProps,s=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&uo.current)),r&&(s=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(si){if(s?ao(t):lo(),si){var l,c=ii;if(l=c){e:{for(l=c,c=oi;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=vd(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Xr?{id:Jr,overflow:$r}:null,retryLane:536870912,hydrationErrors:null},(l=Lr(18,null,null,0)).stateNode=c,l.return=t,t.child=l,ri=t,ii=null,l=!0):l=!1}l||ci(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return yd(c)?t.lanes=32:t.lanes=536870912,null;co(t)}return c=i.children,i=i.fallback,s?(lo(),c=Wo({mode:"hidden",children:c},s=t.mode),i=zr(i,s,n,null),c.return=t,i.return=t,c.sibling=i,t.child=c,(s=t.child).memoizedState=zo(n),s.childLanes=Bo(e,r,n),t.memoizedState=Vo,i):(ao(t),Ho(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(o)256&t.flags?(ao(t),t.flags&=-257,t=Ko(e,t,n)):null!==t.memoizedState?(lo(),t.child=e.child,t.flags|=128,t=null):(lo(),s=i.fallback,c=t.mode,i=Wo({mode:"visible",children:i.children},c),(s=zr(s,c,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,no(t,e.child,null,n),(i=t.child).memoizedState=zo(n),i.childLanes=Bo(e,r,n),t.memoizedState=Vo,t=s);else if(ao(t),yd(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(i=Error(a(419))).stack="",i.digest=r,mi({value:i,source:null,stack:null}),t=Ko(e,t,n)}else if(Co||ki(e,t,n,!1),r=0!==(n&e.childLanes),Co||r){if(null!==(r=ic)&&(0!==(i=0!==((i=0!==(42&(i=n&-n))?1:Ce(i))&(r.suspendedLanes|n))?0:i)&&i!==l.retryLane))throw l.retryLane=i,Pr(e,i),Mc(r,e,i),To;"$?"===c.data||Qc(),t=Ko(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ii=vd(c.nextSibling),ri=t,si=!0,ai=null,oi=!1,null!==e&&(Qr[Yr++]=Jr,Qr[Yr++]=$r,Qr[Yr++]=Xr,Jr=e.id,$r=e.overflow,Xr=t),(t=Ho(t,i.children)).flags|=4096);return t}return s?(lo(),s=i.fallback,c=t.mode,u=(l=e.child).sibling,(i=Fr(l,{mode:"hidden",children:i.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?s=Fr(u,s):(s=zr(s,c,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,null===(c=e.child.memoizedState)?c=zo(n):(null!==(l=c.cachePool)?(u=Ri._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Hi(),c={baseLanes:c.baseLanes|n,cachePool:l}),s.memoizedState=c,s.childLanes=Bo(e,r,n),t.memoizedState=Vo,i):(ao(t),e=(n=e.child).sibling,(n=Fr(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Ho(e,t){return(t=Wo({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Wo(e,t){return(e=Lr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ko(e,t,n){return no(t,e.child,null,n),(e=Ho(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Go(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ei(e.return,t,n)}function Qo(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Yo(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Io(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Go(e,n,t);else if(19===e.tag)Go(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(z(uo,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ho(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Qo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ho(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Qo(t,!0,n,null,s);break;case"together":Qo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),pc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(ki(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Fr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Jo(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!xi(e))}function $o(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Co=!0;else{if(!Jo(e,n)&&0===(128&t.flags))return Co=!1,function(e,t,n){switch(t.tag){case 3:K(t,t.stateNode.containerInfo),bi(0,Ri,e.memoizedState.cache),fi();break;case 27:case 5:Q(t);break;case 4:K(t,t.stateNode.containerInfo);break;case 10:bi(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(ao(t),t.flags|=128,null):0!==(n&t.child.childLanes)?qo(e,t,n):(ao(t),null!==(e=Xo(e,t,n))?e.sibling:null);ao(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(ki(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return Yo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),z(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Oo(e,t,n);case 24:bi(0,Ri,e.memoizedState.cache)}return Xo(e,t,n)}(e,t,n);Co=0!==(131072&e.flags)}else Co=!1,si&&0!==(1048576&t.flags)&&ei(t,Gr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((i=r.$$typeof)===S){t.tag=11,t=Ao(null,t,r,e,n);break e}if(i===_){t.tag=14,t=Po(null,t,r,e,n);break e}}throw t=R(r)||r,Error(a(306,t,""))}Mr(r)?(e=yo(r,e),t.tag=1,t=Fo(null,t,r,e,n)):(t.tag=0,t=Lo(null,t,r,e,n))}return t;case 0:return Lo(e,t,t.type,t.pendingProps,n);case 1:return Fo(e,t,r=t.type,i=yo(r,t.pendingProps),n);case 3:e:{if(K(t,t.stateNode.containerInfo),null===e)throw Error(a(387));r=t.pendingProps;var s=t.memoizedState;i=s.element,rs(e,t),ds(t,r,null,n);var o=t.memoizedState;if(r=o.cache,bi(0,Ri,r),r!==s.cache&&Si(t,[Ri],n,!0),us(),r=o.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Uo(e,t,r,n);break e}if(r!==i){mi(i=xr(Error(a(424)),t)),t=Uo(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ii=vd(e.firstChild),ri=t,si=!0,ai=null,oi=!0,n=ro(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===i){t=Xo(e,t,n);break e}Io(e,t,r,n)}t=t.child}return t;case 26:return Do(e,t),null===e?(n=Id(t.type,null,t.pendingProps,null))?t.memoizedState=n:si||(n=t.type,e=t.pendingProps,(r=id(H.current).createElement(n))[Re]=t,r[Oe]=e,td(r,n,e),We(r),t.stateNode=r):t.memoizedState=Id(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Q(t),null===e&&si&&(r=t.stateNode=Ed(t.type,t.pendingProps,H.current),ri=t,oi=!0,i=ii,pd(t.type)?(bd=i,ii=vd(r.firstChild)):ii=i),Io(e,t,t.pendingProps.children,n),Do(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&si&&((i=r=ii)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ue])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===s)return e}if(null===(e=vd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,oi))?(t.stateNode=r,ri=t,ii=vd(r.firstChild),oi=!1,i=!0):i=!1),i||ci(t)),Q(t),i=t.type,s=t.pendingProps,o=null!==e?e.memoizedProps:null,r=s.children,od(i,s)?r=null:null!==o&&od(i,o)&&(t.flags|=32),null!==t.memoizedState&&(i=Rs(e,t,Ds,null,null,n),Yd._currentValue=i),Do(e,t),Io(e,t,r,n),t.child;case 6:return null===e&&si&&((e=n=ii)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=vd(e.nextSibling)))return null}return e}(n,t.pendingProps,oi))?(t.stateNode=n,ri=t,ii=null,e=!0):e=!1),e||ci(t)),null;case 13:return qo(e,t,n);case 4:return K(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=no(t,null,r,n):Io(e,t,r,n),t.child;case 11:return Ao(e,t,t.type,t.pendingProps,n);case 7:return Io(e,t,t.pendingProps,n),t.child;case 8:case 12:return Io(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,bi(0,t.type,r.value),Io(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,_i(t),r=r(i=Ni(i)),t.flags|=1,Io(e,t,r,n),t.child;case 14:return Po(e,t,t.type,t.pendingProps,n);case 15:return Ro(e,t,t.type,t.pendingProps,n);case 19:return Yo(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Wo(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Fr(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Oo(e,t,n);case 24:return _i(t),r=Ni(Ri),null===e?(null===(i=Bi())&&(i=ic,s=Oi(),i.pooledCache=s,s.refCount++,null!==s&&(i.pooledCacheLanes|=n),i=s),t.memoizedState={parent:r,cache:i},ns(t),bi(0,Ri,i)):(0!==(e.lanes&n)&&(rs(e,t),ds(t,null,null,n),us()),i=e.memoizedState,s=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),bi(0,Ri,r)):(r=s.cache,bi(0,Ri,r),r!==i.cache&&Si(t,[Ri],n,!0))),Io(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function Zo(e){e.flags|=4}function el(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Bd(t)){if(null!==(t=io.current)&&((4194048&ac)===ac?null!==so:(62914560&ac)!==ac&&0===(536870912&ac)||t!==so))throw $i=Qi,Ki;e.flags|=8192}}function tl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?ke():536870912,e.lanes|=t,vc|=t)}function nl(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function rl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function il(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return rl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),wi(Ri),G(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hi(t)?Zo(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,pi())),rl(t),null;case 26:return n=t.memoizedState,null===e?(Zo(t),null!==n?(rl(t),el(t,n)):(rl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Zo(t),rl(t),el(t,n)):(rl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Zo(t),rl(t),t.flags&=-16777217),null;case 27:Y(t),n=H.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Zo(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return rl(t),null}e=B.current,hi(t)?ui(t):(e=Ed(i,r,n),t.stateNode=e,Zo(t))}return rl(t),null;case 5:if(Y(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Zo(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return rl(t),null}if(e=B.current,hi(t))ui(t);else{switch(i=id(H.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[Re]=t,e[Oe]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(td(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Zo(t)}}return rl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Zo(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(e=H.current,hi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ri))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[Re]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Ju(e.nodeValue,n)))||ci(t)}else(e=id(e).createTextNode(r))[Re]=t,t.stateNode=e}return rl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=hi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[Re]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;rl(t),i=!1}else i=pi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(co(t),t):(co(t),null)}if(co(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var s=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(s=r.memoizedState.cachePool.pool),s!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),tl(t,t.updateQueue),rl(t),null;case 4:return G(),null===e&&zu(t.stateNode.containerInfo),rl(t),null;case 10:return wi(t.type),rl(t),null;case 19:if(V(uo),null===(i=t.memoizedState))return rl(t),null;if(r=0!==(128&t.flags),null===(s=i.rendering))if(r)nl(i,!1);else{if(0!==fc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=ho(e))){for(t.flags|=128,nl(i,!1),e=s.updateQueue,t.updateQueue=e,tl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Ur(n,e),n=n.sibling;return z(uo,1&uo.current|2),t.child}e=e.sibling}null!==i.tail&&te()>kc&&(t.flags|=128,r=!0,nl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ho(s))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,tl(t,e),nl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate&&!si)return rl(t),null}else 2*te()-i.renderingStartTime>kc&&536870912!==n&&(t.flags|=128,r=!0,nl(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=i.last)?e.sibling=s:t.child=s,i.last=s)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=te(),t.sibling=null,e=uo.current,z(uo,r?1&e|2:1&e),t):(rl(t),null);case 22:case 23:return co(t),vs(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(rl(t),6&t.subtreeFlags&&(t.flags|=8192)):rl(t),null!==(n=t.updateQueue)&&tl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&V(zi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),wi(Ri),rl(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function sl(e,t){switch(ni(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return wi(Ri),G(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Y(t),null;case 13:if(co(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return V(uo),null;case 4:return G(),null;case 10:return wi(t.type),null;case 22:case 23:return co(t),vs(),null!==e&&V(zi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return wi(Ri),null;default:return null}}function al(e,t){switch(ni(t),t.tag){case 3:wi(Ri),G();break;case 26:case 27:case 5:Y(t);break;case 4:G();break;case 13:co(t);break;case 19:V(uo);break;case 10:wi(t.type);break;case 22:case 23:co(t),vs(),null!==e&&V(zi);break;case 24:wi(Ri)}}function ol(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var s=n.create,a=n.inst;r=s(),a.destroy=r}n=n.next}while(n!==i)}}catch(o){du(t,t.return,o)}}function ll(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var s=i.next;r=s;do{if((r.tag&e)===e){var a=r.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,i=t;var l=n,c=o;try{c()}catch(u){du(i,l,u)}}}r=r.next}while(r!==s)}}catch(u){du(t,t.return,u)}}function cl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{fs(t,n)}catch(r){du(e,e.return,r)}}}function ul(e,t,n){n.props=yo(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){du(e,t,r)}}function dl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(i){du(e,t,i)}}function hl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){du(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(s){du(e,t,s)}else n.current=null}function fl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){du(e,e.return,i)}}function pl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,o=null,l=null,c=null,u=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(p)||Zu(e,t,p,null,r,h)}}for(var f in r){var p=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":s=p;break;case"name":i=p;break;case"checked":u=p;break;case"defaultChecked":d=p;break;case"value":o=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(a(137,t));break;default:p!==h&&Zu(e,t,f,p,r,h)}}return void gt(e,o,l,c,u,d,s,i);case"select":for(s in p=o=l=f=null,n)if(c=n[s],n.hasOwnProperty(s)&&null!=c)switch(s){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(s)||Zu(e,t,s,null,r,c)}for(i in r)if(s=r[i],c=n[i],r.hasOwnProperty(i)&&(null!=s||null!=c))switch(i){case"value":f=s;break;case"defaultValue":l=s;break;case"multiple":o=s;default:s!==c&&Zu(e,t,i,s,r,c)}return t=l,n=o,r=p,void(null!=f?bt(e,!!n,f,!1):!!r!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Zu(e,t,l,null,r,i)}for(o in r)if(i=r[o],s=n[o],r.hasOwnProperty(o)&&(null!=i||null!=s))switch(o){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(a(91));break;default:i!==s&&Zu(e,t,o,i,r,s)}return void wt(e,f,p);case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else Zu(e,t,m,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else Zu(e,t,c,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&Zu(e,t,g,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(a(137,t));break;default:Zu(e,t,u,f,r,p)}return;default:if(Nt(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&ed(e,t,y,void 0,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||ed(e,t,d,f,r,p);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&Zu(e,t,v,null,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||null==f&&null==p||Zu(e,t,h,f,r,p)}(r,e.type,n,t),r[Oe]=t}catch(i){du(e,e.return,i)}}function ml(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&pd(e.type)||4===e.tag}function gl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ml(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&pd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function yl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$u));else if(4!==r&&(27===r&&pd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function vl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&pd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}function bl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);td(t,r,n),t[Re]=e,t[Oe]=n}catch(s){du(e,e.return,s)}}var wl=!1,El=!1,Sl=!1,kl="function"===typeof WeakSet?WeakSet:Set,xl=null;function _l(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Fl(e,n),4&r&&ol(5,n);break;case 1:if(Fl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){du(n,n.return,a)}else{var i=yo(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){du(n,n.return,o)}}64&r&&cl(n),512&r&&dl(n,n.return);break;case 3:if(Fl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{fs(e,t)}catch(a){du(n,n.return,a)}}break;case 27:null===t&&4&r&&bl(n);case 26:case 5:Fl(e,n),null===t&&4&r&&fl(n),512&r&&dl(n,n.return);break;case 12:Fl(e,n);break;case 13:Fl(e,n),4&r&&Pl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=mu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||wl)){t=null!==t&&null!==t.memoizedState||El,i=wl;var s=El;wl=r,(El=t)&&!s?Vl(e,n,0!==(8772&n.subtreeFlags)):Fl(e,n),wl=i,El=s}break;case 30:break;default:Fl(e,n)}}function Nl(e){var t=e.alternate;null!==t&&(e.alternate=null,Nl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ve(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Tl=null,Cl=!1;function Il(e,t,n){for(n=n.child;null!==n;)Al(e,t,n),n=n.sibling}function Al(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ue,n)}catch(s){}switch(n.tag){case 26:El||hl(n,t),Il(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:El||hl(n,t);var r=Tl,i=Cl;pd(n.type)&&(Tl=n.stateNode,Cl=!1),Il(e,t,n),Sd(n.stateNode),Tl=r,Cl=i;break;case 5:El||hl(n,t);case 6:if(r=Tl,i=Cl,Tl=null,Il(e,t,n),Cl=i,null!==(Tl=r))if(Cl)try{(9===Tl.nodeType?Tl.body:"HTML"===Tl.nodeName?Tl.ownerDocument.body:Tl).removeChild(n.stateNode)}catch(a){du(n,t,a)}else try{Tl.removeChild(n.stateNode)}catch(a){du(n,t,a)}break;case 18:null!==Tl&&(Cl?(md(9===(e=Tl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Ch(e)):md(Tl,n.stateNode));break;case 4:r=Tl,i=Cl,Tl=n.stateNode.containerInfo,Cl=!0,Il(e,t,n),Tl=r,Cl=i;break;case 0:case 11:case 14:case 15:El||ll(2,n,t),El||ll(4,n,t),Il(e,t,n);break;case 1:El||(hl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&ul(n,t,r)),Il(e,t,n);break;case 21:Il(e,t,n);break;case 22:El=(r=El)||null!==n.memoizedState,Il(e,t,n),El=r;break;default:Il(e,t,n)}}function Pl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Ch(e)}catch(n){du(t,t.return,n)}}function Rl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new kl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new kl),t;default:throw Error(a(435,e.tag))}}(e);t.forEach((function(t){var r=gu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}function Ol(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],s=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(pd(l.type)){Tl=l.stateNode,Cl=!1;break e}break;case 5:Tl=l.stateNode,Cl=!1;break e;case 3:case 4:Tl=l.stateNode.containerInfo,Cl=!0;break e}l=l.return}if(null===Tl)throw Error(a(160));Al(s,o,i),Tl=null,Cl=!1,null!==(s=i.alternate)&&(s.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Dl(t,e),t=t.sibling}var jl=null;function Dl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ol(t,e),Ll(e),4&r&&(ll(3,e,e.return),ol(3,e),ll(5,e,e.return));break;case 1:Ol(t,e),Ll(e),512&r&&(El||null===n||hl(n,n.return)),64&r&&wl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=jl;if(Ol(t,e),Ll(e),512&r&&(El||null===n||hl(n,n.return)),4&r){var s=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(s=i.getElementsByTagName("title")[0])||s[Ue]||s[Re]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=i.createElement(r),i.head.insertBefore(s,i.querySelector("head > title"))),td(s,r,n),s[Re]=e,We(s),r=s;break e;case"link":var o=Vd("link","href",i).get(r+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((s=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}td(s=i.createElement(r),r,n),i.head.appendChild(s);break;case"meta":if(o=Vd("meta","content",i).get(r+(n.content||"")))for(l=0;l<o.length;l++)if((s=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}td(s=i.createElement(r),r,n),i.head.appendChild(s);break;default:throw Error(a(468,r))}s[Re]=e,We(s),r=s}e.stateNode=r}else zd(i,e.type,e.stateNode);else e.stateNode=Dd(i,r,e.memoizedProps);else s!==r?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===r?zd(i,e.type,e.stateNode):Dd(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&pl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Ol(t,e),Ll(e),512&r&&(El||null===n||hl(n,n.return)),null!==n&&4&r&&pl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Ol(t,e),Ll(e),512&r&&(El||null===n||hl(n,n.return)),32&e.flags){i=e.stateNode;try{St(i,"")}catch(p){du(e,e.return,p)}}4&r&&null!=e.stateNode&&pl(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(Sl=!0);break;case 6:if(Ol(t,e),Ll(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(p){du(e,e.return,p)}}break;case 3:if(Ud=null,i=jl,jl=_d(t.containerInfo),Ol(t,e),jl=i,Ll(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ch(t.containerInfo)}catch(p){du(e,e.return,p)}Sl&&(Sl=!1,Ml(e));break;case 4:r=jl,jl=_d(e.stateNode.containerInfo),Ol(t,e),Ll(e),jl=r;break;case 12:default:Ol(t,e),Ll(e);break;case 13:Ol(t,e),Ll(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Sc=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Rl(e,r)));break;case 22:i=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=wl,d=El;if(wl=u||i,El=d||c,Ol(t,e),El=d,wl=u,Ll(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||c||wl||El||Ul(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(s=c.stateNode,i)"function"===typeof(o=s.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(p){du(c,c.return,p)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(p){du(c,c.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Rl(e,n))));break;case 19:Ol(t,e),Ll(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Rl(e,r)));case 30:case 21:}}function Ll(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(ml(r)){n=r;break}r=r.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var i=n.stateNode;vl(e,gl(e),i);break;case 5:var s=n.stateNode;32&n.flags&&(St(s,""),n.flags&=-33),vl(e,gl(e),s);break;case 3:case 4:var o=n.stateNode.containerInfo;yl(e,gl(e),o);break;default:throw Error(a(161))}}catch(l){du(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ml(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ml(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Fl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)_l(e,t.alternate,t),t=t.sibling}function Ul(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ll(4,t,t.return),Ul(t);break;case 1:hl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&ul(t,t.return,n),Ul(t);break;case 27:Sd(t.stateNode);case 26:case 5:hl(t,t.return),Ul(t);break;case 22:null===t.memoizedState&&Ul(t);break;default:Ul(t)}e=e.sibling}}function Vl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,s=t,a=s.flags;switch(s.tag){case 0:case 11:case 15:Vl(i,s,n),ol(4,s);break;case 1:if(Vl(i,s,n),"function"===typeof(i=(r=s).stateNode).componentDidMount)try{i.componentDidMount()}catch(c){du(r,r.return,c)}if(null!==(i=(r=s).updateQueue)){var o=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)hs(l[i],o)}catch(c){du(r,r.return,c)}}n&&64&a&&cl(s),dl(s,s.return);break;case 27:bl(s);case 26:case 5:Vl(i,s,n),n&&null===r&&4&a&&fl(s),dl(s,s.return);break;case 12:Vl(i,s,n);break;case 13:Vl(i,s,n),n&&4&a&&Pl(i,s);break;case 22:null===s.memoizedState&&Vl(i,s,n),dl(s,s.return);break;case 30:break;default:Vl(i,s,n)}t=t.sibling}}function zl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&ji(n))}function Bl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&ji(e))}function ql(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Hl(e,t,n,r),t=t.sibling}function Hl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:ql(e,t,n,r),2048&i&&ol(9,t);break;case 1:case 13:default:ql(e,t,n,r);break;case 3:ql(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&ji(e)));break;case 12:if(2048&i){ql(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,o=s.onPostCommit;"function"===typeof o&&o(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){du(t,t.return,l)}}else ql(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,a=t.alternate,null!==t.memoizedState?2&s._visibility?ql(e,t,n,r):Kl(e,t):2&s._visibility?ql(e,t,n,r):(s._visibility|=2,Wl(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&i&&zl(a,t);break;case 24:ql(e,t,n,r),2048&i&&Bl(t.alternate,t)}}function Wl(e,t,n,r,i){for(i=i&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var s=e,a=t,o=n,l=r,c=a.flags;switch(a.tag){case 0:case 11:case 15:Wl(s,a,o,l,i),ol(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?2&u._visibility?Wl(s,a,o,l,i):Kl(s,a):(u._visibility|=2,Wl(s,a,o,l,i)),i&&2048&c&&zl(a.alternate,a);break;case 24:Wl(s,a,o,l,i),i&&2048&c&&Bl(a.alternate,a);break;default:Wl(s,a,o,l,i)}t=t.sibling}}function Kl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Kl(n,r),2048&i&&zl(r.alternate,r);break;case 24:Kl(n,r),2048&i&&Bl(r.alternate,r);break;default:Kl(n,r)}t=t.sibling}}var Gl=8192;function Ql(e){if(e.subtreeFlags&Gl)for(e=e.child;null!==e;)Yl(e),e=e.sibling}function Yl(e){switch(e.tag){case 26:Ql(e),e.flags&Gl&&null!==e.memoizedState&&function(e,t,n){if(null===qd)throw Error(a(475));var r=qd;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var i=Ad(n.href),s=e.querySelector(Pd(i));if(s)return null!==(e=s._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Wd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=s,void We(s);s=e.ownerDocument||e,n=Rd(n),(i=kd.get(i))&&Md(n,i),We(s=s.createElement("link"));var o=s;o._p=new Promise((function(e,t){o.onload=e,o.onerror=t})),td(s,"link",n),t.instance=s}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Wd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(jl,e.memoizedState,e.memoizedProps);break;case 5:default:Ql(e);break;case 3:case 4:var t=jl;jl=_d(e.stateNode.containerInfo),Ql(e),jl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Gl,Gl=16777216,Ql(e),Gl=t):Ql(e))}}function Xl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Jl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];xl=r,ec(r,e)}Xl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)$l(e),e=e.sibling}function $l(e){switch(e.tag){case 0:case 11:case 15:Jl(e),2048&e.flags&&ll(9,e,e.return);break;case 3:case 12:default:Jl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Zl(e)):Jl(e)}}function Zl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];xl=r,ec(r,e)}Xl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ll(8,t,t.return),Zl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Zl(t));break;default:Zl(t)}e=e.sibling}}function ec(e,t){for(;null!==xl;){var n=xl;switch(n.tag){case 0:case 11:case 15:ll(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:ji(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,xl=r;else e:for(n=e;null!==xl;){var i=(r=xl).sibling,s=r.return;if(Nl(r),r===n){xl=null;break e}if(null!==i){i.return=s,xl=i;break e}xl=s}}}var tc={getCacheForType:function(e){var t=Ni(Ri),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},nc="function"===typeof WeakMap?WeakMap:Map,rc=0,ic=null,sc=null,ac=0,oc=0,lc=null,cc=!1,uc=!1,dc=!1,hc=0,fc=0,pc=0,mc=0,gc=0,yc=0,vc=0,bc=null,wc=null,Ec=!1,Sc=0,kc=1/0,xc=null,_c=null,Nc=0,Tc=null,Cc=null,Ic=0,Ac=0,Pc=null,Rc=null,Oc=0,jc=null;function Dc(){if(0!==(2&rc)&&0!==ac)return ac&-ac;if(null!==j.T){return 0!==Mi?Mi:Au()}return Ae()}function Lc(){0===yc&&(yc=0===(536870912&ac)||si?Se():536870912);var e=io.current;return null!==e&&(e.flags|=32),yc}function Mc(e,t,n){(e!==ic||2!==oc&&9!==oc)&&null===e.cancelPendingCommit||(Hc(e,0),zc(e,ac,yc,!1)),_e(e,n),0!==(2&rc)&&e===ic||(e===ic&&(0===(2&rc)&&(mc|=n),4===fc&&zc(e,ac,yc,!1)),ku(e))}function Fc(e,t,n){if(0!==(6&rc))throw Error(a(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||we(e,t),i=r?function(e,t){var n=rc;rc|=2;var r=Kc(),i=Gc();ic!==e||ac!==t?(xc=null,kc=te()+500,Hc(e,t)):uc=we(e,t);e:for(;;)try{if(0!==oc&&null!==sc){t=sc;var s=lc;t:switch(oc){case 1:oc=0,lc=null,eu(e,t,s,1);break;case 2:case 9:if(Yi(s)){oc=0,lc=null,Zc(t);break}t=function(){2!==oc&&9!==oc||ic!==e||(oc=7),ku(e)},s.then(t,t);break e;case 3:oc=7;break e;case 4:oc=5;break e;case 7:Yi(s)?(oc=0,lc=null,Zc(t)):(oc=0,lc=null,eu(e,t,s,7));break;case 5:var o=null;switch(sc.tag){case 26:o=sc.memoizedState;case 5:case 27:var l=sc;if(!o||Bd(o)){oc=0,lc=null;var c=l.sibling;if(null!==c)sc=c;else{var u=l.return;null!==u?(sc=u,tu(u)):sc=null}break t}}oc=0,lc=null,eu(e,t,s,5);break;case 6:oc=0,lc=null,eu(e,t,s,6);break;case 8:qc(),fc=6;break e;default:throw Error(a(462))}}Jc();break}catch(d){Wc(e,d)}return vi=yi=null,j.H=r,j.A=i,rc=n,null!==sc?0:(ic=null,ac=0,Cr(),fc)}(e,t):Yc(e,t,!0),s=r;;){if(0===i){uc&&!r&&zc(e,t,0,!1);break}if(n=e.current.alternate,!s||Vc(n)){if(2===i){if(s=t,e.errorRecoveryDisabledLanes&s)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;i=bc;var c=l.current.memoizedState.isDehydrated;if(c&&(Hc(l,o).flags|=256),2!==(o=Yc(l,o,!1))){if(dc&&!c){l.errorRecoveryDisabledLanes|=s,mc|=s,i=4;break e}s=wc,wc=i,null!==s&&(null===wc?wc=s:wc.push.apply(wc,s))}i=o}if(s=!1,2!==i)continue}}if(1===i){Hc(e,0),zc(e,t,0,!0);break}e:{switch(r=e,s=i){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:zc(r,t,yc,!cc);break e;case 2:wc=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(i=Sc+300-te())){if(zc(r,t,yc,!cc),0!==be(r,0,!0))break e;r.timeoutHandle=cd(Uc.bind(null,r,n,wc,xc,Ec,t,yc,mc,vc,cc,s,2,-0,0),i)}else Uc(r,n,wc,xc,Ec,t,yc,mc,vc,cc,s,0,-0,0)}break}i=Yc(e,t,!1),s=!1}ku(e)}function Uc(e,t,n,r,i,s,o,l,c,u,d,h,f,p){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(qd={stylesheets:null,count:0,unsuspend:Hd},Yl(t),null!==(h=function(){if(null===qd)throw Error(a(475));var e=qd;return e.stylesheets&&0===e.count&&Gd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout((function(){if(e.stylesheets&&Gd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(ru.bind(null,e,t,s,n,r,i,o,l,c,d,1,f,p)),void zc(e,s,o,!u);ru(e,t,s,n,r,i,o,l,c)}function Vc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Yn(s(),i))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zc(e,t,n,r){t&=~gc,t&=~mc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var s=31-fe(i),a=1<<s;r[s]=-1,i&=~a}0!==n&&Ne(e,n,t)}function Bc(){return 0!==(6&rc)||(xu(0,!1),!1)}function qc(){if(null!==sc){if(0===oc)var e=sc.return;else vi=yi=null,Fs(e=sc),Ya=null,Xa=0,e=sc;for(;null!==e;)al(e.alternate,e),e=e.return;sc=null}}function Hc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,ud(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),qc(),ic=e,sc=n=Fr(e.current,null),ac=t,oc=0,lc=null,cc=!1,uc=we(e,t),dc=!1,vc=yc=gc=mc=pc=fc=0,wc=bc=null,Ec=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-fe(r),s=1<<i;t|=e[i],r&=~s}return hc=t,Cr(),n}function Wc(e,t){ws=null,j.H=Wa,t===Wi||t===Gi?(t=Zi(),oc=3):t===Ki?(t=Zi(),oc=4):oc=t===To?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,lc=t,null===sc&&(fc=1,So(e,xr(t,e.current)))}function Kc(){var e=j.H;return j.H=Wa,null===e?Wa:e}function Gc(){var e=j.A;return j.A=tc,e}function Qc(){fc=4,cc||(4194048&ac)!==ac&&null!==io.current||(uc=!0),0===(134217727&pc)&&0===(134217727&mc)||null===ic||zc(ic,ac,yc,!1)}function Yc(e,t,n){var r=rc;rc|=2;var i=Kc(),s=Gc();ic===e&&ac===t||(xc=null,Hc(e,t)),t=!1;var a=fc;e:for(;;)try{if(0!==oc&&null!==sc){var o=sc,l=lc;switch(oc){case 8:qc(),a=6;break e;case 3:case 2:case 9:case 6:null===io.current&&(t=!0);var c=oc;if(oc=0,lc=null,eu(e,o,l,c),n&&uc){a=0;break e}break;default:c=oc,oc=0,lc=null,eu(e,o,l,c)}}Xc(),a=fc;break}catch(u){Wc(e,u)}return t&&e.shellSuspendCounter++,vi=yi=null,rc=r,j.H=i,j.A=s,null===sc&&(ic=null,ac=0,Cr()),a}function Xc(){for(;null!==sc;)$c(sc)}function Jc(){for(;null!==sc&&!Z();)$c(sc)}function $c(e){var t=$o(e.alternate,e,hc);e.memoizedProps=e.pendingProps,null===t?tu(e):sc=t}function Zc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Mo(n,t,t.pendingProps,t.type,void 0,ac);break;case 11:t=Mo(n,t,t.pendingProps,t.type.render,t.ref,ac);break;case 5:Fs(t);default:al(n,t),t=$o(n,t=sc=Ur(t,hc),hc)}e.memoizedProps=e.pendingProps,null===t?tu(e):sc=t}function eu(e,t,n,r){vi=yi=null,Fs(t),Ya=null,Xa=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&ki(t,n,i,!0),null!==(n=io.current)){switch(n.tag){case 13:return null===so?Qc():null===n.alternate&&0===fc&&(fc=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===Qi?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),hu(e,r,i)),!1;case 22:return n.flags|=65536,r===Qi?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),hu(e,r,i)),!1}throw Error(a(435,n.tag))}return hu(e,r,i),Qc(),!1}if(si)return null!==(t=io.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==li&&mi(xr(e=Error(a(422),{cause:r}),n))):(r!==li&&mi(xr(t=Error(a(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=xr(r,n),ls(e,i=xo(e.stateNode,r,i)),4!==fc&&(fc=2)),!1;var s=Error(a(520),{cause:r});if(s=xr(s,n),null===bc?bc=[s]:bc.push(s),4!==fc&&(fc=2),null===t)return!0;r=xr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,ls(n,e=xo(n.stateNode,r,e)),!1;case 1:if(t=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===_c||!_c.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,No(i=_o(i),e,n,r),ls(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,ac))return fc=1,So(e,xr(n,e.current)),void(sc=null)}catch(s){if(null!==i)throw sc=i,s;return fc=1,So(e,xr(n,e.current)),void(sc=null)}32768&t.flags?(si||1===r?e=!0:uc||0!==(536870912&ac)?e=!1:(cc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=io.current)&&13===r.tag&&(r.flags|=16384))),nu(t,e)):tu(t)}function tu(e){var t=e;do{if(0!==(32768&t.flags))return void nu(t,cc);e=t.return;var n=il(t.alternate,t,hc);if(null!==n)return void(sc=n);if(null!==(t=t.sibling))return void(sc=t);sc=t=e}while(null!==t);0===fc&&(fc=5)}function nu(e,t){do{var n=sl(e.alternate,e);if(null!==n)return n.flags&=32767,void(sc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(sc=e);sc=e=n}while(null!==e);fc=6,sc=null}function ru(e,t,n,r,i,s,o,l,c){e.cancelPendingCommit=null;do{lu()}while(0!==Nc);if(0!==(6&rc))throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(s=t.lanes|t.childLanes,function(e,t,n,r,i,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-fe(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Ne(e,r,0),0!==s&&0===i&&0!==e.tag&&(e.suspendedLanes|=s&~(a&~t))}(e,n,s|=Tr,o,l,c),e===ic&&(sc=ic=null,ac=0),Cc=t,Tc=e,Ic=n,Ac=s,Pc=i,Rc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,J(se,(function(){return cu(),null}))):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=j.T,j.T=null,i=D.p,D.p=2,o=rc,rc|=4;try{!function(e,t){if(e=e.containerInfo,nd=rh,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==s||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=o),f===s&&++d===r&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(rd={focusedElem:e,selectionRange:n},rh=!1,xl=t;null!==xl;)if(e=(t=xl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,xl=e;else for(;null!==xl;){switch(s=(t=xl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,n=t,i=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var m=yo(n.type,i,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(m,s),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){du(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))gd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,xl=e;break}xl=t.return}}(e,t)}finally{rc=o,D.p=i,j.T=r}}Nc=1,iu(),su(),au()}}function iu(){if(1===Nc){Nc=0;var e=Tc,t=Cc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=j.T,j.T=null;var r=D.p;D.p=2;var i=rc;rc|=4;try{Dl(t,e);var s=rd,a=er(e.containerInfo),o=s.focusedElem,l=s.selectionRange;if(a!==o&&o&&o.ownerDocument&&Zn(o.ownerDocument.documentElement,o)){if(null!==l&&tr(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=o.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!f.extend&&m>g&&(a=g,g=m,m=a);var y=$n(o,m),v=$n(o,g);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var b=d.createRange();b.setStart(y.node,y.offset),f.removeAllRanges(),m>g?(f.addRange(b),f.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),f.addRange(b))}}}}for(d=[],f=o;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<d.length;o++){var w=d[o];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}rh=!!nd,rd=nd=null}finally{rc=i,D.p=r,j.T=n}}e.current=t,Nc=2}}function su(){if(2===Nc){Nc=0;var e=Tc,t=Cc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=j.T,j.T=null;var r=D.p;D.p=2;var i=rc;rc|=4;try{_l(e,t.alternate,t)}finally{rc=i,D.p=r,j.T=n}}Nc=3}}function au(){if(4===Nc||3===Nc){Nc=0,ee();var e=Tc,t=Cc,n=Ic,r=Rc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Nc=5:(Nc=0,Cc=Tc=null,ou(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(_c=null),Ie(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=j.T,i=D.p,D.p=2,j.T=null;try{for(var s=e.onRecoverableError,a=0;a<r.length;a++){var o=r[a];s(o.value,{componentStack:o.stack})}}finally{j.T=t,D.p=i}}0!==(3&Ic)&&lu(),ku(e),i=e.pendingLanes,0!==(4194090&n)&&0!==(42&i)?e===jc?Oc++:(Oc=0,jc=e):Oc=0,xu(0,!1)}}function ou(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,ji(t)))}function lu(e){return iu(),su(),au(),cu()}function cu(){if(5!==Nc)return!1;var e=Tc,t=Ac;Ac=0;var n=Ie(Ic),r=j.T,i=D.p;try{D.p=32>n?32:n,j.T=null,n=Pc,Pc=null;var s=Tc,o=Ic;if(Nc=0,Cc=Tc=null,Ic=0,0!==(6&rc))throw Error(a(331));var l=rc;if(rc|=4,$l(s.current),Hl(s,s.current,o,n),rc=l,xu(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ue,s)}catch(c){}return!0}finally{D.p=i,j.T=r,ou(e,t)}}function uu(e,t,n){t=xr(n,t),null!==(e=ss(e,t=xo(e.stateNode,t,2),2))&&(_e(e,2),ku(e))}function du(e,t,n){if(3===e.tag)uu(e,e,n);else for(;null!==t;){if(3===t.tag){uu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===_c||!_c.has(r))){e=xr(n,e),null!==(r=ss(t,n=_o(2),2))&&(No(n,r,t,e),_e(r,2),ku(r));break}}t=t.return}}function hu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new nc;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(dc=!0,i.add(n),e=fu.bind(null,e,t,n),t.then(e,e))}function fu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ic===e&&(ac&n)===n&&(4===fc||3===fc&&(62914560&ac)===ac&&300>te()-Sc?0===(2&rc)&&Hc(e,0):gc|=n,vc===ac&&(vc=0)),ku(e)}function pu(e,t){0===t&&(t=ke()),null!==(e=Pr(e,t))&&(_e(e,t),ku(e))}function mu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),pu(e,n)}function gu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),pu(e,n)}var yu=null,vu=null,bu=!1,wu=!1,Eu=!1,Su=0;function ku(e){e!==vu&&null===e.next&&(null===vu?yu=vu=e:vu=vu.next=e),wu=!0,bu||(bu=!0,hd((function(){0!==(6&rc)?J(re,_u):Nu()})))}function xu(e,t){if(!Eu&&wu){Eu=!0;do{for(var n=!1,r=yu;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var s=0;else{var a=r.suspendedLanes,o=r.pingedLanes;s=(1<<31-fe(42|e)+1)-1,s=201326741&(s&=i&~(a&~o))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,Iu(r,s))}else s=ac,0===(3&(s=be(r,r===ic?s:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||we(r,s)||(n=!0,Iu(r,s));r=r.next}}while(n);Eu=!1}}function _u(){Nu()}function Nu(){wu=bu=!1;var e=0;0!==Su&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==ld&&(ld=e,!0);return ld=null,!1}()&&(e=Su),Su=0);for(var t=te(),n=null,r=yu;null!==r;){var i=r.next,s=Tu(r,t);0===s?(r.next=null,null===n?yu=i:n.next=i,null===i&&(vu=n)):(n=r,(0!==e||0!==(3&s))&&(wu=!0)),r=i}xu(e,!1)}function Tu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var a=31-fe(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=Ee(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}if(n=ac,n=be(e,e===(t=ic)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===oc||9===oc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&$(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||we(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&$(r),Ie(n)){case 2:case 8:n=ie;break;case 32:default:n=se;break;case 268435456:n=oe}return r=Cu.bind(null,e),n=J(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&$(r),e.callbackPriority=2,e.callbackNode=null,2}function Cu(e,t){if(0!==Nc&&5!==Nc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(lu()&&e.callbackNode!==n)return null;var r=ac;return 0===(r=be(e,e===ic?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Fc(e,r,t),Tu(e,te()),null!=e.callbackNode&&e.callbackNode===n?Cu.bind(null,e):null)}function Iu(e,t){if(lu())return null;Fc(e,t,!0)}function Au(){return 0===Su&&(Su=Se()),Su}function Pu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:It(""+e)}function Ru(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Ou=0;Ou<Er.length;Ou++){var ju=Er[Ou];Sr(ju.toLowerCase(),"on"+(ju[0].toUpperCase()+ju.slice(1)))}Sr(fr,"onAnimationEnd"),Sr(pr,"onAnimationIteration"),Sr(mr,"onAnimationStart"),Sr("dblclick","onDoubleClick"),Sr("focusin","onFocus"),Sr("focusout","onBlur"),Sr(gr,"onTransitionRun"),Sr(yr,"onTransitionStart"),Sr(vr,"onTransitionCancel"),Sr(br,"onTransitionEnd"),Ye("onMouseEnter",["mouseout","mouseover"]),Ye("onMouseLeave",["mouseout","mouseover"]),Ye("onPointerEnter",["pointerout","pointerover"]),Ye("onPointerLeave",["pointerout","pointerover"]),Qe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Du="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Du));function Mu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=c;try{s(i)}catch(u){vo(u)}i.currentTarget=null,s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=c;try{s(i)}catch(u){vo(u)}i.currentTarget=null,s=l}}}}function Fu(e,t){var n=t[De];void 0===n&&(n=t[De]=new Set);var r=e+"__bubble";n.has(r)||(Bu(t,e,2,!1),n.add(r))}function Uu(e,t,n){var r=0;t&&(r|=4),Bu(n,e,r,t)}var Vu="_reactListening"+Math.random().toString(36).slice(2);function zu(e){if(!e[Vu]){e[Vu]=!0,Ke.forEach((function(t){"selectionchange"!==t&&(Lu.has(t)||Uu(t,!1,e),Uu(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vu]||(t[Vu]=!0,Uu("selectionchange",!1,t))}}function Bu(e,t,n,r){switch(uh(t)){case 2:var i=ih;break;case 8:i=sh;break;default:i=ah}n=i.bind(null,t,n,e),i=void 0,!Ut||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qu(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i)break;if(4===a)for(a=r.return;null!==a;){var c=a.tag;if((3===c||4===c)&&a.stateNode.containerInfo===i)return;a=a.return}for(;null!==o;){if(null===(a=ze(o)))return;if(5===(c=a.tag)||6===c||26===c||27===c){r=s=a;continue e}o=o.parentNode}}r=r.return}Lt((function(){var r=s,i=Pt(n),a=[];e:{var o=wr.get(e);if(void 0!==o){var c=Zt,u=e;switch(e){case"keypress":if(0===Wt(n))break e;case"keydown":case"keyup":c=mn;break;case"focusin":u="focus",c=an;break;case"focusout":u="blur",c=an;break;case"beforeblur":case"afterblur":c=an;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=yn;break;case fr:case pr:case mr:c=on;break;case br:c=vn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=bn;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=gn;break;case"toggle":case"beforetoggle":c=wn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==o?o+"Capture":null:o;d=[];for(var p,m=r;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===f||null!=(g=Mt(m,f))&&d.push(Hu(m,g,p)),h)break;m=m.return}0<d.length&&(o=new c(o,u,null,n,i),a.push({event:o,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===At||!(u=n.relatedTarget||n.fromElement)||!ze(u)&&!u[je])&&(c||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?ze(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=rn,g="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=gn,g="onPointerLeave",f="onPointerEnter",m="pointer"),h=null==c?o:qe(c),p=null==u?o:qe(u),(o=new d(g,m+"leave",c,n,i)).target=h,o.relatedTarget=p,g=null,ze(i)===r&&((d=new d(f,m+"enter",u,n,i)).target=p,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(f=u,m=0,p=d=c;p;p=Ku(p))m++;for(p=0,g=f;g;g=Ku(g))p++;for(;0<m-p;)d=Ku(d),m--;for(;0<p-m;)f=Ku(f),p--;for(;m--;){if(d===f||null!==f&&d===f.alternate)break e;d=Ku(d),f=Ku(f)}d=null}else d=null;null!==c&&Gu(a,o,c,d,!1),null!==u&&null!==h&&Gu(a,h,u,d,!0)}if("select"===(c=(o=r?qe(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var y=Fn;else if(Rn(o))if(Un)y=Qn;else{y=Kn;var v=Wn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?r&&Nt(r.elementType)&&(y=Fn):y=Gn;switch(y&&(y=y(e,r))?On(a,y,n,i):(v&&v(e,o,r),"focusout"===e&&r&&"number"===o.type&&null!=r.memoizedProps.value&&vt(o,"number",o.value)),v=r?qe(r):window,e){case"focusin":(Rn(v)||"true"===v.contentEditable)&&(rr=v,ir=r,sr=null);break;case"focusout":sr=ir=rr=null;break;case"mousedown":ar=!0;break;case"contextmenu":case"mouseup":case"dragend":ar=!1,or(a,n,i);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":or(a,n,i)}var b;if(Sn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else An?Cn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(_n&&"ko"!==n.locale&&(An||"onCompositionStart"!==w?"onCompositionEnd"===w&&An&&(b=Ht()):(Bt="value"in(zt=i)?zt.value:zt.textContent,An=!0)),0<(v=Wu(r,w)).length&&(w=new cn(w,e,null,n,i),a.push({event:w,listeners:v}),b?w.data=b:null!==(b=In(n))&&(w.data=b))),(b=xn?function(e,t){switch(e){case"compositionend":return In(t);case"keypress":return 32!==t.which?null:(Tn=!0,Nn);case"textInput":return(e=t.data)===Nn&&Tn?null:e;default:return null}}(e,n):function(e,t){if(An)return"compositionend"===e||!Sn&&Cn(e,t)?(e=Ht(),qt=Bt=zt=null,An=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _n&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=Wu(r,"onBeforeInput")).length&&(v=new cn("onBeforeInput","beforeinput",null,n,i),a.push({event:v,listeners:w}),v.data=b)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var s=Pu((i[Oe]||null).action),a=r.submitter;a&&null!==(t=(t=a[Oe]||null)?Pu(t.formAction):a.getAttribute("formAction"))&&(s=t,a=null);var o=new Zt("action","action",null,r,i);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Su){var e=a?Ru(i,a):new FormData(i);Pa(n,{pending:!0,data:e,method:i.method,action:s},null,e)}}else"function"===typeof s&&(o.preventDefault(),e=a?Ru(i,a):new FormData(i),Pa(n,{pending:!0,data:e,method:i.method,action:s},s,e))},currentTarget:i}]})}}(a,e,r,n,i)}Mu(a,t)}))}function Hu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wu(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===s||(null!=(i=Mt(e,n))&&r.unshift(Hu(e,i,s)),null!=(i=Mt(e,t))&&r.push(Hu(e,i,s))),3===e.tag)return r;e=e.return}return[]}function Ku(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Gu(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===c||(l=c,i?null!=(c=Mt(n,s))&&a.unshift(Hu(n,c,l)):i||null!=(c=Mt(n,s))&&a.push(Hu(n,c,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Qu=/\r\n?/g,Yu=/\u0000|\uFFFD/g;function Xu(e){return("string"===typeof e?e:""+e).replace(Qu,"\n").replace(Yu,"")}function Ju(e,t){return t=Xu(t),Xu(e)===t}function $u(){}function Zu(e,t,n,r,i,s){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||St(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&St(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":_t(e,r,s);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=It(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===n?("input"!==t&&Zu(e,t,"name",i.name,i,null),Zu(e,t,"formEncType",i.formEncType,i,null),Zu(e,t,"formMethod",i.formMethod,i,null),Zu(e,t,"formTarget",i.formTarget,i,null)):(Zu(e,t,"encType",i.encType,i,null),Zu(e,t,"method",i.method,i,null),Zu(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=It(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=$u);break;case"onScroll":null!=r&&Fu("scroll",e);break;case"onScrollEnd":null!=r&&Fu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=It(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Fu("beforetoggle",e),Fu("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Tt.get(n)||n,r)}}function ed(e,t,n,r,i,s){switch(n){case"style":_t(e,r,s);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof r?St(e,r):("number"===typeof r||"bigint"===typeof r)&&St(e,""+r);break;case"onScroll":null!=r&&Fu("scroll",e);break;case"onScrollEnd":null!=r&&Fu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=$u);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ge.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(s=null!=(s=e[Oe]||null)?s[n]:null)&&e.removeEventListener(t,s,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function td(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fu("error",e),Fu("load",e);var r,i=!1,s=!1;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(null!=o)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Zu(e,t,r,o,n,null)}}return s&&Zu(e,t,"srcSet",n.srcSet,n,null),void(i&&Zu(e,t,"src",n.src,n,null));case"input":Fu("invalid",e);var l=r=o=s=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":s=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(a(137,t));break;default:Zu(e,t,i,d,n,null)}}return yt(e,r,l,c,u,o,s,!1),void dt(e);case"select":for(s in Fu("invalid",e),i=o=r=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":i=l;default:Zu(e,t,s,l,n,null)}return t=r,n=o,e.multiple=!!i,void(null!=t?bt(e,!!i,t,!1):null!=n&&bt(e,!!i,n,!0));case"textarea":for(o in Fu("invalid",e),r=s=i=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:Zu(e,t,o,l,n,null)}return Et(e,i,s,r),void dt(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))if("selected"===c)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else Zu(e,t,c,i,n,null);return;case"dialog":Fu("beforetoggle",e),Fu("toggle",e),Fu("cancel",e),Fu("close",e);break;case"iframe":case"object":Fu("load",e);break;case"video":case"audio":for(i=0;i<Du.length;i++)Fu(Du[i],e);break;case"image":Fu("error",e),Fu("load",e);break;case"details":Fu("toggle",e);break;case"embed":case"source":case"link":Fu("error",e),Fu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Zu(e,t,u,i,n,null)}return;default:if(Nt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(i=n[d])&&ed(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&Zu(e,t,l,i,n,null))}var nd=null,rd=null;function id(e){return 9===e.nodeType?e:e.ownerDocument}function sd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ad(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function od(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ld=null;var cd="function"===typeof setTimeout?setTimeout:void 0,ud="function"===typeof clearTimeout?clearTimeout:void 0,dd="function"===typeof Promise?Promise:void 0,hd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof dd?function(e){return dd.resolve(null).then(e).catch(fd)}:cd;function fd(e){setTimeout((function(){throw e}))}function pd(e){return"head"===e}function md(e,t){var n=t,r=0,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0<r&&8>r){n=r;var a=e.ownerDocument;if(1&n&&Sd(a.documentElement),2&n&&Sd(a.body),4&n)for(Sd(n=a.head),a=n.firstChild;a;){var o=a.nextSibling,l=a.nodeName;a[Ue]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=o}}if(0===i)return e.removeChild(s),void Ch(t);i--}else"$"===n||"$?"===n||"$!"===n?i++:r=n.charCodeAt(0)-48;else r=0;n=s}while(n);Ch(t)}function gd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":gd(n),Ve(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function yd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function vd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var bd=null;function wd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function Ed(e,t,n){switch(t=id(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function Sd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ve(e)}var kd=new Map,xd=new Set;function _d(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Nd=D.d;D.d={f:function(){var e=Nd.f(),t=Bc();return e||t},r:function(e){var t=Be(e);null!==t&&5===t.tag&&"form"===t.type?Oa(t):Nd.r(e)},D:function(e){Nd.D(e),Cd("dns-prefetch",e,null)},C:function(e,t){Nd.C(e,t),Cd("preconnect",e,t)},L:function(e,t,n){Nd.L(e,t,n);var r=Td;if(r&&e&&t){var i='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+mt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+mt(n.imageSizes)+'"]')):i+='[href="'+mt(e)+'"]';var s=i;switch(t){case"style":s=Ad(e);break;case"script":s=Od(e)}kd.has(s)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),kd.set(s,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Pd(s))||"script"===t&&r.querySelector(jd(s))||(td(t=r.createElement("link"),"link",e),We(t),r.head.appendChild(t)))}},m:function(e,t){Nd.m(e,t);var n=Td;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+mt(r)+'"][href="'+mt(e)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Od(e)}if(!kd.has(s)&&(e=h({rel:"modulepreload",href:e},t),kd.set(s,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(jd(s)))return}td(r=n.createElement("link"),"link",e),We(r),n.head.appendChild(r)}}},X:function(e,t){Nd.X(e,t);var n=Td;if(n&&e){var r=He(n).hoistableScripts,i=Od(e),s=r.get(i);s||((s=n.querySelector(jd(i)))||(e=h({src:e,async:!0},t),(t=kd.get(i))&&Fd(e,t),We(s=n.createElement("script")),td(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}},S:function(e,t,n){Nd.S(e,t,n);var r=Td;if(r&&e){var i=He(r).hoistableStyles,s=Ad(e);t=t||"default";var a=i.get(s);if(!a){var o={loading:0,preload:null};if(a=r.querySelector(Pd(s)))o.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=kd.get(s))&&Md(e,n);var l=a=r.createElement("link");We(l),td(l,"link",e),l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),l.addEventListener("load",(function(){o.loading|=1})),l.addEventListener("error",(function(){o.loading|=2})),o.loading|=4,Ld(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:o},i.set(s,a)}}},M:function(e,t){Nd.M(e,t);var n=Td;if(n&&e){var r=He(n).hoistableScripts,i=Od(e),s=r.get(i);s||((s=n.querySelector(jd(i)))||(e=h({src:e,async:!0,type:"module"},t),(t=kd.get(i))&&Fd(e,t),We(s=n.createElement("script")),td(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}};var Td="undefined"===typeof document?null:document;function Cd(e,t,n){var r=Td;if(r&&"string"===typeof t&&t){var i=mt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),xd.has(i)||(xd.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(td(t=r.createElement("link"),"link",e),We(t),r.head.appendChild(t)))}}function Id(e,t,n,r){var i,s,o,l,c=(c=H.current)?_d(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Ad(n.href),(r=(n=He(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Ad(n.href);var u=He(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Pd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),kd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},kd.set(e,n),u||(i=c,s=e,o=n,l=d.state,i.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=i.createElement("link"),l.preload=s,s.addEventListener("load",(function(){return l.loading|=1})),s.addEventListener("error",(function(){return l.loading|=2})),td(s,"link",o),We(s),i.head.appendChild(s))))),t&&null===r)throw Error(a(528,""));return d}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Od(n),(r=(n=He(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Ad(e){return'href="'+mt(e)+'"'}function Pd(e){return'link[rel="stylesheet"]['+e+"]"}function Rd(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Od(e){return'[src="'+mt(e)+'"]'}function jd(e){return"script[async]"+e}function Dd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+mt(n.href)+'"]');if(r)return t.instance=r,We(r),r;var i=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return We(r=(e.ownerDocument||e).createElement("style")),td(r,"style",i),Ld(r,n.precedence,e),t.instance=r;case"stylesheet":i=Ad(n.href);var s=e.querySelector(Pd(i));if(s)return t.state.loading|=4,t.instance=s,We(s),s;r=Rd(n),(i=kd.get(i))&&Md(r,i),We(s=(e.ownerDocument||e).createElement("link"));var o=s;return o._p=new Promise((function(e,t){o.onload=e,o.onerror=t})),td(s,"link",r),t.state.loading|=4,Ld(s,n.precedence,e),t.instance=s;case"script":return s=Od(n.src),(i=e.querySelector(jd(s)))?(t.instance=i,We(i),i):(r=n,(i=kd.get(s))&&Fd(r=h({},n),i),We(i=(e=e.ownerDocument||e).createElement("script")),td(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Ld(r,n.precedence,e));return t.instance}function Ld(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,a=0;a<r.length;a++){var o=r[a];if(o.dataset.precedence===t)s=o;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Md(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Fd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Ud=null;function Vd(e,t,n){if(null===Ud){var r=new Map,i=Ud=new Map;i.set(n,r)}else(r=(i=Ud).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[Ue]||s[Re]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var a=s.getAttribute(t)||"";a=e+a;var o=r.get(a);o?o.push(s):r.set(a,[s])}}return r}function zd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Bd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var qd=null;function Hd(){}function Wd(){if(this.count--,0===this.count)if(this.stylesheets)Gd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Kd=null;function Gd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Kd=new Map,t.forEach(Qd,e),Kd=null,Wd.call(e))}function Qd(e,t){if(!(4&t.state.loading)){var n=Kd.get(e);if(n)var r=n.get(null);else{n=new Map,Kd.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var a=i[s];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(i=t.instance).getAttribute("data-precedence"),(s=n.get(a)||r)===r&&n.set(null,i),n.set(a,i),this.count++,r=Wd.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Yd={$$typeof:E,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function Xd(e,t,n,r,i,s,a,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xe(0),this.hiddenUpdates=xe(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Jd(e,t,n,r,i,s,a,o,l,c,u,d){return e=new Xd(e,t,n,a,o,l,c,d),t=1,!0===s&&(t|=24),s=Lr(3,null,null,t),e.current=s,s.stateNode=e,(t=Oi()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},ns(s),e}function $d(e){return e?e=jr:jr}function Zd(e,t,n,r,i,s){i=$d(i),null===r.context?r.context=i:r.pendingContext=i,(r=is(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=ss(e,r,t))&&(Mc(n,0,t),os(n,e,t))}function eh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function th(e,t){eh(e,t),(e=e.alternate)&&eh(e,t)}function nh(e){if(13===e.tag){var t=Pr(e,67108864);null!==t&&Mc(t,0,67108864),th(e,67108864)}}var rh=!0;function ih(e,t,n,r){var i=j.T;j.T=null;var s=D.p;try{D.p=2,ah(e,t,n,r)}finally{D.p=s,j.T=i}}function sh(e,t,n,r){var i=j.T;j.T=null;var s=D.p;try{D.p=8,ah(e,t,n,r)}finally{D.p=s,j.T=i}}function ah(e,t,n,r){if(rh){var i=oh(r);if(null===i)qu(e,t,r,lh,n),bh(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return hh=wh(hh,e,t,n,r,i),!0;case"dragenter":return fh=wh(fh,e,t,n,r,i),!0;case"mouseover":return ph=wh(ph,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return mh.set(s,wh(mh.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,gh.set(s,wh(gh.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(bh(e,r),4&t&&-1<vh.indexOf(e)){for(;null!==i;){var s=Be(i);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var a=ve(s.pendingLanes);if(0!==a){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-fe(a);o.entanglements[1]|=l,a&=~l}ku(s),0===(6&rc)&&(kc=te()+500,xu(0,!1))}}break;case 13:null!==(o=Pr(s,2))&&Mc(o,0,2),Bc(),th(s,2)}if(null===(s=oh(r))&&qu(e,t,r,lh,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else qu(e,t,r,null,n)}}function oh(e){return ch(e=Pt(e))}var lh=null;function ch(e){if(lh=null,null!==(e=ze(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return lh=e,null}function uh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case ie:return 8;case se:case ae:return 32;case oe:return 268435456;default:return 32}default:return 32}}var dh=!1,hh=null,fh=null,ph=null,mh=new Map,gh=new Map,yh=[],vh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bh(e,t){switch(e){case"focusin":case"focusout":hh=null;break;case"dragenter":case"dragleave":fh=null;break;case"mouseover":case"mouseout":ph=null;break;case"pointerover":case"pointerout":mh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gh.delete(t.pointerId)}}function wh(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=Be(t))&&nh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Eh(e){var t=ze(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=D.p;try{return D.p=e,t()}finally{D.p=n}}(e.priority,(function(){if(13===n.tag){var e=Dc();e=Ce(e);var t=Pr(n,e);null!==t&&Mc(t,0,e),th(n,e)}}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Sh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=oh(e.nativeEvent);if(null!==n)return null!==(t=Be(n))&&nh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);At=r,n.target.dispatchEvent(r),At=null,t.shift()}return!0}function kh(e,t,n){Sh(e)&&n.delete(t)}function xh(){dh=!1,null!==hh&&Sh(hh)&&(hh=null),null!==fh&&Sh(fh)&&(fh=null),null!==ph&&Sh(ph)&&(ph=null),mh.forEach(kh),gh.forEach(kh)}function _h(e,t){e.blockedOn===t&&(e.blockedOn=null,dh||(dh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,xh)))}var Nh=null;function Th(e){Nh!==e&&(Nh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,(function(){Nh===e&&(Nh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===ch(r||n))continue;break}var s=Be(n);null!==s&&(e.splice(t,3),t-=3,Pa(s,{pending:!0,data:i,method:n.method,action:r},r,i))}})))}function Ch(e){function t(t){return _h(t,e)}null!==hh&&_h(hh,e),null!==fh&&_h(fh,e),null!==ph&&_h(ph,e),mh.forEach(t),gh.forEach(t);for(var n=0;n<yh.length;n++){var r=yh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<yh.length&&null===(n=yh[0]).blockedOn;)Eh(n),null===n.blockedOn&&yh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],a=i[Oe]||null;if("function"===typeof s)a||Th(n);else if(a){var o=null;if(s&&s.hasAttribute("formAction")){if(i=s,a=s[Oe]||null)o=a.formAction;else if(null!==ch(i))continue}else o=a.action;"function"===typeof o?n[r+1]=o:(n.splice(r,3),r-=3),Th(n)}}}function Ih(e){this._internalRoot=e}function Ah(e){this._internalRoot=e}Ah.prototype.render=Ih.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Zd(t.current,Dc(),e,t,null,null)},Ah.prototype.unmount=Ih.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Zd(e.current,2,null,e,null,null),Bc(),t[je]=null}},Ah.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ae();e={blockedOn:null,target:e,priority:t};for(var n=0;n<yh.length&&0!==t&&t<yh[n].priority;n++);yh.splice(n,0,e),0===n&&Eh(e)}};var Ph=i.version;if("19.1.0"!==Ph)throw Error(a(527,Ph,"19.1.0"));D.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return u(i),e;if(s===r)return u(i),t;s=s.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o){for(c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Rh={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.1.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oh.isDisabled&&Oh.supportsFiber)try{ue=Oh.inject(Rh),de=Oh}catch(Dh){}}t.createRoot=function(e,t){if(!o(e))throw Error(a(299));var n=!1,r="",i=bo,s=wo,l=Eo;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Jd(e,1,!1,null,0,n,r,i,s,l,0,null),e[je]=t.current,zu(e),new Ih(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(a(299));var r=!1,i="",s=bo,l=wo,c=Eo,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Jd(e,1,!0,t,0,r,i,s,l,c,0,u)).context=$d(null),n=t.current,(i=is(r=Ce(r=Dc()))).callback=null,ss(n,i,r),n=r,t.current.lanes=n,_e(t,n),ku(t),e[je]=t.current,zu(e),new Ah(t)},t.version="19.1.0"},43:(e,t,n)=>{e.exports=n(288)},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var E=Array.isArray,S={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function x(e,t,r,i,s,a){return r=a.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:a}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var N=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(){}function I(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return I((u=e._init)(e._payload),t,i,s,a)}}if(u)return a=a(e),u=""===s?"."+T(e,0):s,E(a)?(i="",null!=u&&(i=u.replace(N,"$&/")+"/"),I(a,t,i,"",(function(e){return e}))):null!=a&&(_(a)&&(l=a,c=i+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(N,"$&/")+"/")+u,a=x(l.type,c,void 0,0,0,l.props)),t.push(a)),1;u=0;var d,p=""===s?".":s+":";if(E(e))for(var m=0;m<e.length;m++)u+=I(s=e[m],t,i,o=p+T(s,m),a);else if("function"===typeof(m=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=f&&d[f]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(s=e.next()).done;)u+=I(s=s.value,t,i,o=p+T(s,m++),a);else if("object"===o){if("function"===typeof e.then)return I(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(C,C):(e.status="pending",e.then((function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)}),(function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,s,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function A(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function O(){}t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return S.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),i=e.key;if(null!=t)for(s in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!k.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(r[s]=t[s]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var a=Array(s),o=0;o<s;o++)a[o]=arguments[o+2];r.children=a}return x(e.type,i,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var r,i={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)k.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];i.children=o}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===i[r]&&(i[r]=a[r]);return x(e,s,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=S.T,n={};S.T=n;try{var r=e(),i=S.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(O,R)}catch(s){R(s)}finally{S.T=t}},t.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},t.use=function(e){return S.H.use(e)},t.useActionState=function(e,t,n){return S.H.useActionState(e,t,n)},t.useCallback=function(e,t){return S.H.useCallback(e,t)},t.useContext=function(e){return S.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=S.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return S.H.useId()},t.useImperativeHandle=function(e,t,n){return S.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return S.H.useMemo(e,t)},t.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return S.H.useReducer(e,t,n)},t.useRef=function(e){return S.H.useRef(e)},t.useState=function(e){return S.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return S.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return S.H.useTransition()},t.version="19.1.0"},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{e.exports=n(799)},672:(e,t,n)=>{var r=n(43);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var a={d:{f:s,r:function(){throw Error(i(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:s}):"script"===n&&a.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.0"},799:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var s in r={},t)"key"!==s&&(r[s]=t[s]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},853:(e,t,n)=>{e.exports=n(896)},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function E(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function S(e){if(g=!1,E(e),!m)if(null!==r(c))m=!0,x||(x=!0,k());else{var t=r(u);null!==t&&R(S,t.startTime-e)}}var k,x=!1,_=-1,N=5,T=-1;function C(){return!!y||!(t.unstable_now()-T<N)}function I(){if(y=!1,x){var e=t.unstable_now();T=e;var n=!0;try{e:{m=!1,g&&(g=!1,b(_),_=-1),p=!0;var s=f;try{t:{for(E(e),h=r(c);null!==h&&!(h.expirationTime>e&&C());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,E(e),n=!0;break t}h===r(c)&&i(c),E(e)}else i(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&R(S,l.startTime-e),n=!1}}break e}finally{h=null,f=s,p=!1}n=void 0}}finally{n?k():x=!1}}}if("function"===typeof w)k=function(){w(I)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,P=A.port2;A.port1.onmessage=I,k=function(){P.postMessage(null)}}else k=function(){v(I,0)};function R(e,n){_=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(b(_),_=-1):g=!0,R(S,s-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,x||(x=!0,k()))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};n.r(r),n.d(r,{hasBrowserEnv:()=>Qm,hasStandardBrowserEnv:()=>Xm,hasStandardBrowserWebWorkerEnv:()=>Jm,navigator:()=>Ym,origin:()=>$m});var i=n(43),s=n(391);const a=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(a(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==o)throw new l;const c=t<<2|s>>4;if(r.push(c),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class l extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const c=function(e){return function(e){const t=a(e);return o.encodeByteArray(t,!0)}(e).replace(/\./g,"")},u=function(e){try{return o.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function d(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const h=()=>{try{return d().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/FarmConnect",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyArdP66Q6faUUPJkkjRk5S5dsuXo0xQ2V8",REACT_APP_FIREBASE_APP_ID:"1:518838142278:web:213f441f3ec788cde3d147",REACT_APP_FIREBASE_AUTH_DOMAIN:"farmer-marketplace-6a998.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"518838142278",REACT_APP_FIREBASE_PROJECT_ID:"farmer-marketplace-6a998",REACT_APP_FIREBASE_STORAGE_BUCKET:"farmer-marketplace-6a998.firebasestorage.app"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&u(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},f=e=>{var t,n;return null===(n=null===(t=h())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},p=()=>{var e;return null===(e=h())||void 0===e?void 0:e.config},m=e=>{var t;return null===(t=h())||void 0===t?void 0:t["_".concat(e)]};class g{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function y(e){return e.endsWith(".cloudworkstations.dev")}async function v(e){return(await fetch(e,{credentials:"include"})).ok}const b={};let w=!1;function E(e,t){if("undefined"===typeof window||"undefined"===typeof document||!y(window.location.host)||b[e]===t||b[e]||w)return;function n(e){return"__firebase__banner__".concat(e)}b[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(b))b[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{w=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}i?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function S(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function k(){var e;const t=null===(e=h())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function x(){return!k()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _(){try{return"object"===typeof indexedDB}catch(e){return!1}}class N extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,N.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,T.prototype.create)}}class T{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(C,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new N(n,s,t)}}const C=/\{\$([^}]+)}/g;function I(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(A(n)&&A(s)){if(!I(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function A(e){return null!==e&&"object"===typeof e}function P(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function R(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function O(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class j{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=D),void 0===r.error&&(r.error=D),void 0===r.complete&&(r.complete=D);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function D(){}function L(e){return e&&e._delegate?e._delegate:e}class M{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const F="[DEFAULT]";class U{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new g;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:F})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===F?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;return this.component?this.component.multipleInstances?e:F:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class V{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new U(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const z=[];var B;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(B||(B={}));const q={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},H=B.INFO,W={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},K=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=W[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class G{constructor(e){this.name=e,this._logLevel=H,this._logHandler=K,this._userLogHandler=null,z.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in B))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?q[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...t),this._logHandler(this,B.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...t),this._logHandler(this,B.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,B.INFO,...t),this._logHandler(this,B.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,B.WARN,...t),this._logHandler(this,B.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,B.ERROR,...t),this._logHandler(this,B.ERROR,...t)}}function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function Y(e){var t=function(e,t){if("object"!=Q(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Q(t)?t:t+""}function X(e,t,n){return(t=Y(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){X(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let Z,ee;const te=new WeakMap,ne=new WeakMap,re=new WeakMap,ie=new WeakMap,se=new WeakMap;let ae={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ne.get(e);if("objectStoreNames"===t)return e.objectStoreNames||re.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ce(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function oe(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ee||(ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ue(this),n),ce(te.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ce(e.apply(ue(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(ue(this),t,...r);return re.set(s,t.sort?t.sort():[t]),ce(s)}}function le(e){return"function"===typeof e?oe(e):(e instanceof IDBTransaction&&function(e){if(ne.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));ne.set(e,t)}(e),t=e,(Z||(Z=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,ae):e);var t}function ce(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(ce(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&te.set(t,e)})).catch((()=>{})),se.set(t,e),t}(e);if(ie.has(e))return ie.get(e);const t=le(e);return t!==e&&(ie.set(e,t),se.set(t,e)),t}const ue=e=>se.get(e);const de=["get","getKey","getAll","getAllKeys","count"],he=["put","add","delete","clear"],fe=new Map;function pe(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(fe.get(t))return fe.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=he.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!de.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return fe.set(t,s),s}ae=(e=>$($({},e),{},{get:(t,n,r)=>pe(t,n)||e.get(t,n,r),has:(t,n)=>!!pe(t,n)||e.has(t,n)}))(ae);class me{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const ge="@firebase/app",ye="0.13.0",ve=new G("@firebase/app"),be="@firebase/app-compat",we="@firebase/analytics-compat",Ee="@firebase/analytics",Se="@firebase/app-check-compat",ke="@firebase/app-check",xe="@firebase/auth",_e="@firebase/auth-compat",Ne="@firebase/database",Te="@firebase/data-connect",Ce="@firebase/database-compat",Ie="@firebase/functions",Ae="@firebase/functions-compat",Pe="@firebase/installations",Re="@firebase/installations-compat",Oe="@firebase/messaging",je="@firebase/messaging-compat",De="@firebase/performance",Le="@firebase/performance-compat",Me="@firebase/remote-config",Fe="@firebase/remote-config-compat",Ue="@firebase/storage",Ve="@firebase/storage-compat",ze="@firebase/firestore",Be="@firebase/ai",qe="@firebase/firestore-compat",He="firebase",We="[DEFAULT]",Ke={[ge]:"fire-core",[be]:"fire-core-compat",[Ee]:"fire-analytics",[we]:"fire-analytics-compat",[ke]:"fire-app-check",[Se]:"fire-app-check-compat",[xe]:"fire-auth",[_e]:"fire-auth-compat",[Ne]:"fire-rtdb",[Te]:"fire-data-connect",[Ce]:"fire-rtdb-compat",[Ie]:"fire-fn",[Ae]:"fire-fn-compat",[Pe]:"fire-iid",[Re]:"fire-iid-compat",[Oe]:"fire-fcm",[je]:"fire-fcm-compat",[De]:"fire-perf",[Le]:"fire-perf-compat",[Me]:"fire-rc",[Fe]:"fire-rc-compat",[Ue]:"fire-gcs",[Ve]:"fire-gcs-compat",[ze]:"fire-fst",[qe]:"fire-fst-compat",[Be]:"fire-vertex","fire-js":"fire-js",[He]:"fire-js-all"},Ge=new Map,Qe=new Map,Ye=new Map;function Xe(e,t){try{e.container.addComponent(t)}catch(n){ve.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Je(e){const t=e.name;if(Ye.has(t))return ve.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ye.set(t,e);for(const n of Ge.values())Xe(n,e);for(const n of Qe.values())Xe(n,e);return!0}function $e(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ze(e){return null!==e&&void 0!==e&&void 0!==e.settings}const et=new T("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class tt{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new M("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw et.create("app-deleted",{appName:this._name})}}const nt="11.8.0";function rt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:We,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw et.create("bad-app-name",{appName:String(i)});if(n||(n=p()),!n)throw et.create("no-options");const s=Ge.get(i);if(s){if(I(n,s.options)&&I(r,s.config))return s;throw et.create("duplicate-app",{appName:i})}const a=new V(i);for(const l of Ye.values())a.addComponent(l);const o=new tt(n,r,a);return Ge.set(i,o),o}function it(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We;const t=Ge.get(e);if(!t&&e===We&&p())return rt();if(!t)throw et.create("no-app",{appName:e});return t}function st(e,t,n){var r;let i=null!==(r=Ke[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ve.warn(e.join(" "))}Je(new M("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}const at="firebase-heartbeat-store";let ot=null;function lt(){return ot||(ot=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=ce(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(ce(a.result),e.oldVersion,e.newVersion,ce(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(at)}catch(n){console.warn(n)}}}).catch((e=>{throw et.create("idb-open",{originalErrorMessage:e.message})}))),ot}async function ct(e,t){try{const n=(await lt()).transaction(at,"readwrite"),r=n.objectStore(at);await r.put(t,ut(e)),await n.done}catch(n){if(n instanceof N)ve.warn(n.message);else{const e=et.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});ve.warn(e.message)}}}function ut(e){return"".concat(e.name,"!").concat(e.options.appId)}class dt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ft(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ht();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){ve.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ht(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),pt(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),pt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=c(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return ve.warn(t),""}}}function ht(){return(new Date).toISOString().substring(0,10)}class ft{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!_()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await lt()).transaction(at),n=await t.objectStore(at).get(ut(e));return await t.done,n}catch(t){if(t instanceof N)ve.warn(t.message);else{const e=et.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});ve.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ct(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ct(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function pt(e){return c(JSON.stringify({version:2,heartbeats:e})).length}var mt;mt="",Je(new M("platform-logger",(e=>new me(e)),"PRIVATE")),Je(new M("heartbeat",(e=>new dt(e)),"PRIVATE")),st(ge,ye,mt),st(ge,ye,"esm2017"),st("fire-js","");function gt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function yt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vt=yt,bt=new T("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),wt=new G("@firebase/auth");function Et(e){if(wt.logLevel<=B.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];wt.error("Auth (".concat(nt,"): ").concat(e),...n)}}function St(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Tt(e,...n)}function kt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Tt(e,...n)}function xt(e,t,n){const r=Object.assign(Object.assign({},vt()),{[t]:n});return new T("auth","Firebase",r).create(t,{appName:e.name})}function _t(e){return xt(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Nt(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&St(e,"argument-error"),xt(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Tt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return bt.create(e,...n)}function Ct(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Tt(t,...r)}}function It(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Et(t),new Error(t)}function At(e,t){e||It(t)}function Pt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Rt(){return"http:"===Ot()||"https:"===Ot()}function Ot(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function jt(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Rt()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Dt{constructor(e,t){this.shortDelay=e,this.longDelay=t,At(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(S())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return jt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Lt(e,t){At(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Mt{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void It("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void It("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void It("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ft={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ut=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Vt=new Dt(3e4,6e4);function zt(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Bt(e,t,n,r){return qt(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const a=P(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&y(e.emulatorConfig.host)&&(l.credentials="include"),Mt.fetch()(await Wt(e,e.config.apiHost,n,a),l)}))}async function qt(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Ft),t);try{const t=new Gt(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Qt(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Qt(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Qt(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Qt(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw xt(e,o,a);St(e,o)}}catch(i){if(i instanceof N)throw i;St(e,"network-request-failed",{message:String(i)})}}async function Ht(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Bt(e,t,n,r,i);return"mfaPendingCredential"in s&&St(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function Wt(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),s=e,a=s.config.emulator?Lt(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(Ut.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(a).toString()}return a}function Kt(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Gt{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(kt(this.auth,"network-request-failed"))),Vt.get())}))}}function Qt(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=kt(e,t,r);return i.customData._tokenResponse=n,i}function Yt(e){return void 0!==e&&void 0!==e.enterprise}class Xt{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Kt(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Jt(e,t){return Bt(e,"GET","/v2/recaptchaConfig",zt(e,t))}async function $t(e,t){return Bt(e,"POST","/v1/accounts:lookup",t)}function Zt(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function en(e){return 1e3*Number(e)}function tn(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Et("JWT malformed, contained fewer than 3 sections"),null;try{const e=u(n);return e?JSON.parse(e):(Et("Failed to decode base64 JWT payload"),null)}catch(i){return Et("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function nn(e){const t=tn(e);return Ct(t,"internal-error"),Ct("undefined"!==typeof t.exp,"internal-error"),Ct("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function rn(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof N&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class sn{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class an{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zt(this.lastLoginAt),this.creationTime=Zt(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function on(e){var t;const n=e.auth,r=await e.getIdToken(),i=await rn(e,$t(n,{idToken:r}));Ct(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?ln(s.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null===o||void 0===o?void 0:o.length),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new an(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function ln(e){return e.map((e=>{var{providerId:t}=e,n=gt(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class cn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ct(e.idToken,"internal-error"),Ct("undefined"!==typeof e.idToken,"internal-error"),Ct("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):nn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ct(0!==e.length,"internal-error");const t=nn(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Ct(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await qt(e,{},(async()=>{const n=P({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await Wt(e,r,"/v1/token","key=".concat(i)),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Mt.fetch()(s,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new cn;return n&&(Ct("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Ct("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Ct("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cn,this.toJSON())}_performRefresh(){return It("not implemented")}}function un(e,t){Ct("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class dn{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=gt(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new an(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await rn(this,this.stsTokenManager.getToken(this.auth,e));return Ct(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=L(e),r=await n.getIdToken(t),i=tn(r);Ct(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,a=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Zt(en(i.auth_time)),issuedAtTime:Zt(en(i.iat)),expirationTime:Zt(en(i.exp)),signInProvider:a||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=L(e);await on(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Ct(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new dn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ct(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await on(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ze(this.auth.app))return Promise.reject(_t(this.auth));const e=await this.getIdToken();return await rn(this,async function(e,t){return Bt(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:E,stsTokenManager:S}=t;Ct(v&&S,e,"internal-error");const k=cn.fromJSON(this.name,S);Ct("string"===typeof v,e,"internal-error"),un(u,e.name),un(d,e.name),Ct("boolean"===typeof b,e,"internal-error"),Ct("boolean"===typeof w,e,"internal-error"),un(h,e.name),un(f,e.name),un(p,e.name),un(m,e.name),un(g,e.name),un(y,e.name);const x=new dn({uid:v,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:k,createdAt:g,lastLoginAt:y});return E&&Array.isArray(E)&&(x.providerData=E.map((e=>Object.assign({},e)))),m&&(x._redirectEventId=m),x}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new cn;r.updateFromServerResponse(t);const i=new dn({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await on(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Ct(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?ln(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),a=new cn;a.updateFromIdToken(n);const o=new dn({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new an(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(o,l),o}}const hn=new Map;function fn(e){At(e instanceof Function,"Expected a class definition");let t=hn.get(e);return t?(At(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,hn.set(e,t),t)}class pn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}pn.type="NONE";const mn=pn;function gn(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class yn{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=gn(this.userKey,r.apiKey,i),this.fullPersistenceKey=gn("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await $t(this.auth,{idToken:e}).catch((()=>{}));return t?dn._fromGetAccountInfoResponse(this.auth,t,e):null}return dn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new yn(fn(mn),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||fn(mn);const s=gn(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(s);if(t){let n;if("string"===typeof t){const r=await $t(e,{idToken:t}).catch((()=>{}));if(!r)break;n=await dn._fromGetAccountInfoResponse(e,r,t)}else n=dn._fromJSON(e,t);c!==i&&(a=n),i=c;break}}catch(l){}const o=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new yn(i,e,n)):new yn(i,e,n)}}function vn(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Sn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(bn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(xn(t))return"Blackberry";if(_n(t))return"Webos";if(wn(t))return"Safari";if((t.includes("chrome/")||En(t))&&!t.includes("edge/"))return"Chrome";if(kn(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function bn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S();return/firefox\//i.test(e)}function wn(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:S()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function En(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S();return/crios\//i.test(e)}function Sn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S();return/iemobile/i.test(e)}function kn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S();return/android/i.test(e)}function xn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S();return/blackberry/i.test(e)}function _n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S();return/webos/i.test(e)}function Nn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Tn(){return function(){const e=S();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Cn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S();return Nn(e)||kn(e)||_n(e)||xn(e)||/windows phone/i.test(e)||Sn(e)}function In(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=vn(S());break;case"Worker":t="".concat(vn(S()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(nt,"/").concat(r)}class An{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class Pn{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Rn{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jn(this),this.idTokenSubscription=new jn(this),this.beforeStateQueue=new An(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise((e=>this._resolvePersistenceManagerAvailable=e))}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=fn(t)),this._initializationPromise=this.queue((async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await yn.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await $t(this,{idToken:e}),n=await dn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ze(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==s||!(null===a||void 0===a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ct(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await on(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ze(this.app))return Promise.reject(_t(this));const t=e?L(e):null;return t&&Ct(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Ct(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return Ze(this.app)?Promise.reject(_t(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ze(this.app)?Promise.reject(_t(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(fn(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Bt(e,"GET","/v2/passwordPolicy",zt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Pn(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new T("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Bt(e,"POST","/v2/accounts:revokeToken",zt(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&fn(e)||this._popupRedirectResolver;Ct(t,this,"argument-error"),this.redirectPersistenceManager=await yn.create(this,[fn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ct(a,this,"internal-error"),a.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ct(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=In(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(Ze(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(wt.logLevel<=B.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];wt.warn("Auth (".concat(nt,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function On(e){return L(e)}class jn{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new j(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return Ct(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Dn={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ln(e){return Dn.loadJS(e)}function Mn(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Fn{constructor(){this.enterprise=new Un}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Un{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Vn="NO_RECAPTCHA";class zn{constructor(e){this.type="recaptcha-enterprise",this.auth=On(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Yt(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n(Vn)}))})):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Fn).execute("siteKey",{action:"verify"})}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Jt(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Xt(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Yt(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Dn.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Ln(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Bn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new zn(e);let a;if(i)a=Vn;else try{a=await s.verify(n)}catch(l){a=await s.verify(n,!0)}const o=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function qn(e,t,n,r,i){var s,a;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Bn(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Bn(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}if("PHONE_PROVIDER"===i){if(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.isProviderEnabled("PHONE_PROVIDER")){const i=await Bn(e,t,n);return r(e,i).catch((async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await Bn(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)}))}{const i=await Bn(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function Hn(e){const t=On(e),n=await Jt(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Xt(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new zn(t).verify()}}function Wn(e,t,n){const r=On(e);Ct(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Kn(t),{host:a,port:o}=function(e){const t=Kn(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Gn(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Gn(t)}}}(t),l=null===o?"":":".concat(o),c={url:"".concat(s,"//").concat(a).concat(l,"/")},u=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return Ct(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Ct(I(c,r.config.emulator)&&I(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,y(a)?(v("".concat(s,"//").concat(a).concat(l)),E("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Kn(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Gn(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Qn{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return It("not implemented")}_getIdTokenResponse(e){return It("not implemented")}_linkToIdToken(e,t){return It("not implemented")}_getReauthenticationResolver(e){return It("not implemented")}}async function Yn(e,t){return Bt(e,"POST","/v1/accounts:signUp",t)}async function Xn(e,t){return Ht(e,"POST","/v1/accounts:signInWithPassword",zt(e,t))}class Jn extends Qn{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Jn(e,t,"password")}static _fromEmailAndCode(e,t){return new Jn(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return qn(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Xn,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Ht(e,"POST","/v1/accounts:signInWithEmailLink",zt(e,t))}(e,{email:this._email,oobCode:this._password});default:St(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return qn(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Yn,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Ht(e,"POST","/v1/accounts:signInWithEmailLink",zt(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:St(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function $n(e,t){return Ht(e,"POST","/v1/accounts:signInWithIdp",zt(e,t))}class Zn extends Qn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Zn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):St("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=gt(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Zn(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return $n(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,$n(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,$n(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=P(t)}return e}}async function er(e,t){return Bt(e,"POST","/v1/accounts:sendVerificationCode",zt(e,t))}const tr={USER_NOT_FOUND:"user-not-found"};class nr extends Qn{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new nr({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new nr({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Ht(e,"POST","/v1/accounts:signInWithPhoneNumber",zt(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Ht(e,"POST","/v1/accounts:signInWithPhoneNumber",zt(e,t));if(n.temporaryProof)throw Qt(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Ht(e,"POST","/v1/accounts:signInWithPhoneNumber",zt(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),tr)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new nr({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class rr{constructor(e){var t,n,r,i,s,a;const o=R(O(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);Ct(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=o.lang)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=R(O(e)).link,n=t?R(O(t)).deep_link_id:null,r=R(O(e)).deep_link_id;return(r?R(O(r)).link:null)||r||n||t||e}(e);try{return new rr(t)}catch(n){return null}}}class ir{constructor(){this.providerId=ir.PROVIDER_ID}static credential(e,t){return Jn._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=rr.parseLink(t);return Ct(n,"argument-error"),Jn._fromEmailAndCode(e,n.code,n.tenantId)}}ir.PROVIDER_ID="password",ir.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ir.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class sr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ar extends sr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class or extends ar{constructor(){super("facebook.com")}static credential(e){return Zn._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return or.credential(t.oauthAccessToken)}catch(n){return null}}}or.FACEBOOK_SIGN_IN_METHOD="facebook.com",or.PROVIDER_ID="facebook.com";class lr extends ar{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Zn._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return lr.credential(n,r)}catch(i){return null}}}lr.GOOGLE_SIGN_IN_METHOD="google.com",lr.PROVIDER_ID="google.com";class cr extends ar{constructor(){super("github.com")}static credential(e){return Zn._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return cr.credential(t.oauthAccessToken)}catch(n){return null}}}cr.GITHUB_SIGN_IN_METHOD="github.com",cr.PROVIDER_ID="github.com";class ur extends ar{constructor(){super("twitter.com")}static credential(e,t){return Zn._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return ur.credential(n,r)}catch(i){return null}}}async function dr(e,t){return Ht(e,"POST","/v1/accounts:signUp",zt(e,t))}ur.TWITTER_SIGN_IN_METHOD="twitter.com",ur.PROVIDER_ID="twitter.com";class hr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await dn._fromIdTokenResponse(e,n,r),s=fr(n);return new hr({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=fr(n);return new hr({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function fr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class pr extends N{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,pr.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new pr(e,t,n,r)}}function mr(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw pr._fromErrorAndOperation(e,n,t,r);throw n}))}async function gr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await rn(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return hr._forOperation(e,"link",r)}async function yr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Ze(r.app))return Promise.reject(_t(r));const i="reauthenticate";try{const s=await rn(e,mr(r,i,t,e),n);Ct(s.idToken,r,"internal-error");const a=tn(s.idToken);Ct(a,r,"internal-error");const{sub:o}=a;return Ct(e.uid===o,r,"user-mismatch"),hr._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&St(r,"user-mismatch"),s}}async function vr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ze(e.app))return Promise.reject(_t(e));const r="signIn",i=await mr(e,r,t),s=await hr._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function br(e,t){return vr(On(e),t)}async function wr(e){const t=On(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Er(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await rn(e,async function(e,t){return Bt(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}function Sr(e,t){return Bt(e,"POST","/v2/accounts/mfaEnrollment:start",zt(e,t))}new WeakMap;const kr="__sak";class xr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(kr,"1"),this.storage.removeItem(kr),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class _r extends xr{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Cn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Tn()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}_r.type="LOCAL";const Nr=_r;function Tr(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(n=null===(t=document.cookie.match(i))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function Cr(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class Ir{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Cr(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Tr(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Cr(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch((()=>{}))}_addListener(e,t){if(!this._isAvailable())return;const n=Cr(e);if(window.cookieStore){const e=e=>{const r=e.changed.find((e=>e.name===n));r&&t(r.value);e.deleted.find((e=>e.name===n))&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Tr(n);const i=setInterval((()=>{const e=Tr(n);e!==r&&(t(e),r=e)}),1e3);this.listenerUnsubscribes.set(t,(()=>clearInterval(i)))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Ir.type="COOKIE";class Ar extends xr{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ar.type="SESSION";const Pr=Ar;class Rr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Rr(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map((async e=>e(t.origin,i))),o=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Or(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Rr.receivers=[];class jr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((a,o)=>{const l=Or("",20);r.port1.start();const c=setTimeout((()=>{o(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Dr(){return window}function Lr(){return"undefined"!==typeof Dr().WorkerGlobalScope&&"function"===typeof Dr().importScripts}const Mr="firebaseLocalStorageDb",Fr="firebaseLocalStorage",Ur="fbase_key";class Vr{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function zr(e,t){return e.transaction([Fr],t?"readwrite":"readonly").objectStore(Fr)}function Br(){const e=indexedDB.open(Mr,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Fr,{keyPath:Ur})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Fr)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Mr);return new Vr(e).toPromise()}(),t(await Br()))}))}))}async function qr(e,t,n){const r=zr(e,!0).put({[Ur]:t,value:n});return new Vr(r).toPromise()}function Hr(e,t){const n=zr(e,!0).delete(t);return new Vr(n).toPromise()}class Wr{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Br()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Lr()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rr._getInstance(Lr()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new jr(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Br();return await qr(e,kr,"1"),await Hr(e,kr),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>qr(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=zr(e,!1).get(t),r=await new Vr(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Hr(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=zr(e,!1).getAll();return new Vr(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Wr.type="LOCAL";const Kr=Wr;function Gr(e,t){return Bt(e,"POST","/v2/accounts/mfaSignIn:start",zt(e,t))}Mn("rcb"),new Dt(3e4,6e4);const Qr="recaptcha";async function Yr(e,t,n){var r;if(!e._getRecaptchaConfig())try{await Hn(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Ct("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=qn(e,r,"mfaSmsEnrollment",(async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Vn){Ct((null===n||void 0===n?void 0:n.type)===Qr,e,"argument-error");return Sr(e,await Xr(e,t,n))}return Sr(e,t)}),"PHONE_PROVIDER");return(await s.catch((e=>Promise.reject(e)))).phoneSessionInfo.sessionInfo}{Ct("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Ct(s,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=qn(e,a,"mfaSmsSignIn",(async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Vn){Ct((null===n||void 0===n?void 0:n.type)===Qr,e,"argument-error");return Gr(e,await Xr(e,t,n))}return Gr(e,t)}),"PHONE_PROVIDER");return(await o.catch((e=>Promise.reject(e)))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=qn(e,t,"sendVerificationCode",(async(e,t)=>{if(t.captchaResponse===Vn){Ct((null===n||void 0===n?void 0:n.type)===Qr,e,"argument-error");return er(e,await Xr(e,t,n))}return er(e,t)}),"PHONE_PROVIDER");return(await r.catch((e=>Promise.reject(e)))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Xr(e,t,n){Ct(n.type===Qr,e,"argument-error");const r=await n.verify();Ct("string"===typeof r,e,"argument-error");const i=Object.assign({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class Jr{constructor(e){this.providerId=Jr.PROVIDER_ID,this.auth=On(e)}verifyPhoneNumber(e,t){return Yr(this.auth,e,L(t))}static credential(e,t){return nr._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Jr.credentialFromTaggedObject(t)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?nr._fromTokenResponse(n,r):null}}function $r(e,t){return t?fn(t):(Ct(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Jr.PROVIDER_ID="phone",Jr.PHONE_SIGN_IN_METHOD="phone";class Zr extends Qn{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $n(e,this._buildIdpRequest())}_linkToIdToken(e,t){return $n(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return $n(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ei(e){return vr(e.auth,new Zr(e),e.bypassAuthState)}function ti(e){const{auth:t,user:n}=e;return Ct(n,t,"internal-error"),yr(n,new Zr(e),e.bypassAuthState)}async function ni(e){const{auth:t,user:n}=e;return Ct(n,t,"internal-error"),gr(n,new Zr(e),e.bypassAuthState)}class ri{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ei;case"linkViaPopup":case"linkViaRedirect":return ni;case"reauthViaPopup":case"reauthViaRedirect":return ti;default:St(this.auth,"internal-error")}}resolve(e){At(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){At(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ii=new Dt(2e3,1e4);class si extends ri{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,si.currentPopupAction&&si.currentPopupAction.cancel(),si.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ct(e,this.auth,"internal-error"),e}async onExecution(){At(1===this.filter.length,"Popup operations only handle one event");const e=Or();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(kt(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(kt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,si.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(kt(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,ii.get())};e()}}si.currentPopupAction=null;const ai=new Map;class oi extends ri{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=ai.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=ui(t),r=ci(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}ai.set(this.auth._key(),e)}return this.bypassAuthState||ai.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function li(e,t){ai.set(e._key(),t)}function ci(e){return fn(e._redirectPersistence)}function ui(e){return gn("pendingRedirect",e.config.apiKey,e.name)}async function di(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ze(e.app))return Promise.reject(_t(e));const r=On(e),i=$r(r,t),s=new oi(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class hi{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pi(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!pi(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(kt(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(fi(e))}saveEventToCache(e){this.cachedEventUids.add(fi(e)),this.lastProcessedEventTime=Date.now()}}function fi(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function pi(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const mi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gi=/^https?/;async function yi(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Bt(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(vi(r))return}catch(n){}St(e,"unauthorized-domain")}function vi(e){const t=Pt(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!gi.test(n))return!1;if(mi.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const bi=new Dt(3e4,6e4);function wi(){const e=Dr().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Ei(e){return new Promise(((t,n)=>{var r,i,s;function a(){wi(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{wi(),n(kt(e,"network-request-failed"))},timeout:bi.get()})}if(null===(i=null===(r=Dr().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Dr().gapi)||void 0===s?void 0:s.load)){const t=Mn("iframefcb");return Dr()[t]=()=>{gapi.load?a():n(kt(e,"network-request-failed"))},Ln("".concat(Dn.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}a()}})).catch((e=>{throw Si=null,e}))}let Si=null;const ki=new Dt(5e3,15e3),xi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_i=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ni(e){const t=e.config;Ct(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Lt(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:nt},i=_i.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(P(r).slice(1))}async function Ti(e){const t=await function(e){return Si=Si||Ei(e),Si}(e),n=Dr().gapi;return Ct(n,e,"internal-error"),t.open({where:document.body,url:Ni(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xi,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=kt(e,"network-request-failed"),s=Dr().setTimeout((()=>{r(i)}),ki.get());function a(){Dr().clearTimeout(s),n(t)}t.ping(a).then(a,(()=>{r(i)}))}))))}const Ci={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ii{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Ai(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},Ci),{width:r.toString(),height:i.toString(),top:s,left:a}),c=S().toLowerCase();n&&(o=En(c)?"_blank":n),bn(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return Nn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:S())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new Ii(null);const d=window.open(t||"",o,u);Ct(d,e,"popup-blocked");try{d.focus()}catch(h){}return new Ii(d)}const Pi="__/auth/handler",Ri="emulator/auth/handler",Oi=encodeURIComponent("fac");async function ji(e,t,n,r,i,s){Ct(e.config.authDomain,e,"auth-domain-config-required"),Ct(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:nt,eventId:i};if(t instanceof sr){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof ar){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Oi,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Pi);return Lt(t,Ri)}(e),"?").concat(P(o).slice(1)).concat(c)}const Di="webStorageSupport";const Li=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Pr,this._completeRedirectFn=di,this._overrideRedirectResult=li}async _openPopup(e,t,n,r){var i;At(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Ai(e,await ji(e,t,n,Pt(),r),Or())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Dr().location.href=e}(await ji(e,t,n,Pt(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(At(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await Ti(e),n=new hi(e);return t.register("authEvent",(t=>{Ct(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Di,{type:Di},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Di];void 0!==i&&t(!!i),St(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=yi(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Cn()||wn()||Nn()}};var Mi="@firebase/auth",Fi="1.10.6";class Ui{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ct(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Vi=m("authIdTokenMaxAge")||300;let zi=null;var Bi;Dn={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=kt("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Bi="Browser",Je(new M("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Ct(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:Bi,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:In(Bi)},c=new Rn(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(fn);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Je(new M("auth-internal",(e=>(e=>new Ui(e))(On(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),st(Mi,Fi,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Bi)),st(Mi,Fi,"esm2017");var qi,Hi,Wi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ki={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^n&(i^s))+r[0]+3614090360&4294967295;a=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(a<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(t=n+((a=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=s+((a=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,a=0;a<t;){if(0==s)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(a(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var o=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=a(n)).j(t);d(c)||0<c.l(e);)c=(s=a(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new m(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],a=0;a<i;a++)s[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var a=i+(65535&this.i(s))+(65535&e.i(s)),o=(a>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=o>>>16,a&=65535,o&=65535,n[s]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,p(n,2*i+2*s),n[2*i+2*s+1]+=l*g,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*m,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*m,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Hi=Ki.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),i=o,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=a(Math.pow(n,l)),i=i.j(l).add(a(c))):i=(i=i.j(r)).add(a(c))}return i},qi=Ki.Integer=r}).apply("undefined"!==typeof Wi?Wi:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Gi,Qi,Yi,Xi,Ji,$i,Zi,es,ts="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ns={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof ts&&ts];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in i))break e;i=i[a]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function S(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function k(e){i.setTimeout((()=>{throw e}),0)}function x(){var e=I;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var _=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new N),(e=>e.reset()));class N{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let T,C=!1,I=new class{constructor(){this.h=this.g=null}add(e,t){const n=_.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},A=()=>{const e=i.Promise.resolve(void 0);T=()=>{e.then(P)}};var P=()=>{for(var e;e=x();){try{e.h.call(e.g)}catch(n){k(n)}var t=_;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}C=!1};function R(){this.s=this.s,this.C=this.C}function O(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},O.prototype.h=function(){this.defaultPrevented=!0};var j=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function D(e,t){if(O.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&D.aa.h.call(this)}}d(D,O);var L={2:"touch",3:"pen",4:"mouse"};D.prototype.h=function(){D.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),F=0;function U(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}z.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var a=q(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new U(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),W={};function K(e,t,n,r,i){if(r&&r.once)return Q(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)K(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.K(t,n,a(r)?!!r.capture:!!r,i):G(e,t,n,!1,r,i)}function G(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=a(i)?!!i.capture:!!i,l=Z(e);if(l||(e[H]=l=new z(e)),(n=l.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=$;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)j||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(J(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Q(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.L(t,n,a(r)?!!r.capture:!!r,i):G(e,t,n,!0,r,i)}function Y(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Y(e,t[s],n,r,i);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(s=e.g[t],n,r,i))&&(V(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,r,i)),(n=-1<e?t[e]:null)&&X(n))}function X(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(J(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[H]=null)):V(e)}}}function J(e){return e in W?W[e]:W[e]="on"+e}function $(e,t){if(e.da)e=!0;else{t=new D(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&X(e),e=n.call(r,t)}return e}function Z(e){return(e=e[H])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){R.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new O(t,e);else if(t instanceof O)t.target=t.target||e;else{var i=t;E(t=new O(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];i=ie(a,r,!0,t)&&i}if(i=ie(a=t.g=e,r,!0,t)&&i,i=ie(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(a=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&B(e.i,a),i=!1!==o.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ae(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,ae(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,R),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){R.call(this),this.h=e,this.g={}}d(le,R);var ce=[];function ue(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&X(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=i.JSON.stringify,he=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){O.call(this,"d")}function be(){O.call(this,"c")}d(ve,O),d(be,O);var we={},Ee=null;function Se(){return Ee=Ee||new ne}function ke(e){O.call(this,we.La,e)}function xe(e){const t=Se();re(t,new ke(t))}function _e(e,t){O.call(this,we.STAT_EVENT,e),this.stat=t}function Ne(e){const t=Se();re(t,new _e(t,e))}function Te(e,t){O.call(this,we.Ma,e),this.size=t}function Ce(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ie(){this.g=!0}function Ae(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<i.length;a++)i[a]=""}}}return de(n)}catch(o){return t}}(e,n)+(r?" "+r:"")}))}we.La="serverreachability",d(ke,O),we.STAT_EVENT="statevent",d(_e,O),we.Ma="timingevent",d(Te,O),Ie.prototype.xa=function(){this.g=!1},Ie.prototype.info=function(){};var Pe,Re={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Oe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function je(){}function De(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}d(je,pe),je.prototype.g=function(){return new XMLHttpRequest},je.prototype.i=function(){return{}},Pe=new je;var Me={},Fe={};function Ue(e,t,n){e.L=1,e.v=dt(at(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),qe(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),_t(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Le,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var a=K(n,i[s],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),xe(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var a="",o=s.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function qe(e){e.S=Date.now()+e.I,He(e,e.I)}function He(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ce(c(e.ba,e),t)}function We(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function Ke(e){0==e.j.G||e.J||ln(e.j,e)}function Ge(e){We(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;on(n),Xt(n)}rn(n),Ne(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ce(c(n.Za,n),6e3));if(1>=$e(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&on(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=hn(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(We(o),qe(o)),r.g=a}else nn(r);0<n.i.length&&$t(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Yt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}xe()}catch(u){}}De.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Wt(e)?t.j():this.Y(e)},De.prototype.Y=function(e){try{if(e==this.g)e:{const h=Wt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Kt(this.g)))){this.J||4!=h||7==t||xe(),We(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=Kt(this.g);e="";var s=r.length,a=4==Wt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),Ke(this);var o="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a}))}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ne(12),Ge(this),Ke(this);break e}Ae(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Be(this,o),e==Fe){4==h&&(this.s=4,Ne(14),n=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,Ne(15),Ae(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Ae(this.i,this.l,e,null),Qe(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,Ne(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),sn(d),d.M=!0,Ne(11))}}else Ae(this.i,this.l,o,"[Invalid Chunked Response]"),Ge(this),Ke(this)}else Ae(this.i,this.l,o,null),Qe(this,o);4==h&&Ge(this),this.o&&!this.J&&(4==h?ln(this.j,this):(this.o=!1,qe(this)))}else(function(e){const t={};e=(e.g&&2<=Wt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=S(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Ne(12)):(this.s=0,Ne(13)),Ge(this),Ke(this)}}}catch(h){}},De.prototype.cancel=function(){this.J=!0,Ge(this)},De.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(xe(),Ne(17)),Ge(this),this.s=2,Ke(this)):He(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function Xe(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Je(e){return!!e.h||!!e.g&&e.g.size>=e.j}function $e(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}Xe.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new Et;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,ot(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new Et(null,this.h))}function at(e){return new st(e)}function ot(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof Et?(e.i=t,function(e,t){t&&!e.j&&(St(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(kt(this,t),_t(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,bt)),e.i=new Et(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?vt:yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,wt)),e.join("")};var mt,gt=/[#\/\?@]/g,yt=/[#\?:]/g,vt=/[#\?]/g,bt=/[#\?@]/g,wt=/#/g;function Et(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function St(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function kt(e,t){St(e),t=Nt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function xt(e,t){return St(e),t=Nt(e,t),e.g.has(t)}function _t(e,t,n){kt(e,t),0<n.length&&(e.i=null,e.g.set(Nt(e,t),h(n)),e.h+=n.length)}function Nt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Tt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Ct(){this.g=new fe}function It(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;a(e)&&(i=de(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function At(e){this.l=e.Ub||null,this.j=e.eb||!1}function Pt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Rt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Ot(e){e.readyState=4,e.l=null,e.j=null,e.v=null,jt(e)}function jt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Dt(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Lt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Dt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Mt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=Et.prototype).add=function(e,t){St(this),this.i=null,e=Nt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){St(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){St(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){St(this);let t=[];if("string"===typeof e)xt(this,e)&&(t=t.concat(this.g.get(Nt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return St(this),this.i=null,xt(this,e=Nt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var i=s;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")},d(At,pe),At.prototype.g=function(){return new Pt(this.l,this.j)},At.prototype.i=(mt={},function(){return mt}),d(Pt,ne),(e=Pt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,jt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ot(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,jt(this)),this.g&&(this.readyState=3,jt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ot(this):jt(this),3==this.readyState&&Rt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Ot(this))},e.Qa=function(e){this.g&&(this.response=e,Ot(this))},e.ga=function(){this.g&&Ot(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Pt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Mt,ne);var Ft=/^https?$/i,Ut=["POST","PUT"];function Vt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,zt(e),qt(e)}function zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Wt(e)||2!=e.Z()))if(e.u&&4==Wt(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==Wt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var a=String(e.D).match(it)[1]||null;!a&&i.self&&i.self.location&&(a=i.self.location.protocol.slice(0,-1)),s=!Ft.test(a?a.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<Wt(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",zt(e)}}finally{qt(e)}}}function qt(e,t){if(e.g){Ht(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Ht(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Wt(e){return e.g?e.g.readyState:0}function Kt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Gt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Qt(e){this.Aa=0,this.i=[],this.j=new Ie,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gt("baseRetryDelayMs",5e3,e),this.cb=Gt("retryDelaySeedMs",1e4,e),this.Wa=Gt("forwardChannelMaxRetries",2,e),this.wa=Gt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Xe(e&&e.concurrentRequestLimit),this.Da=new Ct,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Yt(e){if(Jt(e),3==e.G){var t=e.U++,n=at(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new De(e,e.j,t)).L=2,t.v=dt(at(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),qe(t)}dn(e)}function Xt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Jt(e){Xt(e),e.u&&(i.clearTimeout(e.u),e.u=null),on(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function $t(e){if(!Je(e.h)&&!e.s){e.s=!0;var t=e.Ga;T||A(),C||(T(),C=!0),I.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Lt(r,e.m,e.o),n=new De(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ue(n,r,t)}function en(e,t){e.H&&v(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let o=0;o<n;o++){let n=i[o].g;const l=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),a=!1;else try{It(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(a){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;T||A(),C||(T(),C=!0),I.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ce(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function an(e){e.g=new De(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Lt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(at(t)),n.m=null,n.P=!0,Ve(n,e)}function on(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){on(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Se(),new Te(r,n)),$t(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!($e(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ce(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||ot(r,"https"),dt(r),t?function(e,t){const n=new Ie;if(i.Image){const r=new Image;r.onload=u(Tt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Tt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Tt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Tt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ie;const n=new AbortController,r=setTimeout((()=>{n.abort(),Tt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Tt(0,0,!0,t):Tt(0,0,!1,t)})).catch((()=>{clearTimeout(r),Tt(0,0,!1,t)}))}(r.toString(),n)}else Ne(2);e.G=0,e.l&&e.l.sa(t),dn(e),Jt(e)}function dn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function hn(e,t,n){var r=n instanceof st?at(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var a=new st(null);r&&ot(a,r),t&&(a.g=t),s&&lt(a,s),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new At({eb:n})):new Mt(e.pa)).Ha(e.J),t}function pn(){}function mn(){}function gn(e,t){ne.call(this),this.g=new Qt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new bn(this)}function yn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){be.call(this),this.status=1}function bn(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pe.g(),this.v=this.o?me(this.o):me(Pe),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Vt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ut,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ht(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Vt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),qt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qt(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Wt(this)?this.g.status:-1}catch(mt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(mt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Qt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ne(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=hn(this,null,this.W),$t(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new De(this,this.j,e);let s=this.o;if(this.S&&(s?(s=b(s),E(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ut(n=at(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Dt(s)))+"&"+t:this.m&&Lt(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Ue(i,n,null)):Ue(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Je(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,an(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ce(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ne(10),Xt(this),an(this))},e.Za=function(){null!=this.C&&(this.C=null,Xt(this),rn(this),Ne(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ne(2)):(this.j.info("Failed to ping google.com"),Ne(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new gn(e,t)},d(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Yt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&$t(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,gn.aa.N.call(this)},d(yn,ve),d(vn,be),d(bn,pn),bn.prototype.ua=function(){re(this.g,"a")},bn.prototype.ta=function(e){re(this.g,new yn(e))},bn.prototype.sa=function(e){re(this.g,new vn)},bn.prototype.ra=function(){re(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,es=ns.createWebChannelTransport=function(){return new mn},Zi=ns.getStatEventTarget=function(){return Se()},$i=ns.Event=we,Ji=ns.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Re.NO_ERROR=0,Re.TIMEOUT=8,Re.HTTP_ERROR=6,Xi=ns.ErrorCode=Re,Oe.COMPLETE="complete",Yi=ns.EventType=Oe,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Qi=ns.WebChannel=ge,ns.FetchXmlHttpFactory=At,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,Gi=ns.XhrIo=Mt}).apply("undefined"!==typeof ts?ts:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const rs="@firebase/firestore",is="4.7.16";class ss{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ss.UNAUTHENTICATED=new ss(null),ss.GOOGLE_CREDENTIALS=new ss("google-credentials-uid"),ss.FIRST_PARTY=new ss("first-party-uid"),ss.MOCK_USER=new ss("mock-user");let as="11.8.1";const os=new G("@firebase/firestore");function ls(){return os.logLevel}function cs(e){if(os.logLevel<=B.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(hs);os.debug("Firestore (".concat(as,"): ").concat(e),...i)}}function us(e){if(os.logLevel<=B.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(hs);os.error("Firestore (".concat(as,"): ").concat(e),...i)}}function ds(e){if(os.logLevel<=B.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(hs);os.warn("Firestore (".concat(as,"): ").concat(e),...i)}}function hs(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function fs(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,ps(e,r,n)}function ps(e,t,n){let r="FIRESTORE (".concat(as,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw us(r),new Error(r)}function ms(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||ps(t,i,r)}function gs(e,t){return e}const ys={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class vs extends N{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class bs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class ws{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Es{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ss.UNAUTHENTICATED)))}shutdown(){}}class Ss{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ks{constructor(e){this.t=e,this.currentUser=ss.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ms(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new bs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new bs,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},a=e=>{cs("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((e=>a(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(cs("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new bs)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(cs("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(ms("string"==typeof t.accessToken,31837,{l:t}),new ws(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ms(null===e||"string"==typeof e,2055,{h:e}),new ss(e)}}class xs{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=ss.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _s{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new xs(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(ss.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ns{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ts{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ze(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ms(void 0===this.o,3512);const n=e=>{null!=e.error&&cs("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,cs("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{cs("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):cs("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ns(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(ms("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Ns(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Cs(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function Is(){return new TextEncoder}class As{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Cs(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Ps(e,t){return e<t?-1:e>t?1:0}function Rs(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return Ps(r,i);{const s=Is(),a=js(s.encode(Os(e,n)),s.encode(Os(t,n)));return 0!==a?a:Ps(r,i)}}n+=r>65535?2:1}return Ps(e.length,t.length)}function Os(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function js(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Ps(e[n],t[n]);return Ps(e.length,t.length)}function Ds(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}const Ls=-62135596800,Ms=1e6;class Fs{static now(){return Fs.fromMillis(Date.now())}static fromDate(e){return Fs.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Ms);return new Fs(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new vs(ys.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new vs(ys.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ls)throw new vs(ys.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new vs(ys.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ms}_compareTo(e){return this.seconds===e.seconds?Ps(this.nanoseconds,e.nanoseconds):Ps(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Ls;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Us{static fromTimestamp(e){return new Us(e)}static min(){return new Us(new Fs(0,0))}static max(){return new Us(new Fs(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Vs="__name__";class zs{constructor(e,t,n){void 0===t?t=0:t>e.length&&fs(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&fs(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===zs.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zs?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=zs.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Ps(e.length,t.length)}static compareSegments(e,t){const n=zs.isNumericId(e),r=zs.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?zs.extractNumericId(e).compare(zs.extractNumericId(t)):Rs(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qi.fromString(e.substring(4,e.length-2))}}class Bs extends zs{construct(e,t,n){return new Bs(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new vs(ys.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new Bs(e)}static emptyPath(){return new Bs([])}}const qs=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hs extends zs{construct(e,t,n){return new Hs(e,t,n)}static isValidIdentifier(e){return qs.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hs.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Vs}static keyField(){return new Hs([Vs])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new vs(ys.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new vs(ys.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new vs(ys.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new vs(ys.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hs(t)}static emptyPath(){return new Hs([])}}class Ws{constructor(e){this.path=e}static fromPath(e){return new Ws(Bs.fromString(e))}static fromName(e){return new Ws(Bs.fromString(e).popFirst(5))}static empty(){return new Ws(Bs.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Bs.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Bs.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ws(new Bs(e.slice()))}}const Ks=-1;class Gs{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Gs.UNKNOWN_ID=-1;function Qs(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Us.fromTimestamp(1e9===r?new Fs(n+1,0):new Fs(n,r));return new Xs(i,Ws.empty(),t)}function Ys(e){return new Xs(e.readTime,e.key,Ks)}class Xs{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Xs(Us.min(),Ws.empty(),Ks)}static max(){return new Xs(Us.max(),Ws.empty(),Ks)}}function Js(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ws.comparator(e.documentKey,t.documentKey),0!==n?n:Ps(e.largestBatchId,t.largestBatchId))}const $s="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Zs{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ea(e){if(e.code!==ys.FAILED_PRECONDITION||e.message!==$s)throw e;cs("LocalStore","Unexpectedly lost primary lease")}class ta{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&fs(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ta(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ta?t:ta.resolve(t)}catch(e){return ta.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ta.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ta.reject(t)}static resolve(e){return new ta(((t,n)=>{t(e)}))}static reject(e){return new ta(((t,n)=>{n(e)}))}static waitFor(e){return new ta(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=ta.resolve(!1);for(const n of e)t=t.next((e=>e?ta.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new ta(((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next((e=>{s[l]=e,++a,a===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new ta(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function na(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ra(e){return"IndexedDbTransactionError"===e.name}class ia{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ue(e),this.ce=e=>t.writeSequenceNumber(e))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}ia.le=-1;const sa=-1;function aa(e){return null==e}function oa(e){return 0===e&&1/e==-1/0}function la(e){return"number"==typeof e&&Number.isInteger(e)&&!oa(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const ca="\x01";function ua(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=ha(t)),t=da(e.get(n),t);return ha(t)}function da(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case ca:n+="\x01\x11";break;default:n+=t}}return n}function ha(e){return e+ca+"\x01"}const fa="remoteDocuments",pa="owner",ma="mutationQueues",ga="mutations";const ya="documentMutations",va="remoteDocumentsV14",ba="remoteDocumentGlobal",wa="targets",Ea="targetDocuments",Sa="targetGlobal",ka="collectionParents",xa="clientMetadata",_a="bundles",Na="namedQueries",Ta="indexConfiguration",Ca="indexState",Ia="indexEntries",Aa="documentOverlays",Pa="globals",Ra=[ma,ga,ya,fa,wa,pa,Sa,Ea,xa,ba,ka,_a,Na],Oa=[ma,ga,ya,va,wa,pa,Sa,Ea,xa,ba,ka,_a,Na,Aa],ja=Oa,Da=[...ja,Ta,Ca,Ia];function La(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ma(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Fa(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Ua{constructor(e,t){this.comparator=e,this.root=t||za.EMPTY}insert(e,t){return new Ua(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,za.BLACK,null,null))}remove(e){return new Ua(this.comparator,this.root.remove(e,this.comparator).copy(null,null,za.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Va(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Va(this.root,e,this.comparator,!1)}getReverseIterator(){return new Va(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Va(this.root,e,this.comparator,!0)}}class Va{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class za{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:za.RED,this.left=null!=r?r:za.EMPTY,this.right=null!=i?i:za.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new za(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return za.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return za.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,za.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,za.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fs(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fs(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fs(27949);return e+(this.isRed()?0:1)}}za.EMPTY=null,za.RED=!0,za.BLACK=!1,za.EMPTY=new class{constructor(){this.size=0}get key(){throw fs(57766)}get value(){throw fs(16141)}get color(){throw fs(16727)}get left(){throw fs(29726)}get right(){throw fs(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new za(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ba{constructor(e){this.comparator=e,this.data=new Ua(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qa(this.data.getIterator())}getIteratorFrom(e){return new qa(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Ba))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ba(this.comparator);return t.data=e,t}}class qa{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ha{constructor(e){this.fields=e,e.sort(Hs.comparator)}static empty(){return new Ha([])}unionWith(e){let t=new Ba(Hs.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Ha(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ds(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Wa extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ka{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Wa("Invalid base64 string: "+e):e}}(e);return new Ka(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Ka(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ps(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ka.EMPTY_BYTE_STRING=new Ka("");const Ga=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qa(e){if(ms(!!e,39018),"string"==typeof e){let t=0;const n=Ga.exec(e);if(ms(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ya(e.seconds),nanos:Ya(e.nanos)}}function Ya(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Xa(e){return"string"==typeof e?Ka.fromBase64String(e):Ka.fromUint8Array(e)}const Ja="server_timestamp",$a="__type__",Za="__previous_value__",eo="__local_write_time__";function to(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[$a])||void 0===n?void 0:n.stringValue)===Ja}function no(e){const t=e.mapValue.fields[Za];return to(t)?no(t):t}function ro(e){const t=Qa(e.mapValue.fields[eo].timestampValue);return new Fs(t.seconds,t.nanos)}class io{constructor(e,t,n,r,i,s,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const so="(default)";class ao{constructor(e,t){this.projectId=e,this.database=t||so}static empty(){return new ao("","")}get isDefaultDatabase(){return this.database===so}isEqual(e){return e instanceof ao&&e.projectId===this.projectId&&e.database===this.database}}const oo="__type__",lo="__max__",co={mapValue:{fields:{__type__:{stringValue:lo}}}},uo="__vector__",ho="value";function fo(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?to(e)?4:Ao(e)?9007199254740991:Co(e)?10:11:fs(28295,{value:e})}function po(e,t){if(e===t)return!0;const n=fo(e);if(n!==fo(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ro(e).isEqual(ro(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Qa(e.timestampValue),r=Qa(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Xa(e.bytesValue).isEqual(Xa(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ya(e.geoPointValue.latitude)===Ya(t.geoPointValue.latitude)&&Ya(e.geoPointValue.longitude)===Ya(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ya(e.integerValue)===Ya(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Ya(e.doubleValue),r=Ya(t.doubleValue);return n===r?oa(n)===oa(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ds(e.arrayValue.values||[],t.arrayValue.values||[],po);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(La(n)!==La(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!po(n[i],r[i])))return!1;return!0}(e,t);default:return fs(52216,{left:e})}}function mo(e,t){return void 0!==(e.values||[]).find((e=>po(e,t)))}function go(e,t){if(e===t)return 0;const n=fo(e),r=fo(t);if(n!==r)return Ps(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ps(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Ya(e.integerValue||e.doubleValue),r=Ya(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return yo(e.timestampValue,t.timestampValue);case 4:return yo(ro(e),ro(t));case 5:return Rs(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Xa(e),r=Xa(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Ps(n[i],r[i]);if(0!==e)return e}return Ps(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Ps(Ya(e.latitude),Ya(t.latitude));return 0!==n?n:Ps(Ya(e.longitude),Ya(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return vo(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const a=e.fields||{},o=t.fields||{},l=null===(n=a[ho])||void 0===n?void 0:n.arrayValue,c=null===(r=o[ho])||void 0===r?void 0:r.arrayValue,u=Ps((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:vo(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===co.mapValue&&t===co.mapValue)return 0;if(e===co.mapValue)return 1;if(t===co.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=Rs(r[a],s[a]);if(0!==e)return e;const t=go(n[r[a]],i[s[a]]);if(0!==t)return t}return Ps(r.length,s.length)}(e.mapValue,t.mapValue);default:throw fs(23264,{Pe:n})}}function yo(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ps(e,t);const n=Qa(e),r=Qa(t),i=Ps(n.seconds,r.seconds);return 0!==i?i:Ps(n.nanos,r.nanos)}function vo(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=go(n[i],r[i]);if(e)return e}return Ps(n.length,r.length)}function bo(e){return wo(e)}function wo(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Qa(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Xa(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Ws.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=wo(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(wo(e.fields[i]));return n+"}"}(e.mapValue):fs(61005,{value:e})}function Eo(e){switch(fo(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=no(e);return t?16+Eo(t):16;case 5:return 2*e.stringValue.length;case 6:return Xa(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+Eo(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Ma(e.fields,((e,n)=>{t+=e.length+Eo(n)})),t}(e.mapValue);default:throw fs(13486,{value:e})}}function So(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ko(e){return!!e&&"integerValue"in e}function xo(e){return!!e&&"arrayValue"in e}function _o(e){return!!e&&"nullValue"in e}function No(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function To(e){return!!e&&"mapValue"in e}function Co(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[oo])||void 0===n?void 0:n.stringValue)===uo}function Io(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ma(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Io(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Io(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Ao(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===lo}class Po{constructor(e){this.value=e}static empty(){return new Po({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!To(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Io(t)}setAll(e){let t=Hs.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Io(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());To(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return po(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];To(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Ma(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Po(Io(this.value))}}function Ro(e){const t=[];return Ma(e.fields,((e,n)=>{const r=new Hs([e]);if(To(n)){const e=Ro(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Ha(t)}class Oo{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Oo(e,0,Us.min(),Us.min(),Us.min(),Po.empty(),0)}static newFoundDocument(e,t,n,r){return new Oo(e,1,t,Us.min(),n,r,0)}static newNoDocument(e,t){return new Oo(e,2,t,Us.min(),Us.min(),Po.empty(),0)}static newUnknownDocument(e,t){return new Oo(e,3,t,Us.min(),Us.min(),Po.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Us.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Po.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Po.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Us.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Oo&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Oo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class jo{constructor(e,t){this.position=e,this.inclusive=t}}function Do(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?Ws.comparator(Ws.fromName(a.referenceValue),n.key):go(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Lo(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!po(e.position[n],t.position[n]))return!1;return!0}class Mo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Fo(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Uo{}class Vo extends Uo{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Qo(e,t,n):"array-contains"===t?new $o(e,n):"in"===t?new Zo(e,n):"not-in"===t?new el(e,n):"array-contains-any"===t?new tl(e,n):new Vo(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Yo(e,n):new Xo(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(go(t,this.value)):null!==t&&fo(this.value)===fo(t)&&this.matchesComparison(go(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return fs(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zo extends Uo{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new zo(e,t)}matches(e){return Bo(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.Te||(this.Te=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Bo(e){return"and"===e.op}function qo(e){return Ho(e)&&Bo(e)}function Ho(e){for(const t of e.filters)if(t instanceof zo)return!1;return!0}function Wo(e){if(e instanceof Vo)return e.field.canonicalString()+e.op.toString()+bo(e.value);if(qo(e))return e.filters.map((e=>Wo(e))).join(",");{const t=e.filters.map((e=>Wo(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Ko(e,t){return e instanceof Vo?function(e,t){return t instanceof Vo&&e.op===t.op&&e.field.isEqual(t.field)&&po(e.value,t.value)}(e,t):e instanceof zo?function(e,t){return t instanceof zo&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Ko(n,t.filters[r])),!0)}(e,t):void fs(19439)}function Go(e){return e instanceof Vo?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(bo(e.value))}(e):e instanceof zo?function(e){return e.op.toString()+" {"+e.getFilters().map(Go).join(" ,")+"}"}(e):"Filter"}class Qo extends Vo{constructor(e,t,n){super(e,t,n),this.key=Ws.fromName(n.referenceValue)}matches(e){const t=Ws.comparator(e.key,this.key);return this.matchesComparison(t)}}class Yo extends Vo{constructor(e,t){super(e,"in",t),this.keys=Jo("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Xo extends Vo{constructor(e,t){super(e,"not-in",t),this.keys=Jo("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Jo(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Ws.fromName(e.referenceValue)))}class $o extends Vo{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xo(t)&&mo(t.arrayValue,this.value)}}class Zo extends Vo{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&mo(this.value.arrayValue,t)}}class el extends Vo{constructor(e,t){super(e,"not-in",t)}matches(e){if(mo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!mo(this.value.arrayValue,t)}}class tl extends Vo{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xo(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>mo(this.value.arrayValue,e)))}}class nl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.Ie=null}}function rl(e){return new nl(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function il(e){const t=gs(e);if(null===t.Ie){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Wo(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),aa(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>bo(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>bo(e))).join(",")),t.Ie=e}return t.Ie}function sl(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Fo(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Ko(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Lo(e.startAt,t.startAt)&&Lo(e.endAt,t.endAt)}function al(e){return Ws.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class ol{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function ll(e,t,n,r,i,s,a,o){return new ol(e,t,n,r,i,s,a,o)}function cl(e){return new ol(e)}function ul(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function dl(e){return null!==e.collectionGroup}function hl(e){const t=gs(e);if(null===t.Ee){t.Ee=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ee.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Ba(Hs.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ee.push(new Mo(r,n))})),e.has(Hs.keyField().canonicalString())||t.Ee.push(new Mo(Hs.keyField(),n))}return t.Ee}function fl(e){const t=gs(e);return t.de||(t.de=pl(t,hl(e))),t.de}function pl(e,t){if("F"===e.limitType)return rl(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Mo(e.field,t)}));const n=e.endAt?new jo(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new jo(e.startAt.position,e.startAt.inclusive):null;return rl(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ml(e,t){const n=e.filters.concat([t]);return new ol(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function gl(e,t,n){return new ol(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function yl(e,t){return sl(fl(e),fl(t))&&e.limitType===t.limitType}function vl(e){return"".concat(il(fl(e)),"|lt:").concat(e.limitType)}function bl(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Go(e))).join(", "),"]")),aa(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>bo(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>bo(e))).join(",")),"Target(".concat(t,")")}(fl(e)),"; limitType=").concat(e.limitType,")")}function wl(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ws.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of hl(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Do(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,hl(e),t))&&!(e.endAt&&!function(e,t,n){const r=Do(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,hl(e),t))}(e,t)}function El(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Sl(e){return(t,n)=>{let r=!1;for(const i of hl(e)){const e=kl(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function kl(e,t,n){const r=e.field.isKeyField()?Ws.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?go(r,i):fs(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return fs(19790,{direction:e.dir})}}class xl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ma(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Fa(this.inner)}size(){return this.innerSize}}const _l=new Ua(Ws.comparator);function Nl(){return _l}const Tl=new Ua(Ws.comparator);function Cl(){let e=Tl;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Il(e){let t=Tl;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Al(){return Rl()}function Pl(){return Rl()}function Rl(){return new xl((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Ol=new Ua(Ws.comparator),jl=new Ba(Ws.comparator);function Dl(){let e=jl;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Ll=new Ba(Ps);function Ml(){return Ll}function Fl(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oa(t)?"-0":t}}function Ul(e){return{integerValue:""+e}}function Vl(e,t){return la(t)?Ul(t):Fl(e,t)}class zl{constructor(){this._=void 0}}function Bl(e,t,n){return e instanceof Wl?function(e,t){const n={fields:{[$a]:{stringValue:Ja},[eo]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&to(t)&&(t=no(t)),t&&(n.fields[Za]=t),{mapValue:n}}(n,t):e instanceof Kl?Gl(e,t):e instanceof Ql?Yl(e,t):function(e,t){const n=Hl(e,t),r=Jl(n)+Jl(e.Re);return ko(n)&&ko(e.Re)?Ul(r):Fl(e.serializer,r)}(e,t)}function ql(e,t,n){return e instanceof Kl?Gl(e,t):e instanceof Ql?Yl(e,t):n}function Hl(e,t){return e instanceof Xl?function(e){return ko(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Wl extends zl{}class Kl extends zl{constructor(e){super(),this.elements=e}}function Gl(e,t){const n=$l(t);for(const r of e.elements)n.some((e=>po(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Ql extends zl{constructor(e){super(),this.elements=e}}function Yl(e,t){let n=$l(t);for(const r of e.elements)n=n.filter((e=>!po(e,r)));return{arrayValue:{values:n}}}class Xl extends zl{constructor(e,t){super(),this.serializer=e,this.Re=t}}function Jl(e){return Ya(e.integerValue||e.doubleValue)}function $l(e){return xo(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Zl{constructor(e,t){this.version=e,this.transformResults=t}}class ec{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ec}static exists(e){return new ec(void 0,e)}static updateTime(e){return new ec(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class nc{}function rc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new fc(e.key,ec.none()):new lc(e.key,e.data,ec.none());{const n=e.data,r=Po.empty();let i=new Ba(Hs.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new cc(e.key,r,new Ha(i.toArray()),ec.none())}}function ic(e,t,n){e instanceof lc?function(e,t,n){const r=e.value.clone(),i=dc(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof cc?function(e,t,n){if(!tc(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=dc(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(uc(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function sc(e,t,n,r){return e instanceof lc?function(e,t,n,r){if(!tc(e.precondition,t))return n;const i=e.value.clone(),s=hc(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof cc?function(e,t,n,r){if(!tc(e.precondition,t))return n;const i=hc(e.fieldTransforms,r,t),s=t.data;return s.setAll(uc(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return tc(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function ac(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Hl(r.transform,e||null);null!=i&&(null===n&&(n=Po.empty()),n.set(r.field,i))}return n||null}function oc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ds(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Kl&&t instanceof Kl||e instanceof Ql&&t instanceof Ql?Ds(e.elements,t.elements,po):e instanceof Xl&&t instanceof Xl?po(e.Re,t.Re):e instanceof Wl&&t instanceof Wl}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class lc extends nc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class cc extends nc{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function uc(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function dc(e,t,n){const r=new Map;ms(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,ql(a,o,n[i]))}return r}function hc(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Bl(e,s,t))}return r}class fc extends nc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pc extends nc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class mc{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&ic(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=sc(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=sc(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Pl();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=rc(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(Us.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Dl())}isEqual(e){return this.batchId===e.batchId&&Ds(this.mutations,e.mutations,((e,t)=>oc(e,t)))&&Ds(this.baseMutations,e.baseMutations,((e,t)=>oc(e,t)))}}class gc{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){ms(e.mutations.length===n.length,58842,{fe:e.mutations.length,ge:n.length});let r=Ol;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new gc(e,t,n,r)}}class yc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class vc{constructor(e,t){this.count=e,this.unchangedNames=t}}var bc,wc;function Ec(e){switch(e){case ys.OK:return fs(64938);case ys.CANCELLED:case ys.UNKNOWN:case ys.DEADLINE_EXCEEDED:case ys.RESOURCE_EXHAUSTED:case ys.INTERNAL:case ys.UNAVAILABLE:case ys.UNAUTHENTICATED:return!1;case ys.INVALID_ARGUMENT:case ys.NOT_FOUND:case ys.ALREADY_EXISTS:case ys.PERMISSION_DENIED:case ys.FAILED_PRECONDITION:case ys.ABORTED:case ys.OUT_OF_RANGE:case ys.UNIMPLEMENTED:case ys.DATA_LOSS:return!0;default:return fs(15467,{code:e})}}function Sc(e){if(void 0===e)return us("GRPC error has no .code"),ys.UNKNOWN;switch(e){case bc.OK:return ys.OK;case bc.CANCELLED:return ys.CANCELLED;case bc.UNKNOWN:return ys.UNKNOWN;case bc.DEADLINE_EXCEEDED:return ys.DEADLINE_EXCEEDED;case bc.RESOURCE_EXHAUSTED:return ys.RESOURCE_EXHAUSTED;case bc.INTERNAL:return ys.INTERNAL;case bc.UNAVAILABLE:return ys.UNAVAILABLE;case bc.UNAUTHENTICATED:return ys.UNAUTHENTICATED;case bc.INVALID_ARGUMENT:return ys.INVALID_ARGUMENT;case bc.NOT_FOUND:return ys.NOT_FOUND;case bc.ALREADY_EXISTS:return ys.ALREADY_EXISTS;case bc.PERMISSION_DENIED:return ys.PERMISSION_DENIED;case bc.FAILED_PRECONDITION:return ys.FAILED_PRECONDITION;case bc.ABORTED:return ys.ABORTED;case bc.OUT_OF_RANGE:return ys.OUT_OF_RANGE;case bc.UNIMPLEMENTED:return ys.UNIMPLEMENTED;case bc.DATA_LOSS:return ys.DATA_LOSS;default:return fs(39323,{code:e})}}(wc=bc||(bc={}))[wc.OK=0]="OK",wc[wc.CANCELLED=1]="CANCELLED",wc[wc.UNKNOWN=2]="UNKNOWN",wc[wc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wc[wc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wc[wc.NOT_FOUND=5]="NOT_FOUND",wc[wc.ALREADY_EXISTS=6]="ALREADY_EXISTS",wc[wc.PERMISSION_DENIED=7]="PERMISSION_DENIED",wc[wc.UNAUTHENTICATED=16]="UNAUTHENTICATED",wc[wc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wc[wc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wc[wc.ABORTED=10]="ABORTED",wc[wc.OUT_OF_RANGE=11]="OUT_OF_RANGE",wc[wc.UNIMPLEMENTED=12]="UNIMPLEMENTED",wc[wc.INTERNAL=13]="INTERNAL",wc[wc.UNAVAILABLE=14]="UNAVAILABLE",wc[wc.DATA_LOSS=15]="DATA_LOSS";let kc=null;const xc=new qi([4294967295,4294967295],0);function _c(e){const t=Is().encode(e),n=new Hi;return n.update(t),new Uint8Array(n.digest())}function Nc(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new qi([n,r],0),new qi([i,s],0)]}class Tc{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Cc("Invalid padding: ".concat(t));if(n<0)throw new Cc("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Cc("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Cc("Invalid padding when bitmap length is 0: ".concat(t));this.pe=8*e.length-t,this.ye=qi.fromNumber(this.pe)}we(e,t,n){let r=e.add(t.multiply(qi.fromNumber(n)));return 1===r.compare(xc)&&(r=new qi([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.pe)return!1;const t=_c(e),[n,r]=Nc(t);for(let i=0;i<this.hashCount;i++){const e=this.we(n,r,i);if(!this.Se(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Tc(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.pe)return;const t=_c(e),[n,r]=Nc(t);for(let i=0;i<this.hashCount;i++){const e=this.we(n,r,i);this.be(e)}}be(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Cc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ic{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Ac.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Ic(Us.min(),r,new Ua(Ps),Nl(),Dl())}}class Ac{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Ac(n,t,Dl(),Dl(),Dl())}}class Pc{constructor(e,t,n,r){this.De=e,this.removedTargetIds=t,this.key=n,this.ve=r}}class Rc{constructor(e,t){this.targetId=e,this.Ce=t}}class Oc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ka.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class jc{constructor(){this.Fe=0,this.Me=Mc(),this.xe=Ka.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return 0!==this.Fe}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Dl(),t=Dl(),n=Dl();return this.Me.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:fs(38017,{changeType:i})}})),new Ac(this.xe,this.Oe,e,t,n)}Qe(){this.Ne=!1,this.Me=Mc()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ms(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Dc{constructor(e){this.ze=e,this.je=new Map,this.He=Nl(),this.Je=Lc(),this.Ye=Lc(),this.Ze=new Ua(Ps)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,(t=>{const n=this.rt(t);switch(e.state){case 0:this.it(t)&&n.ke(e.resumeToken);break;case 1:n.We(),n.Be||n.Qe(),n.ke(e.resumeToken);break;case 2:n.We(),n.Be||this.removeTarget(t);break;case 3:this.it(t)&&(n.Ge(),n.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),n.ke(e.resumeToken));break;default:fs(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach(((e,n)=>{this.it(n)&&t(n)}))}ot(e){const t=e.targetId,n=e.Ce.count,r=this._t(t);if(r){const i=r.target;if(al(i))if(0===n){const e=new Ws(i.path);this.tt(t,e,Oo.newNoDocument(e,Us.min()))}else ms(1===n,20013,{expectedCount:n});else{const r=this.ut(t);if(r!==n){const n=this.ct(e),i=n?this.lt(n,e,r):1;if(0!==i){this.st(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,e)}null==kc||kc.ht(function(e,t,n,r,i){var s,a,o,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(s=null==h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(o=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.Ce,this.ze.Pt(),n,i))}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,a;try{s=Xa(n).toUint8Array()}catch(e){if(e instanceof Wa)return ds("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new Tc(s,r,i)}catch(e){return ds(e instanceof Cc?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.pe?null:a}lt(e,t,n){return t.Ce.count===n-this.Tt(e,t.targetId)?0:2}Tt(e,t){const n=this.ze.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.ze.Pt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.tt(t,n,null),r++)})),r}It(e){const t=new Map;this.je.forEach(((n,r)=>{const i=this._t(r);if(i){if(n.current&&al(i.target)){const t=new Ws(i.target.path);this.Et(t).has(r)||this.dt(r,t)||this.tt(r,t,Oo.newNoDocument(t,e))}n.Le&&(t.set(r,n.qe()),n.Qe())}}));let n=Dl();this.Ye.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this._t(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.He.forEach(((t,n)=>n.setReadTime(e)));const r=new Ic(e,t,this.Ze,this.He,n);return this.He=Nl(),this.Je=Lc(),this.Ye=Lc(),this.Ze=new Ua(Ps),r}et(e,t){if(!this.it(e))return;const n=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,n),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,n){if(!this.it(e))return;const r=this.rt(e);this.dt(e,t)?r.$e(t,1):r.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),n&&(this.He=this.He.insert(t,n))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new jc,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Ba(Ps),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Ba(Ps),this.Je=this.Je.insert(e,t)),t}it(e){const t=null!==this._t(e);return t||cs("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new jc),this.ze.getRemoteKeysForTarget(e).forEach((t=>{this.tt(e,t,null)}))}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Lc(){return new Ua(Ws.comparator)}function Mc(){return new Ua(Ws.comparator)}const Fc={asc:"ASCENDING",desc:"DESCENDING"},Uc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Vc={and:"AND",or:"OR"};class zc{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Bc(e,t){return e.useProto3Json||aa(t)?t:{value:t}}function qc(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Hc(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Wc(e,t){return qc(e,t.toTimestamp())}function Kc(e){return ms(!!e,49232),Us.fromTimestamp(function(e){const t=Qa(e);return new Fs(t.seconds,t.nanos)}(e))}function Gc(e,t){return Qc(e,t).canonicalString()}function Qc(e,t){const n=function(e){return new Bs(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Yc(e){const t=Bs.fromString(e);return ms(mu(t),10190,{key:t.toString()}),t}function Xc(e,t){return Gc(e.databaseId,t.path)}function Jc(e,t){const n=Yc(t);if(n.get(1)!==e.databaseId.projectId)throw new vs(ys.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new vs(ys.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ws(tu(n))}function $c(e,t){return Gc(e.databaseId,t)}function Zc(e){const t=Yc(e);return 4===t.length?Bs.emptyPath():tu(t)}function eu(e){return new Bs(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function tu(e){return ms(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function nu(e,t,n){return{name:Xc(e,t),fields:n.value.mapValue.fields}}function ru(e,t){let n;if(t instanceof lc)n={update:nu(e,t.key,t.value)};else if(t instanceof fc)n={delete:Xc(e,t.key)};else if(t instanceof cc)n={update:nu(e,t.key,t.data),updateMask:pu(t.fieldMask)};else{if(!(t instanceof pc))return fs(16599,{ft:t.type});n={verify:Xc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Wl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Kl)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ql)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Xl)return{fieldPath:t.field.canonicalString(),increment:n.Re};throw fs(20930,{transform:t.transform})}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Wc(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:fs(27497)}(e,t.precondition)),n}function iu(e,t){return{documents:[$c(e,t.path)]}}function su(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$c(e,i);const s=function(e){if(0!==e.length)return fu(zo.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:du(e.field),direction:lu(e.dir)}}(e)))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Bc(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{gt:n,parent:i}}function au(e){let t=Zc(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ms(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=ou(e);return t instanceof zo&&qo(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map((e=>function(e){return new Mo(hu(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,aa(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new jo(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new jo(n,t)}(n.endAt)),ll(t,i,a,s,o,"F",l,c)}function ou(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=hu(e.unaryFilter.field);return Vo.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=hu(e.unaryFilter.field);return Vo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=hu(e.unaryFilter.field);return Vo.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=hu(e.unaryFilter.field);return Vo.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fs(61313);default:return fs(60726)}}(e):void 0!==e.fieldFilter?function(e){return Vo.create(hu(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fs(58110);default:return fs(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return zo.create(e.compositeFilter.filters.map((e=>ou(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return fs(1026)}}(e.compositeFilter.op))}(e):fs(30097,{filter:e})}function lu(e){return Fc[e]}function cu(e){return Uc[e]}function uu(e){return Vc[e]}function du(e){return{fieldPath:e.canonicalString()}}function hu(e){return Hs.fromServerFormat(e.fieldPath)}function fu(e){return e instanceof Vo?function(e){if("=="===e.op){if(No(e.value))return{unaryFilter:{field:du(e.field),op:"IS_NAN"}};if(_o(e.value))return{unaryFilter:{field:du(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(No(e.value))return{unaryFilter:{field:du(e.field),op:"IS_NOT_NAN"}};if(_o(e.value))return{unaryFilter:{field:du(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:du(e.field),op:cu(e.op),value:e.value}}}(e):e instanceof zo?function(e){const t=e.getFilters().map((e=>fu(e)));return 1===t.length?t[0]:{compositeFilter:{op:uu(e.op),filters:t}}}(e):fs(54877,{filter:e})}function pu(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function mu(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class gu{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Us.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Us.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ka.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new gu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new gu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class yu{constructor(e){this.wt=e}}function vu(e){const t=au({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?gl(t,t.limit,"L"):t}class bu{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(Ya(e.integerValue));else if("doubleValue"in e){const n=Ya(e.doubleValue);isNaN(n)?this.Mt(t,13):(this.Mt(t,15),oa(n)?t.xt(0):t.xt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Mt(t,20),"string"==typeof n&&(n=Qa(n)),t.Ot("".concat(n.seconds||"")),t.xt(n.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(Xa(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Mt(t,45),t.xt(n.latitude||0),t.xt(n.longitude||0)}else"mapValue"in e?Ao(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):Co(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):fs(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const n=e.fields||{};this.Mt(t,55);for(const r of Object.keys(n))this.Nt(r,t),this.Ct(n[r],t)}qt(e,t){var n,r;const i=e.fields||{};this.Mt(t,53);const s=ho,a=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.Mt(t,15),t.xt(Ya(a)),this.Nt(s,t),this.Ct(i[s],t)}$t(e,t){const n=e.values||[];this.Mt(t,50);for(const r of n)this.Ct(r,t)}kt(e,t){this.Mt(t,37),Ws.fromName(e).path.forEach((e=>{this.Mt(t,60),this.Kt(e,t)}))}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}bu.Wt=new bu;class wu{constructor(){this.Cn=new Eu}addToCollectionParentIndex(e,t){return this.Cn.add(t),ta.resolve()}getCollectionParents(e,t){return ta.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ta.resolve()}deleteFieldIndex(e,t){return ta.resolve()}deleteAllFieldIndexes(e){return ta.resolve()}createTargetIndexes(e,t){return ta.resolve()}getDocumentsMatchingTarget(e,t){return ta.resolve(null)}getIndexType(e,t){return ta.resolve(0)}getFieldIndexes(e,t){return ta.resolve([])}getNextCollectionGroupToUpdate(e){return ta.resolve(null)}getMinOffset(e,t){return ta.resolve(Xs.min())}getMinOffsetFromCollectionGroup(e,t){return ta.resolve(Xs.min())}updateCollectionGroup(e,t,n){return ta.resolve()}updateIndexEntries(e,t){return ta.resolve()}}class Eu{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ba(Bs.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ba(Bs.comparator)).toArray()}}new Uint8Array(0);const Su={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ku=41943040;class xu{static withCacheSize(e){return new xu(e,xu.DEFAULT_COLLECTION_PERCENTILE,xu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}xu.DEFAULT_COLLECTION_PERCENTILE=10,xu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xu.DEFAULT=new xu(ku,xu.DEFAULT_COLLECTION_PERCENTILE,xu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xu.DISABLED=new xu(-1,0,0);class _u{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new _u(0)}static lr(){return new _u(-1)}}const Nu="LruGarbageCollector",Tu=1048576;function Cu(e,t){let[n,r]=e,[i,s]=t;const a=Ps(n,i);return 0===a?Ps(r,s):a}class Iu{constructor(e){this.Er=e,this.buffer=new Ba(Cu),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Cu(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Au{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Vr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return null!==this.Vr}mr(e){cs(Nu,"Garbage collection scheduled in ".concat(e,"ms")),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){ra(e)?cs(Nu,"Ignoring IndexedDB error during garbage collection: ",e):await ea(e)}await this.mr(3e5)}))}}class Pu{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return ta.resolve(ia.le);const n=new Iu(t);return this.gr.forEachTarget(e,(e=>n.Rr(e.sequenceNumber))).next((()=>this.gr.yr(e,(e=>n.Rr(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.gr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(cs("LruGarbageCollector","Garbage collection skipped; disabled"),ta.resolve(Su)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(cs("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Su):this.wr(e,t)))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let n,r,i,s,a,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(cs("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,a=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,o=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),ls()<=B.DEBUG&&cs("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(o-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-o)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),ta.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function Ru(e,t){return new Pu(e,t)}class Ou{constructor(){this.changes=new xl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Oo.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ta.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ju{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Du{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&sc(n.mutation,e,Ha.empty(),Fs.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Dl()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Dl();const r=Al();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Cl();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Al();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Dl())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Nl();const s=Rl(),a=Rl();return t.forEach(((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof cc)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),sc(a.mutation,t,a.mutation.getFieldMask(),Fs.now())):s.set(t.key,Ha.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return a.set(e,new ju(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),a)))}recalculateAndSaveOverlays(e,t){const n=Rl();let r=new Ua(((e,t)=>e-t)),i=Dl();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||Ha.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||Dl()).add(e);r=r.insert(i.batchId,o)}))})).next((()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=Pl();l.forEach((e=>{if(!i.has(e)){const r=rc(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return ta.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Ws.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):dl(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):ta.resolve(Al());let a=Ks,o=i;return s.next((t=>ta.forEach(t,((t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?ta.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{o=o.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,o,t,Dl()))).next((e=>({batchId:a,changes:Il(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ws(t)).next((e=>{let t=Cl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Cl();return this.indexManager.getCollectionParents(e,i).next((a=>ta.forEach(a,(a=>{const o=function(e,t){return new ol(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Oo.newInvalidDocument(r)))}));let n=Cl();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&sc(s.mutation,r,Ha.empty(),Fs.now()),wl(t,r)&&(n=n.insert(e,r))})),n}))}}class Lu{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return ta.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Kc(e.createTime)}}(t)),ta.resolve()}getNamedQuery(e,t){return ta.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(e){return{name:e.name,query:vu(e.bundledQuery),readTime:Kc(e.readTime)}}(t)),ta.resolve()}}class Mu{constructor(){this.overlays=new Ua(Ws.comparator),this.Qr=new Map}getOverlay(e,t){return ta.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Al();return ta.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.bt(e,t,r)})),ta.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Qr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Qr.delete(n)),ta.resolve()}getOverlaysForCollection(e,t,n){const r=Al(),i=t.length+1,s=new Ws(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return ta.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Ua(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Al(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=Al(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach(((e,t)=>a.set(e,t))),!(a.size()>=r)););return ta.resolve(a)}bt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Qr.get(r.largestBatchId).delete(n.key);this.Qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new yc(t,n));let i=this.Qr.get(t);void 0===i&&(i=Dl(),this.Qr.set(t,i)),this.Qr.set(t,i.add(n.key))}}class Fu{constructor(){this.sessionToken=Ka.EMPTY_BYTE_STRING}getSessionToken(e){return ta.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ta.resolve()}}class Uu{constructor(){this.$r=new Ba(Vu.Ur),this.Kr=new Ba(Vu.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const n=new Vu(e,t);this.$r=this.$r.add(n),this.Kr=this.Kr.add(n)}Gr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.zr(new Vu(e,t))}jr(e,t){e.forEach((e=>this.removeReference(e,t)))}Hr(e){const t=new Ws(new Bs([])),n=new Vu(t,e),r=new Vu(t,e+1),i=[];return this.Kr.forEachInRange([n,r],(e=>{this.zr(e),i.push(e.key)})),i}Jr(){this.$r.forEach((e=>this.zr(e)))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new Ws(new Bs([])),n=new Vu(t,e),r=new Vu(t,e+1);let i=Dl();return this.Kr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Vu(e,0),n=this.$r.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Vu{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return Ws.comparator(e.key,t.key)||Ps(e.Zr,t.Zr)}static Wr(e,t){return Ps(e.Zr,t.Zr)||Ws.comparator(e.key,t.key)}}class zu{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new Ba(Vu.Ur)}checkEmpty(e){return ta.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new mc(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.Xr=this.Xr.add(new Vu(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ta.resolve(s)}lookupMutationBatch(e,t){return ta.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ti(n),i=r<0?0:r;return ta.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ta.resolve(0===this.mutationQueue.length?sa:this.nr-1)}getAllMutationBatches(e){return ta.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Vu(t,0),r=new Vu(t,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([n,r],(e=>{const t=this.ei(e.Zr);i.push(t)})),ta.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ba(Ps);return t.forEach((e=>{const t=new Vu(e,0),r=new Vu(e,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([t,r],(e=>{n=n.add(e.Zr)}))})),ta.resolve(this.ni(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Ws.isDocumentKey(i)||(i=i.child(""));const s=new Vu(new Ws(i),0);let a=new Ba(Ps);return this.Xr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Zr)),!0)}),s),ta.resolve(this.ni(a))}ni(e){const t=[];return e.forEach((e=>{const n=this.ei(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){ms(0===this.ri(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Xr;return ta.forEach(t.mutations,(r=>{const i=new Vu(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Xr=n}))}sr(e){}containsKey(e,t){const n=new Vu(t,0),r=this.Xr.firstAfterOrEqual(n);return ta.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ta.resolve()}ri(e,t){return this.ti(e)}ti(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Bu{constructor(e){this.ii=e,this.docs=new Ua(Ws.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ii(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ta.resolve(n?n.document.mutableCopy():Oo.newInvalidDocument(t))}getEntries(e,t){let n=Nl();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Oo.newInvalidDocument(e))})),ta.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Nl();const s=t.path,a=new Ws(s.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Js(Ys(a),n)<=0||(r.has(a.key)||wl(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return ta.resolve(i)}getAllFromCollectionGroup(e,t,n,r){fs(9500)}si(e,t){return ta.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new qu(this)}getSize(e){return ta.resolve(this.size)}}class qu extends Ou{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Br.addEntry(e,r)):this.Br.removeEntry(n)})),ta.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}class Hu{constructor(e){this.persistence=e,this.oi=new xl((e=>il(e)),sl),this.lastRemoteSnapshotVersion=Us.min(),this.highestTargetId=0,this._i=0,this.ai=new Uu,this.targetCount=0,this.ui=_u.cr()}forEachTarget(e,t){return this.oi.forEach(((e,n)=>t(n))),ta.resolve()}getLastRemoteSnapshotVersion(e){return ta.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ta.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),ta.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this._i&&(this._i=t),ta.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new _u(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,ta.resolve()}updateTargetData(e,t){return this.Tr(t),ta.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,ta.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.oi.forEach(((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.oi.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)})),ta.waitFor(i).next((()=>r))}getTargetCount(e){return ta.resolve(this.targetCount)}getTargetData(e,t){const n=this.oi.get(t)||null;return ta.resolve(n)}addMatchingKeys(e,t,n){return this.ai.Gr(t,n),ta.resolve()}removeMatchingKeys(e,t,n){this.ai.jr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),ta.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),ta.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ai.Yr(t);return ta.resolve(n)}containsKey(e,t){return ta.resolve(this.ai.containsKey(t))}}class Wu{constructor(e,t){this.ci={},this.overlays={},this.li=new ia(0),this.hi=!1,this.hi=!0,this.Pi=new Fu,this.referenceDelegate=e(this),this.Ti=new Hu(this),this.indexManager=new wu,this.remoteDocumentCache=function(e){return new Bu(e)}((e=>this.referenceDelegate.Ii(e))),this.serializer=new yu(t),this.Ei=new Lu(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Mu,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ci[e.toKey()];return n||(n=new zu(t,this.referenceDelegate),this.ci[e.toKey()]=n),n}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,n){cs("MemoryPersistence","Starting transaction:",e);const r=new Ku(this.li.next());return this.referenceDelegate.di(),n(r).next((e=>this.referenceDelegate.Ai(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ri(e,t){return ta.or(Object.values(this.ci).map((n=>()=>n.containsKey(e,t))))}}class Ku extends Zs{constructor(e){super(),this.currentSequenceNumber=e}}class Gu{constructor(e){this.persistence=e,this.Vi=new Uu,this.mi=null}static fi(e){return new Gu(e)}get gi(){if(this.mi)return this.mi;throw fs(60996)}addReference(e,t,n){return this.Vi.addReference(n,t),this.gi.delete(n.toString()),ta.resolve()}removeReference(e,t,n){return this.Vi.removeReference(n,t),this.gi.add(n.toString()),ta.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),ta.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach((e=>this.gi.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.gi.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ta.forEach(this.gi,(n=>{const r=Ws.fromPath(n);return this.pi(e,r).next((e=>{e||t.removeEntry(r,Us.min())}))})).next((()=>(this.mi=null,t.apply(e))))}updateLimboDocument(e,t){return this.pi(e,t).next((e=>{e?this.gi.delete(t.toString()):this.gi.add(t.toString())}))}Ii(e){return 0}pi(e,t){return ta.or([()=>ta.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class Qu{constructor(e,t){this.persistence=e,this.yi=new xl((e=>ua(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=Ru(this,t)}static fi(e,t){return new Qu(e,t)}di(){}Ai(e){return ta.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Sr(e){let t=0;return this.yr(e,(e=>{t++})).next((()=>t))}yr(e,t){return ta.forEach(this.yi,((n,r)=>this.Dr(e,n,r).next((e=>e?ta.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.si(e,(r=>this.Dr(e,r,t).next((e=>{e||(n++,i.removeEntry(r,Us.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),ta.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.yi.set(n,e.currentSequenceNumber),ta.resolve()}removeReference(e,t,n){return this.yi.set(n,e.currentSequenceNumber),ta.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),ta.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Eo(e.data.value)),t}Dr(e,t,n){return ta.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.yi.get(t);return ta.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Yu{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ds=n,this.As=r}static Rs(e,t){let n=Dl(),r=Dl();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Yu(e,t.fromCache,n,r)}}class Xu{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Ju{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=x()?8:na(S())>0?6:4}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ws(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Ss(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Xu;return this.bs(e,t,n).next((r=>{if(i.result=r,this.fs)return this.Ds(e,t,n,r.size)}))})).next((()=>i.result))}Ds(e,t,n,r){return n.documentReadCount<this.gs?(ls()<=B.DEBUG&&cs("QueryEngine","SDK will not create cache indexes for query:",bl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),ta.resolve()):(ls()<=B.DEBUG&&cs("QueryEngine","Query:",bl(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ps*r?(ls()<=B.DEBUG&&cs("QueryEngine","The SDK decides to create cache indexes for query:",bl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fl(t))):ta.resolve())}ws(e,t){if(ul(t))return ta.resolve(null);let n=fl(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=gl(t,null,"F"),n=fl(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Dl(...r);return this.ys.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.vs(t,r);return this.Cs(t,s,i,n.readTime)?this.ws(e,gl(t,null,"F")):this.Fs(e,s,t,n)}))))})))))}Ss(e,t,n,r){return ul(t)||r.isEqual(Us.min())?ta.resolve(null):this.ys.getDocuments(e,n).next((i=>{const s=this.vs(t,i);return this.Cs(t,s,n,r)?ta.resolve(null):(ls()<=B.DEBUG&&cs("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),bl(t)),this.Fs(e,s,t,Qs(r,Ks)).next((e=>e)))}))}vs(e,t){let n=new Ba(Sl(e));return t.forEach(((t,r)=>{wl(e,r)&&(n=n.add(r))})),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}bs(e,t,n){return ls()<=B.DEBUG&&cs("QueryEngine","Using full collection scan to execute query:",bl(t)),this.ys.getDocumentsMatchingQuery(e,t,Xs.min(),n)}Fs(e,t,n,r){return this.ys.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}const $u="LocalStore";class Zu{constructor(e,t,n,r){this.persistence=e,this.Ms=t,this.serializer=r,this.xs=new Ua(Ps),this.Os=new xl((e=>il(e)),sl),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(n)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Du(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.xs)))}}function ed(e,t,n,r){return new Zu(e,t,n,r)}async function td(e,t){const n=gs(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.Ls(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let a=Dl();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next((e=>({ks:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function nd(e){const t=gs(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Ti.getLastRemoteSnapshotVersion(e)))}function rd(e,t,n){let r=Dl(),i=Dl();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Nl();return n.forEach(((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Us.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):cs($u,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),{qs:r,Qs:i}}))}function id(e,t){const n=gs(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=sa),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function sd(e,t){const n=gs(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Ti.getTargetData(e,t).next((i=>i?(r=i,ta.resolve(r)):n.Ti.allocateTargetId(e).next((i=>(r=new gu(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Ti.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.xs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.xs=n.xs.insert(e.targetId,e),n.Os.set(t,e.targetId)),e}))}async function ad(e,t,n){const r=gs(e),i=r.xs.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!ra(e))throw e;cs($u,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.xs=r.xs.remove(t),r.Os.delete(i.target)}function od(e,t,n){const r=gs(e);let i=Us.min(),s=Dl();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=gs(e),i=r.Os.get(n);return void 0!==i?ta.resolve(r.xs.get(i)):r.Ti.getTargetData(t,n)}(r,e,fl(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.Ms.getDocumentsMatchingQuery(e,t,n?i:Us.min(),n?s:Dl()))).next((e=>(ld(r,El(t),e),{documents:e,$s:s})))))}function ld(e,t,n){let r=e.Ns.get(t)||Us.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ns.set(t,r)}class cd{constructor(){this.activeTargetIds=Ml()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ud{constructor(){this.xo=new cd,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,n){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new cd,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class dd{No(e){}shutdown(){}}const hd="ConnectivityMonitor";class fd{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){cs(hd,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){cs(hd,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let pd=null;function md(){return null===pd?pd=268435456+Math.round(2147483648*Math.random()):pd++,"0x"+pd.toString(16)}const gd="RestConnection",yd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vd{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo="projects/".concat(n,"/databases/").concat(r),this.Go=this.databaseId.database===so?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}zo(e,t,n,r,i){const s=md(),a=this.jo(e,t.toUriEncodedString());cs(gd,"Sending RPC '".concat(e,"' ").concat(s,":"),a,n);const o={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(o,r,i);const{host:l}=new URL(a),c=y(l);return this.Jo(e,a,o,n,c).then((t=>(cs(gd,"Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw ds(gd,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",a,"request:",n),t}))}Yo(e,t,n,r,i,s){return this.zo(e,t,n,r,i)}Ho(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+as,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}jo(e,t){const n=yd[e];return"".concat(this.Ko,"/v1/").concat(t,":").concat(n)}terminate(){}}class bd{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}const wd="WebChannelConnection";class Ed extends vd{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const s=md();return new Promise(((i,a)=>{const o=new Gi;o.setWithCredentials(!0),o.listenOnce(Yi.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case Xi.NO_ERROR:const t=o.getResponseJson();cs(wd,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(t)),i(t);break;case Xi.TIMEOUT:cs(wd,"RPC '".concat(e,"' ").concat(s," timed out")),a(new vs(ys.DEADLINE_EXCEEDED,"Request time out"));break;case Xi.HTTP_ERROR:const n=o.getStatus();if(cs(wd,"RPC '".concat(e,"' ").concat(s," failed with status:"),n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(ys).indexOf(t)>=0?t:ys.UNKNOWN}(t.status);a(new vs(e,t.message))}else a(new vs(ys.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new vs(ys.UNAVAILABLE,"Connection failed."));break;default:fs(9055,{l_:e,streamId:s,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{cs(wd,"RPC '".concat(e,"' ").concat(s," completed."))}}));const l=JSON.stringify(r);cs(wd,"RPC '".concat(e,"' ").concat(s," sending request:"),r),o.send(t,"POST",l,n,15)}))}T_(e,t,n){const r=md(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=es(),a=Zi(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Ho(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=i.join("");cs(wd,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=s.createWebChannel(c,o);let d=!1,h=!1;const f=new bd({Zo:t=>{h?cs(wd,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(cs(wd,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),cs(wd,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Xo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Qi.EventType.OPEN,(()=>{h||(cs(wd,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.__())})),p(u,Qi.EventType.CLOSE,(()=>{h||(h=!0,cs(wd,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.u_())})),p(u,Qi.EventType.ERROR,(t=>{h||(h=!0,ds(wd,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.u_(new vs(ys.UNAVAILABLE,"The operation could not be completed")))})),p(u,Qi.EventType.MESSAGE,(t=>{var n;if(!h){const i=t.data[0];ms(!!i,16349);const s=i,a=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){cs(wd,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=bc[e];if(void 0!==t)return Sc(t)}(t),i=a.message;void 0===n&&(n=ys.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,f.u_(new vs(n,i)),u.close()}else cs(wd,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.c_(i)}})),p(a,$i.STAT_EVENT,(t=>{t.stat===Ji.PROXY?cs(wd,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Ji.NOPROXY&&cs(wd,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.a_()}),0),f}}function Sd(){return"undefined"!=typeof document?document:null}function kd(e){return new zc(e,!0)}class xd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.xi=e,this.timerId=t,this.I_=n,this.E_=r,this.d_=i,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const t=Math.floor(this.A_+this.g_()),n=Math.max(0,Date.now()-this.V_),r=Math.max(0,t-n);r>0&&cs("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.A_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.R_=this.xi.enqueueAfterDelay(this.timerId,r,(()=>(this.V_=Date.now(),e()))),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){null!==this.R_&&(this.R_.skipDelay(),this.R_=null)}cancel(){null!==this.R_&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}const _d="PersistentStream";class Nd{constructor(e,t,n,r,i,s,a,o){this.xi=e,this.y_=n,this.w_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new xd(e,t)}F_(){return 1===this.state||5===this.state||this.M_()}M_(){return 2===this.state||3===this.state}start(){this.v_=0,4!==this.state?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&null===this.b_&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,(()=>this.B_())))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,t){this.k_(),this.q_(),this.C_.cancel(),this.S_++,4!==e?this.C_.reset():t&&t.code===ys.RESOURCE_EXHAUSTED?(us(t.toString()),us("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):t&&t.code===ys.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),t=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.S_===t&&this.K_(n,r)}),(t=>{e((()=>{const e=new vs(ys.UNKNOWN,"Fetching auth token failed: "+t.message);return this.W_(e)}))}))}K_(e,t){const n=this.U_(this.S_);this.stream=this.G_(e,t),this.stream.e_((()=>{n((()=>this.listener.e_()))})),this.stream.n_((()=>{n((()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,(()=>(this.M_()&&(this.state=3),Promise.resolve()))),this.listener.n_())))})),this.stream.i_((e=>{n((()=>this.W_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.v_?this.z_(e):this.onNext(e)))}))}x_(){this.state=5,this.C_.f_((async()=>{this.state=0,this.start()}))}W_(e){return cs(_d,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}U_(e){return t=>{this.xi.enqueueAndForget((()=>this.S_===e?t():(cs(_d,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Td extends Nd{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}G_(e,t){return this.connection.T_("Listen",e,t)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:fs(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(ms(void 0===t||"string"==typeof t,58123),Ka.fromBase64String(t||"")):(ms(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),Ka.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?ys.UNKNOWN:Sc(e.code);return new vs(t,e.message||"")}(a);n=new Oc(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Jc(e,r.document.name),s=Kc(r.document.updateTime),a=r.document.createTime?Kc(r.document.createTime):Us.min(),o=new Po({mapValue:{fields:r.document.fields}}),l=Oo.newFoundDocument(i,s,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Pc(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Jc(e,r.document),s=r.readTime?Kc(r.readTime):Us.min(),a=Oo.newNoDocument(i,s),o=r.removedTargetIds||[];n=new Pc([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Jc(e,r.document),s=r.removedTargetIds||[];n=new Pc([],s,i,null)}else{if(!("filter"in t))return fs(11601,{Vt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new vc(r,i),a=e.targetId;n=new Rc(a,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Us.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Us.min():t.readTime?Kc(t.readTime):Us.min()}(e);return this.listener.j_(t,n)}H_(e){const t={};t.database=eu(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=al(r)?{documents:iu(e,r)}:{query:su(e,r).gt},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Hc(e,t.resumeToken);const r=Bc(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Us.min())>0){n.readTime=qc(e,t.snapshotVersion.toTimestamp());const r=Bc(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fs(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.L_(t)}J_(e){const t={};t.database=eu(this.serializer),t.removeTarget=e,this.L_(t)}}class Cd extends Nd{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,t){return this.connection.T_("Write",e,t)}z_(e){return ms(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ms(!e.writeResults||0===e.writeResults.length,55816),this.listener.X_()}onNext(e){ms(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const t=function(e,t){return e&&e.length>0?(ms(void 0!==t,14353),e.map((e=>function(e,t){let n=e.updateTime?Kc(e.updateTime):Kc(t);return n.isEqual(Us.min())&&(n=Kc(t)),new Zl(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Kc(e.commitTime);return this.listener.ea(n,t)}ta(){const e={};e.database=eu(this.serializer),this.L_(e)}Z_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>ru(this.serializer,e)))};this.L_(t)}}class Id{}class Ad extends Id{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.na=!1}ra(){if(this.na)throw new vs(ys.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,n,r){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,a]=i;return this.connection.zo(e,Qc(t,n),r,s,a)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===ys.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new vs(ys.UNKNOWN,e.toString())}))}Yo(e,t,n,r,i){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[a,o]=s;return this.connection.Yo(e,Qc(t,n),r,a,o,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===ys.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new vs(ys.UNKNOWN,e.toString())}))}terminate(){this.na=!0,this.connection.terminate()}}class Pd{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){0===this.ia&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve()))))}ca(e){"Online"===this.state?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.aa("Offline")))}set(e){this.la(),this.ia=0,"Online"===e&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.oa?(us(t),this.oa=!1):cs("OnlineStateTracker",t)}la(){null!==this.sa&&(this.sa.cancel(),this.sa=null)}}const Rd="RemoteStore";class Od{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=i,this.Ea.No((e=>{n.enqueueAndForget((async()=>{Bd(this)&&(cs(Rd,"Restarting streams for network reachability change."),await async function(e){const t=gs(e);t.Ta.add(4),await Dd(t),t.da.set("Unknown"),t.Ta.delete(4),await jd(t)}(this))}))})),this.da=new Pd(n,r)}}async function jd(e){if(Bd(e))for(const t of e.Ia)await t(!0)}async function Dd(e){for(const t of e.Ia)await t(!1)}function Ld(e,t){const n=gs(e);n.Pa.has(t.targetId)||(n.Pa.set(t.targetId,t),zd(n)?Vd(n):oh(n).M_()&&Fd(n,t))}function Md(e,t){const n=gs(e),r=oh(n);n.Pa.delete(t),r.M_()&&Ud(n,t),0===n.Pa.size&&(r.M_()?r.N_():Bd(n)&&n.da.set("Unknown"))}function Fd(e,t){if(e.Aa.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Us.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}oh(e).H_(t)}function Ud(e,t){e.Aa.Ke(t),oh(e).J_(t)}function Vd(e){e.Aa=new Dc({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e.Pa.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),oh(e).start(),e.da._a()}function zd(e){return Bd(e)&&!oh(e).F_()&&e.Pa.size>0}function Bd(e){return 0===gs(e).Ta.size}function qd(e){e.Aa=void 0}async function Hd(e){e.da.set("Online")}async function Wd(e){e.Pa.forEach(((t,n)=>{Fd(e,t)}))}async function Kd(e,t){qd(e),zd(e)?(e.da.ca(t),Vd(e)):e.da.set("Unknown")}async function Gd(e,t,n){if(e.da.set("Online"),t instanceof Oc&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Pa.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Pa.delete(r),e.Aa.removeTarget(r))}(e,t)}catch(n){cs(Rd,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Qd(e,n)}else if(t instanceof Pc?e.Aa.Xe(t):t instanceof Rc?e.Aa.ot(t):e.Aa.nt(t),!n.isEqual(Us.min()))try{const t=await nd(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Aa.It(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Pa.get(r);i&&e.Pa.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.Pa.get(t);if(!r)return;e.Pa.set(t,r.withResumeToken(Ka.EMPTY_BYTE_STRING,r.snapshotVersion)),Ud(e,t);const i=new gu(r.target,t,n,r.sequenceNumber);Fd(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){cs(Rd,"Failed to raise snapshot:",t),await Qd(e,t)}}async function Qd(e,t,n){if(!ra(t))throw t;e.Ta.add(1),await Dd(e),e.da.set("Offline"),n||(n=()=>nd(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{cs(Rd,"Retrying IndexedDB access"),await n(),e.Ta.delete(1),await jd(e)}))}function Yd(e,t){return t().catch((n=>Qd(e,n,t)))}async function Xd(e){const t=gs(e),n=lh(t);let r=t.ha.length>0?t.ha[t.ha.length-1].batchId:sa;for(;Jd(t);)try{const e=await id(t.localStore,r);if(null===e){0===t.ha.length&&n.N_();break}r=e.batchId,$d(t,e)}catch(e){await Qd(t,e)}Zd(t)&&eh(t)}function Jd(e){return Bd(e)&&e.ha.length<10}function $d(e,t){e.ha.push(t);const n=lh(e);n.M_()&&n.Y_&&n.Z_(t.mutations)}function Zd(e){return Bd(e)&&!lh(e).F_()&&e.ha.length>0}function eh(e){lh(e).start()}async function th(e){lh(e).ta()}async function nh(e){const t=lh(e);for(const n of e.ha)t.Z_(n.mutations)}async function rh(e,t,n){const r=e.ha.shift(),i=gc.from(r,t,n);await Yd(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Xd(e)}async function ih(e,t){t&&lh(e).Y_&&await async function(e,t){if(function(e){return Ec(e)&&e!==ys.ABORTED}(t.code)){const n=e.ha.shift();lh(e).O_(),await Yd(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Xd(e)}}(e,t),Zd(e)&&eh(e)}async function sh(e,t){const n=gs(e);n.asyncQueue.verifyOperationInProgress(),cs(Rd,"RemoteStore received new credentials");const r=Bd(n);n.Ta.add(3),await Dd(n),r&&n.da.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ta.delete(3),await jd(n)}async function ah(e,t){const n=gs(e);t?(n.Ta.delete(2),await jd(n)):t||(n.Ta.add(2),await Dd(n),n.da.set("Unknown"))}function oh(e){return e.Ra||(e.Ra=function(e,t,n){const r=gs(e);return r.ra(),new Td(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{e_:Hd.bind(null,e),n_:Wd.bind(null,e),i_:Kd.bind(null,e),j_:Gd.bind(null,e)}),e.Ia.push((async t=>{t?(e.Ra.O_(),zd(e)?Vd(e):e.da.set("Unknown")):(await e.Ra.stop(),qd(e))}))),e.Ra}function lh(e){return e.Va||(e.Va=function(e,t,n){const r=gs(e);return r.ra(),new Cd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{e_:()=>Promise.resolve(),n_:th.bind(null,e),i_:ih.bind(null,e),X_:nh.bind(null,e),ea:rh.bind(null,e)}),e.Ia.push((async t=>{t?(e.Va.O_(),await Xd(e)):(await e.Va.stop(),e.ha.length>0&&(cs(Rd,"Stopping write stream with ".concat(e.ha.length," pending writes")),e.ha=[]))}))),e.Va}class ch{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new bs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new ch(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new vs(ys.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function uh(e,t){if(us("AsyncQueue","".concat(t,": ").concat(e)),ra(e))return new vs(ys.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class dh{static emptySet(e){return new dh(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ws.comparator(t.key,n.key):(e,t)=>Ws.comparator(e.key,t.key),this.keyedMap=Cl(),this.sortedSet=new Ua(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof dh))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new dh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class hh{constructor(){this.ma=new Ua(Ws.comparator)}track(e){const t=e.doc.key,n=this.ma.get(t);n?0!==e.type&&3===n.type?this.ma=this.ma.insert(t,e):3===e.type&&1!==n.type?this.ma=this.ma.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ma=this.ma.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ma=this.ma.remove(t):1===e.type&&2===n.type?this.ma=this.ma.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):fs(63341,{Vt:e,fa:n}):this.ma=this.ma.insert(t,e)}ga(){const e=[];return this.ma.inorderTraversal(((t,n)=>{e.push(n)})),e}}class fh{constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new fh(e,t,dh.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class ph{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some((e=>e.Sa()))}}class mh{constructor(){this.queries=gh(),this.onlineState="Unknown",this.ba=new Set}terminate(){!function(e,t){const n=gs(e),r=n.queries;n.queries=gh(),r.forEach(((e,n)=>{for(const r of n.ya)r.onError(t)}))}(this,new vs(ys.ABORTED,"Firestore shutting down"))}}function gh(){return new xl((e=>vl(e)),yl)}async function yh(e,t){const n=gs(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.wa()&&t.Sa()&&(r=2):(s=new ph,r=t.Sa()?0:1);try{switch(r){case 0:s.pa=await n.onListen(i,!0);break;case 1:s.pa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=uh(e,"Initialization of query '".concat(bl(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.ya.push(t),t.Da(n.onlineState),s.pa&&t.va(s.pa)&&Eh(n)}async function vh(e,t){const n=gs(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.ya.indexOf(t);e>=0&&(s.ya.splice(e,1),0===s.ya.length?i=t.Sa()?0:1:!s.wa()&&t.Sa()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function bh(e,t){const n=gs(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.ya)e.va(i)&&(r=!0);t.pa=i}}r&&Eh(n)}function wh(e,t,n){const r=gs(e),i=r.queries.get(t);if(i)for(const s of i.ya)s.onError(n);r.queries.delete(t)}function Eh(e){e.ba.forEach((e=>{e.next()}))}var Sh,kh;(kh=Sh||(Sh={})).Ca="default",kh.Cache="cache";class xh{constructor(e,t,n){this.query=e,this.Fa=t,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=n||{}}va(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new fh(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),t=!0):this.Na(e,this.onlineState)&&(this.Ba(e),t=!0),this.xa=e,t}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let t=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),t=!0),t}Na(e,t){if(!e.fromCache)return!0;if(!this.Sa())return!0;const n="Offline"!==t;return(!this.options.La||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Oa(e){if(e.docChanges.length>0)return!0;const t=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Ba(e){e=fh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==Sh.Cache}}class _h{constructor(e){this.key=e}}class Nh{constructor(e){this.key=e}}class Th{constructor(e,t){this.query=e,this.Ga=t,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=Dl(),this.mutatedKeys=Dl(),this.Ha=Sl(e),this.Ja=new dh(this.Ha)}get Ya(){return this.Ga}Za(e,t){const n=t?t.Xa:new hh,r=t?t.Ja:this.Ja;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=wl(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.eu(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Ha(u,o)>0||l&&this.Ha(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ja:s,Xa:n,Cs:a,mutatedKeys:i}}eu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const s=e.Xa.ga();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fs(20277,{Vt:e})}};return n(e)-n(t)}(e.type,t.type)||this.Ha(e.doc,t.doc))),this.tu(n),r=null!=r&&r;const a=t&&!r?this.nu():[],o=0===this.ja.size&&this.current&&!r?1:0,l=o!==this.za;return this.za=o,0!==s.length||l?{snapshot:new fh(this.query,e.Ja,i,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),ru:a}:{ru:a}}Da(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new hh,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach((e=>this.Ga=this.Ga.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ga=this.Ga.delete(e))),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=Dl(),this.Ja.forEach((e=>{this.iu(e.key)&&(this.ja=this.ja.add(e.key))}));const t=[];return e.forEach((e=>{this.ja.has(e)||t.push(new Nh(e))})),this.ja.forEach((n=>{e.has(n)||t.push(new _h(n))})),t}su(e){this.Ga=e.$s,this.ja=Dl();const t=this.Za(e.documents);return this.applyChanges(t,!0)}ou(){return fh.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,0===this.za,this.hasCachedResults)}}const Ch="SyncEngine";class Ih{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Ah{constructor(e){this.key=e,this._u=!1}}class Ph{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.au={},this.uu=new xl((e=>vl(e)),yl),this.cu=new Map,this.lu=new Set,this.hu=new Ua(Ws.comparator),this.Pu=new Map,this.Tu=new Uu,this.Iu={},this.Eu=new Map,this.du=_u.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return!0===this.Au}}async function Rh(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Zh(e);let i;const s=r.uu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ou()):i=await jh(r,t,n,!0),i}async function Oh(e,t){const n=Zh(e);await jh(n,t,!0,!1)}async function jh(e,t,n,r){const i=await sd(e.localStore,fl(t)),s=i.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await Dh(e,t,s,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&Ld(e.remoteStore,i),o}async function Dh(e,t,n,r,i){e.Ru=(t,n,r)=>async function(e,t,n,r){let i=t.view.Za(n);i.Cs&&(i=await od(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.Za(n,i)})));const s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return Gh(e,t.targetId,o.ru),o.snapshot}(e,t,n,r);const s=await od(e.localStore,t,!0),a=new Th(t,s.$s),o=a.Za(s.documents),l=Ac.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(o,e.isPrimaryClient,l);Gh(e,n,c.ru);const u=new Ih(t,n,a);return e.uu.set(t,u),e.cu.has(n)?e.cu.get(n).push(t):e.cu.set(n,[t]),c.snapshot}async function Lh(e,t,n){const r=gs(e),i=r.uu.get(t),s=r.cu.get(i.targetId);if(s.length>1)return r.cu.set(i.targetId,s.filter((e=>!yl(e,t)))),void r.uu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ad(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Md(r.remoteStore,i.targetId),Wh(r,i.targetId)})).catch(ea)):(Wh(r,i.targetId),await ad(r.localStore,i.targetId,!0))}async function Mh(e,t){const n=gs(e),r=n.uu.get(t),i=n.cu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Md(n.remoteStore,r.targetId))}async function Fh(e,t){const n=gs(e);try{const e=await function(e,t){const n=gs(e),r=t.snapshotVersion;let i=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.Bs.newChangeBuffer({trackRemovals:!0});i=n.xs;const a=[];t.targetChanges.forEach(((s,o)=>{const l=i.get(o);if(!l)return;a.push(n.Ti.removeMatchingKeys(e,s.removedDocuments,o).next((()=>n.Ti.addMatchingKeys(e,s.addedDocuments,o))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Ka.EMPTY_BYTE_STRING,Us.min()).withLastLimboFreeSnapshotVersion(Us.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&a.push(n.Ti.updateTargetData(e,c))}));let o=Nl(),l=Dl();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(rd(e,s,t.documentUpdates).next((e=>{o=e.qs,l=e.Qs}))),!r.isEqual(Us.min())){const t=n.Ti.getLastRemoteSnapshotVersion(e).next((t=>n.Ti.setTargetsMetadata(e,e.currentSequenceNumber,r)));a.push(t)}return ta.waitFor(a).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,o,l))).next((()=>o))})).then((e=>(n.xs=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Pu.get(t);r&&(ms(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r._u=!0:e.modifiedDocuments.size>0?ms(r._u,14607):e.removedDocuments.size>0&&(ms(r._u,42227),r._u=!1))})),await Xh(n,e,t)}catch(e){await ea(e)}}function Uh(e,t,n){const r=gs(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.uu.forEach(((n,r)=>{const i=r.view.Da(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=gs(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.ya)i.Da(t)&&(r=!0)})),r&&Eh(n)}(r.eventManager,t),e.length&&r.au.j_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Vh(e,t,n){const r=gs(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Pu.get(t),s=i&&i.key;if(s){let e=new Ua(Ws.comparator);e=e.insert(s,Oo.newNoDocument(s,Us.min()));const n=Dl().add(s),i=new Ic(Us.min(),new Map,new Ua(Ps),e,n);await Fh(r,i),r.hu=r.hu.remove(s),r.Pu.delete(t),Yh(r)}else await ad(r.localStore,t,!1).then((()=>Wh(r,t,n))).catch(ea)}async function zh(e,t){const n=gs(e),r=t.batch.batchId;try{const e=await function(e,t){const n=gs(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=ta.resolve();return s.forEach((e=>{a=a.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);ms(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),a.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Dl();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Hh(n,r,null),qh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Xh(n,e)}catch(e){await ea(e)}}async function Bh(e,t,n){const r=gs(e);try{const e=await function(e,t){const n=gs(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(ms(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Hh(r,t,n),qh(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Xh(r,e)}catch(n){await ea(n)}}function qh(e,t){(e.Eu.get(t)||[]).forEach((e=>{e.resolve()})),e.Eu.delete(t)}function Hh(e,t,n){const r=gs(e);let i=r.Iu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Iu[r.currentUser.toKey()]=i}}function Wh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.cu.get(t))e.uu.delete(r),n&&e.au.Vu(r,n);e.cu.delete(t),e.isPrimaryClient&&e.Tu.Hr(t).forEach((t=>{e.Tu.containsKey(t)||Kh(e,t)}))}function Kh(e,t){e.lu.delete(t.path.canonicalString());const n=e.hu.get(t);null!==n&&(Md(e.remoteStore,n),e.hu=e.hu.remove(t),e.Pu.delete(n),Yh(e))}function Gh(e,t,n){for(const r of n)r instanceof _h?(e.Tu.addReference(r.key,t),Qh(e,r)):r instanceof Nh?(cs(Ch,"Document no longer in limbo: "+r.key),e.Tu.removeReference(r.key,t),e.Tu.containsKey(r.key)||Kh(e,r.key)):fs(19791,{mu:r})}function Qh(e,t){const n=t.key,r=n.path.canonicalString();e.hu.get(n)||e.lu.has(r)||(cs(Ch,"New document in limbo: "+n),e.lu.add(r),Yh(e))}function Yh(e){for(;e.lu.size>0&&e.hu.size<e.maxConcurrentLimboResolutions;){const t=e.lu.values().next().value;e.lu.delete(t);const n=new Ws(Bs.fromString(t)),r=e.du.next();e.Pu.set(r,new Ah(n)),e.hu=e.hu.insert(n,r),Ld(e.remoteStore,new gu(fl(cl(n.path)),r,"TargetPurposeLimboResolution",ia.le))}}async function Xh(e,t,n){const r=gs(e),i=[],s=[],a=[];r.uu.isEmpty()||(r.uu.forEach(((e,o)=>{a.push(r.Ru(o,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Yu.Rs(o.targetId,e);s.push(t)}})))})),await Promise.all(a),r.au.j_(i),await async function(e,t){const n=gs(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>ta.forEach(t,(t=>ta.forEach(t.ds,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>ta.forEach(t.As,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!ra(e))throw e;cs($u,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.xs.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.xs=n.xs.insert(e,i)}}}(r.localStore,s))}async function Jh(e,t){const n=gs(e);if(!n.currentUser.isEqual(t)){cs(Ch,"User change. New user:",t.toKey());const e=await td(n.localStore,t);n.currentUser=t,function(e,t){e.Eu.forEach((e=>{e.forEach((e=>{e.reject(new vs(ys.CANCELLED,t))}))})),e.Eu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Xh(n,e.ks)}}function $h(e,t){const n=gs(e),r=n.Pu.get(t);if(r&&r._u)return Dl().add(r.key);{let e=Dl();const r=n.cu.get(t);if(!r)return e;for(const t of r){const r=n.uu.get(t);e=e.unionWith(r.view.Ya)}return e}}function Zh(e){const t=gs(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Fh.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=$h.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Vh.bind(null,t),t.au.j_=bh.bind(null,t.eventManager),t.au.Vu=wh.bind(null,t.eventManager),t}function ef(e){const t=gs(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=zh.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Bh.bind(null,t),t}class tf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kd(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,t){return null}bu(e,t){return null}wu(e){return ed(this.persistence,new Ju,e.initialUser,this.serializer)}yu(e){return new Wu(Gu.fi,this.serializer)}pu(e){return new ud}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}tf.provider={build:()=>new tf};class nf extends tf{constructor(e){super(),this.cacheSizeBytes=e}Su(e,t){ms(this.persistence.referenceDelegate instanceof Qu,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Au(n,e.asyncQueue,t)}yu(e){const t=void 0!==this.cacheSizeBytes?xu.withCacheSize(this.cacheSizeBytes):xu.DEFAULT;return new Wu((e=>Qu.fi(e,t)),this.serializer)}}class rf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Uh(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Jh.bind(null,this.syncEngine),await ah(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new mh}createDatastore(e){const t=kd(e.databaseInfo.databaseId),n=function(e){return new Ed(e)}(e.databaseInfo);return function(e,t,n,r){return new Ad(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Od(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Uh(this.syncEngine,e,0)),fd.C()?new fd:new dd)}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new Ph(e,t,n,r,i,s);return a&&(o.Au=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=gs(e);cs(Rd,"RemoteStore shutting down."),t.Ta.add(5),await Dd(t),t.Ea.shutdown(),t.da.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}rf.provider={build:()=>new rf};class sf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):us("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const af="FirestoreClient";class of{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=ss.UNAUTHENTICATED,this.clientId=As.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{cs(af,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(cs(af,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=uh(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function lf(e,t){e.asyncQueue.verifyOperationInProgress(),cs(af,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await td(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function cf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await uf(e);cs(af,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>sh(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>sh(t.remoteStore,n))),e._onlineComponents=t}async function uf(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){cs(af,"Using user provided OfflineComponentProvider");try{await lf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===ys.FAILED_PRECONDITION||e.code===ys.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;ds("Error using user provided cache. Falling back to memory cache: "+n),await lf(e,new tf)}}else cs(af,"Using default OfflineComponentProvider"),await lf(e,new nf(void 0));return e._offlineComponents}async function df(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(cs(af,"Using user provided OnlineComponentProvider"),await cf(e,e._uninitializedComponentsProvider._online)):(cs(af,"Using default OnlineComponentProvider"),await cf(e,new rf))),e._onlineComponents}function hf(e){return df(e).then((e=>e.syncEngine))}async function ff(e){const t=await df(e),n=t.eventManager;return n.onListen=Rh.bind(null,t.syncEngine),n.onUnlisten=Lh.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Oh.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Mh.bind(null,t.syncEngine),n}function pf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new bs;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new sf({next:o=>{s.Cu(),t.enqueueAndForget((()=>vh(e,a)));const l=o.docs.has(n);!l&&o.fromCache?i.reject(new vs(ys.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?i.reject(new vs(ys.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new xh(cl(n.path),s,{includeMetadataChanges:!0,La:!0});return yh(e,a)}(await ff(e),e.asyncQueue,t,n,r))),r.promise}function mf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new bs;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new sf({next:n=>{s.Cu(),t.enqueueAndForget((()=>vh(e,a))),n.fromCache&&"server"===r.source?i.reject(new vs(ys.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new xh(n,s,{includeMetadataChanges:!0,La:!0});return yh(e,a)}(await ff(e),e.asyncQueue,t,n,r))),r.promise}function gf(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const yf=new Map;function vf(e,t,n){if(!n)throw new vs(ys.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function bf(e){if(!Ws.isDocumentKey(e))throw new vs(ys.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function wf(e){if(Ws.isDocumentKey(e))throw new vs(ys.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ef(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":fs(12329,{type:typeof e})}function Sf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new vs(ys.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ef(e);throw new vs(ys.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}const kf="firestore.googleapis.com",xf=!0;class _f{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new vs(ys.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kf,this.ssl=xf}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:xf;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=ku;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Tu)throw new vs(ys.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new vs(ys.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gf(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new vs(ys.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new vs(ys.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new vs(ys.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nf{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _f({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new vs(ys.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new vs(ys.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _f(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Es;switch(e.type){case"firstParty":return new _s(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new vs(ys.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=yf.get(e);t&&(cs("ComponentProvider","Removing Datastore"),yf.delete(e),t.terminate())}(this),Promise.resolve()}}function Tf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;e=Sf(e,Nf);const s=y(t),a=e._getSettings(),o=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),l="".concat(t,":").concat(n);s&&(v("https://".concat(l)),E("Firestore",!0)),a.host!==kf&&a.host!==l&&ds("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},a),{host:l,ssl:s,emulatorOptions:r});if(!I(u,o)&&(e._setSettings(u),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=ss.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[c(JSON.stringify({alg:"none",type:"JWT"})),c(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new vs(ys.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ss(s)}e._authCredentials=new Ss(new ws(t,n))}}class Cf{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Cf(this.firestore,e,this._query)}}class If{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Af(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new If(this.firestore,e,this._key)}}class Af extends Cf{constructor(e,t,n){super(e,t,cl(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new If(this.firestore,null,new Ws(e))}withConverter(e){return new Af(this.firestore,e,this._path)}}function Pf(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=L(e),vf("collection","path",t),e instanceof Nf){const n=Bs.fromString(t,...r);return wf(n),new Af(e,null,n)}{if(!(e instanceof If||e instanceof Af))throw new vs(ys.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Bs.fromString(t,...r));return wf(n),new Af(e.firestore,null,n)}}function Rf(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=L(e),1===arguments.length&&(t=As.newId()),vf("doc","path",t),e instanceof Nf){const n=Bs.fromString(t,...r);return bf(n),new If(e,null,new Ws(n))}{if(!(e instanceof If||e instanceof Af))throw new vs(ys.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Bs.fromString(t,...r));return bf(n),new If(e.firestore,e instanceof Af?e.converter:null,new Ws(n))}}const Of="AsyncQueue";class jf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new xd(this,"async_queue_retry"),this.ec=()=>{const e=Sd();e&&cs(Of,"Visibility state changed to "+e.visibilityState),this.C_.p_()},this.tc=e;const t=Sd();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const t=Sd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise((()=>{}));const t=new bs;return this.rc((()=>this.ju&&this.Zu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.zu.push(e),this.sc())))}async sc(){if(0!==this.zu.length){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!ra(e))throw e;cs(Of,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_((()=>this.sc()))}}rc(e){const t=this.tc.then((()=>(this.Yu=!0,e().catch((e=>{throw this.Ju=e,this.Yu=!1,us("INTERNAL UNHANDLED ERROR: ",Df(e)),e})).then((e=>(this.Yu=!1,e))))));return this.tc=t,t}enqueueAfterDelay(e,t,n){this.nc(),this.Xu.indexOf(e)>-1&&(t=0);const r=ch.createAndSchedule(this,e,t,n,(e=>this.oc(e)));return this.Hu.push(r),r}nc(){this.Ju&&fs(47125,{_c:Df(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do{e=this.tc,await e}while(e!==this.tc)}uc(e){for(const t of this.Hu)if(t.timerId===e)return!0;return!1}cc(e){return this.ac().then((()=>{this.Hu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Hu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ac()}))}lc(e){this.Xu.push(e)}oc(e){const t=this.Hu.indexOf(e);this.Hu.splice(t,1)}}function Df(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class Lf extends Nf{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new jf,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jf(e),this._firestoreClient=void 0,await e}}}function Mf(e){if(e._terminated)throw new vs(ys.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Ff(e),e._firestoreClient}function Ff(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new io(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,gf(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new of(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Uf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Uf(Ka.fromBase64String(e))}catch(e){throw new vs(ys.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Uf(Ka.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Vf{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new vs(ys.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hs(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class zf{constructor(e){this._methodName=e}}class Bf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new vs(ys.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new vs(ys.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ps(this._lat,e._lat)||Ps(this._long,e._long)}}class qf{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Hf=/^__.*__$/;class Wf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new cc(e,this.data,this.fieldMask,t,this.fieldTransforms):new lc(e,this.data,t,this.fieldTransforms)}}class Kf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new cc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Gf(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fs(40011,{hc:e})}}class Qf{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Pc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new Qf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tc({path:n,Ec:!1});return r.dc(e),r}Ac(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tc({path:n,Ec:!1});return r.Pc(),r}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return cp(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(0===e.length)throw this.Vc("Document fields must not be empty");if(Gf(this.hc)&&Hf.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class Yf{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||kd(e)}gc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Qf({hc:e,methodName:t,fc:n,path:Hs.emptyPath(),Ec:!1,mc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xf(e){const t=e._freezeSettings(),n=kd(e._databaseId);return new Yf(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Jf(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.gc(s.merge||s.mergeFields?2:0,t,n,i);sp("Data must be an object, but it was:",a,r);const o=rp(r,a);let l,c;if(s.merge)l=new Ha(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=ap(t,r,n);if(!a.contains(i))throw new vs(ys.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));up(e,i)||e.push(i)}l=new Ha(e),c=a.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=a.fieldTransforms;return new Wf(new Po(o),l,c)}class $f extends zf{_toFieldTransform(e){if(2!==e.hc)throw 1===e.hc?e.Vc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Vc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $f}}function Zf(e,t,n,r){const i=e.gc(1,t,n);sp("Data must be an object, but it was:",i,r);const s=[],a=Po.empty();Ma(r,((e,r)=>{const o=lp(t,e,n);r=L(r);const l=i.Ac(o);if(r instanceof $f)s.push(o);else{const e=np(r,l);null!=e&&(s.push(o),a.set(o,e))}}));const o=new Ha(s);return new Kf(a,o,i.fieldTransforms)}function ep(e,t,n,r,i,s){const a=e.gc(1,t,n),o=[ap(t,r,n)],l=[i];if(s.length%2!=0)throw new vs(ys.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<s.length;h+=2)o.push(ap(t,s[h])),l.push(s[h+1]);const c=[],u=Po.empty();for(let h=o.length-1;h>=0;--h)if(!up(c,o[h])){const e=o[h];let t=l[h];t=L(t);const n=a.Ac(e);if(t instanceof $f)c.push(e);else{const r=np(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new Ha(c);return new Kf(u,d,a.fieldTransforms)}function tp(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return np(n,e.gc(r?4:3,t))}function np(e,t){if(ip(e=L(e)))return sp("Unsupported field value:",t,e),rp(e,t);if(e instanceof zf)return function(e,t){if(!Gf(t.hc))throw t.Vc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Vc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Ec&&4!==t.hc)throw t.Vc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=np(i,t.Rc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=L(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Vl(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Fs.fromDate(e);return{timestampValue:qc(t.serializer,n)}}if(e instanceof Fs){const n=new Fs(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:qc(t.serializer,n)}}if(e instanceof Bf)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Uf)return{bytesValue:Hc(t.serializer,e._byteString)};if(e instanceof If){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Vc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Gc(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof qf)return function(e,t){return{mapValue:{fields:{[oo]:{stringValue:uo},[ho]:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Vc("VectorValues must only contain numeric values.");return Fl(t.serializer,e)}))}}}}}}(e,t);throw t.Vc("Unsupported field value: ".concat(Ef(e)))}(e,t)}function rp(e,t){const n={};return Fa(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ma(e,((e,r)=>{const i=np(r,t.Ic(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function ip(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Fs||e instanceof Bf||e instanceof Uf||e instanceof If||e instanceof zf||e instanceof qf)}function sp(e,t,n){if(!ip(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Ef(n);throw"an object"===r?t.Vc(e+" a custom object"):t.Vc(e+" "+r)}}function ap(e,t,n){if((t=L(t))instanceof Vf)return t._internalPath;if("string"==typeof t)return lp(e,t);throw cp("Field path arguments must be of type string or ",e,!1,void 0,n)}const op=new RegExp("[~\\*/\\[\\]]");function lp(e,t,n){if(t.search(op)>=0)throw cp("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Vf(...t.split("."))._internalPath}catch(r){throw cp("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function cp(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(i)),l+=")"),new vs(ys.INVALID_ARGUMENT,o+e+l)}function up(e,t){return e.some((e=>e.isEqual(t)))}class dp{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new If(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new hp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class hp extends dp{data(){return super.data()}}function fp(e,t){return"string"==typeof t?lp(e,t):t instanceof Vf?t._internalPath:t._delegate._internalPath}function pp(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new vs(ys.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mp{}class gp extends mp{}function yp(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof mp&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof wp)).length,n=e.filter((e=>e instanceof vp)).length;if(t>1||t>0&&n>0)throw new vs(ys.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class vp extends gp{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new vp(e,t,n)}_apply(e){const t=this._parse(e);return xp(e._query,t),new Cf(e.firestore,e.converter,ml(e._query,t))}_parse(e){const t=Xf(e.firestore),n=function(e,t,n,r,i,s,a){let o;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new vs(ys.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){kp(a,s);const t=[];for(const n of a)t.push(Sp(r,e,n));o={arrayValue:{values:t}}}else o=Sp(r,e,a)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||kp(a,s),o=tp(n,t,a,"in"===s||"not-in"===s);return Vo.create(i,s,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function bp(e,t,n){const r=t,i=fp("where",e);return vp._create(i,r,n)}class wp extends mp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new wp(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:zo.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)xp(n,i),n=ml(n,i)}(e._query,t),new Cf(e.firestore,e.converter,ml(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Ep extends gp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ep(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new vs(ys.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new vs(ys.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mo(t,n)}(e._query,this._field,this._direction);return new Cf(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new ol(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Sp(e,t,n){if("string"==typeof(n=L(n))){if(""===n)throw new vs(ys.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dl(t)&&-1!==n.indexOf("/"))throw new vs(ys.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Bs.fromString(n));if(!Ws.isDocumentKey(r))throw new vs(ys.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return So(e,new Ws(r))}if(n instanceof If)return So(e,n._key);throw new vs(ys.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Ef(n),"."))}function kp(e,t){if(!Array.isArray(e)||0===e.length)throw new vs(ys.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function xp(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new vs(ys.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new vs(ys.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class _p{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(fo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ya(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw fs(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Ma(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[ho].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>Ya(e.doubleValue)));return new qf(i)}convertGeoPoint(e){return new Bf(Ya(e.latitude),Ya(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=no(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ro(e));default:return null}}convertTimestamp(e){const t=Qa(e);return new Fs(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Bs.fromString(e);ms(mu(n),9688,{name:e});const r=new ao(n.get(1),n.get(3)),i=new Ws(n.popFirst(5));return r.isEqual(t)||us("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Np(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Tp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Cp extends dp{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Ip(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(fp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Ip extends Cp{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Ap{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Tp(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Ip(this._firestore,this._userDataWriter,n.key,n,new Tp(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new vs(ys.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Ip(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Tp(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Ip(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Tp(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Pp(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Pp(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fs(61501,{type:e})}}function Rp(e){e=Sf(e,If);const t=Sf(e.firestore,Lf);return pf(Mf(t),e._key).then((n=>Up(t,e,n)))}class Op extends _p{constructor(e){super(),this.firestore=e}convertBytes(e){return new Uf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new If(this.firestore,null,t)}}function jp(e){e=Sf(e,Cf);const t=Sf(e.firestore,Lf),n=Mf(t),r=new Op(t);return pp(e._query),mf(n,e._query).then((n=>new Ap(t,r,e,n)))}function Dp(e,t,n){e=Sf(e,If);const r=Sf(e.firestore,Lf),i=Np(e.converter,t,n);return Fp(r,[Jf(Xf(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,ec.none())])}function Lp(e,t,n){e=Sf(e,If);const r=Sf(e.firestore,Lf),i=Xf(r);let s;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return s="string"==typeof(t=L(t))||t instanceof Vf?ep(i,"updateDoc",e._key,t,n,o):Zf(i,"updateDoc",e._key,t),Fp(r,[s.toMutation(e._key,ec.exists(!0))])}function Mp(e,t){const n=Sf(e.firestore,Lf),r=Rf(e),i=Np(e.converter,t);return Fp(n,[Jf(Xf(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,ec.exists(!1))]).then((()=>r))}function Fp(e,t){return function(e,t){const n=new bs;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=ef(e);try{const e=await function(e,t){const n=gs(e),r=Fs.now(),i=t.reduce(((e,t)=>e.add(t.key)),Dl());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let o=Nl(),l=Dl();return n.Bs.getEntries(e,i).next((e=>{o=e,o.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,o))).next((i=>{s=i;const a=[];for(const e of t){const t=ac(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new cc(e.key,t,Ro(t.value.mapValue),ec.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)})).next((t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:a.batchId,changes:Il(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Iu[e.currentUser.toKey()];r||(r=new Ua(Ps)),r=r.insert(t,n),e.Iu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Xh(r,e.changes),await Xd(r.remoteStore)}catch(e){const t=uh(e,"Failed to persist write");n.reject(t)}}(await hf(e),t,n))),n.promise}(Mf(e),t)}function Up(e,t,n){const r=n.docs.get(t._key),i=new Op(e);return new Cp(e,i,t._key,r,new Tp(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){as=e}(nt),Je(new M("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),a=new Lf(new ks(e.getProvider("auth-internal")),new Ts(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new vs(ys.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ao(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),st(rs,is,e),st(rs,is,"esm2017")}();st("firebase","11.8.1","app");const Vp=rt({apiKey:"AIzaSyArdP66Q6faUUPJkkjRk5S5dsuXo0xQ2V8",authDomain:"farmer-marketplace-6a998.firebaseapp.com",projectId:"farmer-marketplace-6a998",storageBucket:"farmer-marketplace-6a998.firebasestorage.app",messagingSenderId:"518838142278",appId:"1:518838142278:web:213f441f3ec788cde3d147"}),zp=function(e,t){const n="object"==typeof e?e:it(),r="string"==typeof e?e:t||so,i=$e(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(e=>{const t=f(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&Tf(i,...e)}return i}(Vp),Bp=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it();const t=$e(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=$e(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(I(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;St(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Li,persistence:[Kr,Nr,Pr]}),r=m("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Vi)return;const r=null===t||void 0===t?void 0:t.token;zi!==r&&(zi=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){L(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){L(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}var i;const s=f("auth");return s&&Wn(n,"http://".concat(s)),n}(Vp),qp=new lr;qp.addScope("profile"),qp.addScope("email"),qp.setCustomParameters({prompt:"select_account"});function Hp(e,t){return function(){return e.apply(t,arguments)}}const{toString:Wp}=Object.prototype,{getPrototypeOf:Kp}=Object,{iterator:Gp,toStringTag:Qp}=Symbol,Yp=(Xp=Object.create(null),e=>{const t=Wp.call(e);return Xp[t]||(Xp[t]=t.slice(8,-1).toLowerCase())});var Xp;const Jp=e=>(e=e.toLowerCase(),t=>Yp(t)===e),$p=e=>t=>typeof t===e,{isArray:Zp}=Array,em=$p("undefined");const tm=Jp("ArrayBuffer");const nm=$p("string"),rm=$p("function"),im=$p("number"),sm=e=>null!==e&&"object"===typeof e,am=e=>{if("object"!==Yp(e))return!1;const t=Kp(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Qp in e)&&!(Gp in e)},om=Jp("Date"),lm=Jp("File"),cm=Jp("Blob"),um=Jp("FileList"),dm=Jp("URLSearchParams"),[hm,fm,pm,mm]=["ReadableStream","Request","Response","Headers"].map(Jp);function gm(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Zp(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length;let a;for(n=0;n<s;n++)a=r[n],t.call(null,e[a],a,e)}}function ym(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const vm="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,bm=e=>!em(e)&&e!==vm;const wm=(Em="undefined"!==typeof Uint8Array&&Kp(Uint8Array),e=>Em&&e instanceof Em);var Em;const Sm=Jp("HTMLFormElement"),km=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),xm=Jp("RegExp"),_m=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};gm(n,((n,i)=>{let s;!1!==(s=t(n,i,e))&&(r[i]=s||n)})),Object.defineProperties(e,r)};const Nm=Jp("AsyncFunction"),Tm=((e,t)=>{return e?setImmediate:t?(n="axios@".concat(Math.random()),r=[],vm.addEventListener("message",(e=>{let{source:t,data:i}=e;t===vm&&i===n&&r.length&&r.shift()()}),!1),e=>{r.push(e),vm.postMessage(n,"*")}):e=>setTimeout(e);var n,r})("function"===typeof setImmediate,rm(vm.postMessage)),Cm="undefined"!==typeof queueMicrotask?queueMicrotask.bind(vm):"undefined"!==typeof process&&process.nextTick||Tm,Im={isArray:Zp,isArrayBuffer:tm,isBuffer:function(e){return null!==e&&!em(e)&&null!==e.constructor&&!em(e.constructor)&&rm(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||rm(e.append)&&("formdata"===(t=Yp(e))||"object"===t&&rm(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&tm(e.buffer),t},isString:nm,isNumber:im,isBoolean:e=>!0===e||!1===e,isObject:sm,isPlainObject:am,isReadableStream:hm,isRequest:fm,isResponse:pm,isHeaders:mm,isUndefined:em,isDate:om,isFile:lm,isBlob:cm,isRegExp:xm,isFunction:rm,isStream:e=>sm(e)&&rm(e.pipe),isURLSearchParams:dm,isTypedArray:wm,isFileList:um,forEach:gm,merge:function e(){const{caseless:t}=bm(this)&&this||{},n={},r=(r,i)=>{const s=t&&ym(n,i)||i;am(n[s])&&am(r)?n[s]=e(n[s],r):am(r)?n[s]=e({},r):Zp(r)?n[s]=r.slice():n[s]=r};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&gm(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return gm(t,((t,r)=>{n&&rm(t)?e[r]=Hp(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,s,a;const o={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)a=i[s],r&&!r(a,e,t)||o[a]||(t[a]=e[a],o[a]=!0);e=!1!==n&&Kp(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Yp,kindOfTest:Jp,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(Zp(e))return e;let t=e.length;if(!im(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Gp]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Sm,hasOwnProperty:km,hasOwnProp:km,reduceDescriptors:_m,freezeMethods:e=>{_m(e,((t,n)=>{if(rm(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];rm(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return Zp(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:ym,global:vm,isContextDefined:bm,isSpecCompliantForm:function(e){return!!(e&&rm(e.append)&&"FormData"===e[Qp]&&e[Gp])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(sm(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=Zp(e)?[]:{};return gm(e,((e,t)=>{const s=n(e,r+1);!em(s)&&(i[t]=s)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:Nm,isThenable:e=>e&&(sm(e)||rm(e))&&rm(e.then)&&rm(e.catch),setImmediate:Tm,asap:Cm,isIterable:e=>null!=e&&rm(e[Gp])};function Am(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Im.inherits(Am,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Im.toJSONObject(this.config),code:this.code,status:this.status}}});const Pm=Am.prototype,Rm={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Rm[e]={value:e}})),Object.defineProperties(Am,Rm),Object.defineProperty(Pm,"isAxiosError",{value:!0}),Am.from=(e,t,n,r,i,s)=>{const a=Object.create(Pm);return Im.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Am.call(a,e.message,t,n,r,i),a.cause=e,a.name=e.name,s&&Object.assign(a,s),a};const Om=Am;function jm(e){return Im.isPlainObject(e)||Im.isArray(e)}function Dm(e){return Im.endsWith(e,"[]")?e.slice(0,-2):e}function Lm(e,t,n){return e?e.concat(t).map((function(e,t){return e=Dm(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const Mm=Im.toFlatObject(Im,{},null,(function(e){return/^is[A-Z]/.test(e)}));const Fm=function(e,t,n){if(!Im.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=Im.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Im.isUndefined(t[e])}))).metaTokens,i=n.visitor||c,s=n.dots,a=n.indexes,o=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Im.isSpecCompliantForm(t);if(!Im.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Im.isDate(e))return e.toISOString();if(!o&&Im.isBlob(e))throw new Om("Blob is not supported. Use a Buffer instead.");return Im.isArrayBuffer(e)||Im.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){let o=e;if(e&&!i&&"object"===typeof e)if(Im.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Im.isArray(e)&&function(e){return Im.isArray(e)&&!e.some(jm)}(e)||(Im.isFileList(e)||Im.endsWith(n,"[]"))&&(o=Im.toArray(e)))return n=Dm(n),o.forEach((function(e,r){!Im.isUndefined(e)&&null!==e&&t.append(!0===a?Lm([n],r,s):null===a?n:n+"[]",l(e))})),!1;return!!jm(e)||(t.append(Lm(i,n,s),l(e)),!1)}const u=[],d=Object.assign(Mm,{defaultVisitor:c,convertValue:l,isVisitable:jm});if(!Im.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Im.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),Im.forEach(n,(function(n,s){!0===(!(Im.isUndefined(n)||null===n)&&i.call(t,n,Im.isString(s)?s.trim():s,r,d))&&e(n,r?r.concat(s):[s])})),u.pop()}}(e),t};function Um(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Vm(e,t){this._pairs=[],e&&Fm(e,this,t)}const zm=Vm.prototype;zm.append=function(e,t){this._pairs.push([e,t])},zm.toString=function(e){const t=e?function(t){return e.call(this,t,Um)}:Um;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const Bm=Vm;function qm(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Hm(e,t,n){if(!t)return e;const r=n&&n.encode||qm;Im.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(s=i?i(t,n):Im.isURLSearchParams(t)?t.toString():new Bm(t,n).toString(r),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const Wm=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Im.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Km={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Gm={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Bm,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Qm="undefined"!==typeof window&&"undefined"!==typeof document,Ym="object"===typeof navigator&&navigator||void 0,Xm=Qm&&(!Ym||["ReactNative","NativeScript","NS"].indexOf(Ym.product)<0),Jm="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,$m=Qm&&window.location.href||"http://localhost",Zm=$($({},r),Gm);const eg=function(e){function t(e,n,r,i){let s=e[i++];if("__proto__"===s)return!0;const a=Number.isFinite(+s),o=i>=e.length;if(s=!s&&Im.isArray(r)?r.length:s,o)return Im.hasOwnProp(r,s)?r[s]=[r[s],n]:r[s]=n,!a;r[s]&&Im.isObject(r[s])||(r[s]=[]);return t(e,n,r[s],i)&&Im.isArray(r[s])&&(r[s]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}(r[s])),!a}if(Im.isFormData(e)&&Im.isFunction(e.entries)){const n={};return Im.forEachEntry(e,((e,r)=>{t(function(e){return Im.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const tg={transitional:Km,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=Im.isObject(e);i&&Im.isHTMLForm(e)&&(e=new FormData(e));if(Im.isFormData(e))return r?JSON.stringify(eg(e)):e;if(Im.isArrayBuffer(e)||Im.isBuffer(e)||Im.isStream(e)||Im.isFile(e)||Im.isBlob(e)||Im.isReadableStream(e))return e;if(Im.isArrayBufferView(e))return e.buffer;if(Im.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Fm(e,new Zm.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return Zm.isNode&&Im.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=Im.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Fm(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(Im.isString(e))try{return(t||JSON.parse)(e),Im.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||tg.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(Im.isResponse(e)||Im.isReadableStream(e))return e;if(e&&Im.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(i){if(n){if("SyntaxError"===i.name)throw Om.from(i,Om.ERR_BAD_RESPONSE,this,null,this.response);throw i}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Zm.classes.FormData,Blob:Zm.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Im.forEach(["delete","get","head","post","put","patch"],(e=>{tg.headers[e]={}}));const ng=tg,rg=Im.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ig=Symbol("internals");function sg(e){return e&&String(e).trim().toLowerCase()}function ag(e){return!1===e||null==e?e:Im.isArray(e)?e.map(ag):String(e)}function og(e,t,n,r,i){return Im.isFunction(r)?r.call(this,t,n):(i&&(t=n),Im.isString(t)?Im.isString(r)?-1!==t.indexOf(r):Im.isRegExp(r)?r.test(t):void 0:void 0)}class lg{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=sg(t);if(!i)throw new Error("header name must be a non-empty string");const s=Im.findKey(r,i);(!s||void 0===r[s]||!0===n||void 0===n&&!1!==r[s])&&(r[s||t]=ag(e))}const s=(e,t)=>Im.forEach(e,((e,n)=>i(e,n,t)));if(Im.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(Im.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&rg[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(Im.isObject(e)&&Im.isIterable(e)){let n,r,i={};for(const t of e){if(!Im.isArray(t))throw TypeError("Object iterator must return a key-value pair");i[r=t[0]]=(n=i[r])?Im.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}s(i,t)}else null!=e&&i(t,e,n);return this}get(e,t){if(e=sg(e)){const n=Im.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(Im.isFunction(t))return t.call(this,e,n);if(Im.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=sg(e)){const n=Im.findKey(this,e);return!(!n||void 0===this[n]||t&&!og(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=sg(e)){const i=Im.findKey(n,e);!i||t&&!og(0,n[i],i,t)||(delete n[i],r=!0)}}return Im.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!og(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return Im.forEach(this,((r,i)=>{const s=Im.findKey(n,i);if(s)return t[s]=ag(r),void delete t[i];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();a!==i&&delete t[i],t[a]=ag(r),n[a]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Im.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&Im.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[ig]=this[ig]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=sg(e);t[r]||(!function(e,t){const n=Im.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return Im.isArray(e)?e.forEach(r):r(e),this}}lg.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Im.reduceDescriptors(lg.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),Im.freezeMethods(lg);const cg=lg;function ug(e,t){const n=this||ng,r=t||n,i=cg.from(r.headers);let s=r.data;return Im.forEach(e,(function(e){s=e.call(n,s,i.normalize(),t?t.status:void 0)})),i.normalize(),s}function dg(e){return!(!e||!e.__CANCEL__)}function hg(e,t,n){Om.call(this,null==e?"canceled":e,Om.ERR_CANCELED,t,n),this.name="CanceledError"}Im.inherits(hg,Om,{__CANCEL__:!0});const fg=hg;function pg(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Om("Request failed with status code "+n.status,[Om.ERR_BAD_REQUEST,Om.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const mg=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,s=0,a=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=r[a];i||(i=l),n[s]=o,r[s]=l;let u=a,d=0;for(;u!==s;)d+=n[u++],u%=e;if(s=(s+1)%e,s===a&&(a=(a+1)%e),l-i<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}};const gg=function(e,t){let n,r,i=0,s=1e3/t;const a=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();i=s,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-i;for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];t>=s?a(l,e):(n=l,r||(r=setTimeout((()=>{r=null,a(n)}),s-t)))},()=>n&&a(n)]},yg=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const i=mg(50,250);return gg((n=>{const s=n.loaded,a=n.lengthComputable?n.total:void 0,o=s-r,l=i(o);r=s;e({loaded:s,total:a,progress:a?s/a:void 0,bytes:o,rate:l||void 0,estimated:l&&a&&s<=a?(a-s)/l:void 0,event:n,lengthComputable:null!=a,[t?"download":"upload"]:!0})}),n)},vg=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},bg=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Im.asap((()=>e(...n)))},wg=Zm.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Zm.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Zm.origin),Zm.navigator&&/(msie|trident)/i.test(Zm.navigator.userAgent)):()=>!0,Eg=Zm.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const a=[e+"="+encodeURIComponent(t)];Im.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),Im.isString(r)&&a.push("path="+r),Im.isString(i)&&a.push("domain="+i),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Sg(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const kg=e=>e instanceof cg?$({},e):e;function xg(e,t){t=t||{};const n={};function r(e,t,n,r){return Im.isPlainObject(e)&&Im.isPlainObject(t)?Im.merge.call({caseless:r},e,t):Im.isPlainObject(t)?Im.merge({},t):Im.isArray(t)?t.slice():t}function i(e,t,n,i){return Im.isUndefined(t)?Im.isUndefined(e)?void 0:r(void 0,e,0,i):r(e,t,0,i)}function s(e,t){if(!Im.isUndefined(t))return r(void 0,t)}function a(e,t){return Im.isUndefined(t)?Im.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function o(n,i,s){return s in t?r(n,i):s in e?r(void 0,n):void 0}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(e,t,n)=>i(kg(e),kg(t),0,!0)};return Im.forEach(Object.keys(Object.assign({},e,t)),(function(r){const s=l[r]||i,a=s(e[r],t[r],r);Im.isUndefined(a)&&s!==o||(n[r]=a)})),n}const _g=e=>{const t=xg({},e);let n,{data:r,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:a,headers:o,auth:l}=t;if(t.headers=o=cg.from(o),t.url=Hm(Sg(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Im.isFormData(r))if(Zm.hasStandardBrowserEnv||Zm.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(n=o.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(Zm.hasStandardBrowserEnv&&(i&&Im.isFunction(i)&&(i=i(t)),i||!1!==i&&wg(t.url))){const e=s&&a&&Eg.read(a);e&&o.set(s,e)}return t},Ng="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=_g(e);let i=r.data;const s=cg.from(r.headers).normalize();let a,o,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:f}=r;function p(){c&&c(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(a),r.signal&&r.signal.removeEventListener("abort",a)}let m=new XMLHttpRequest;function g(){if(!m)return;const r=cg.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());pg((function(e){t(e),p()}),(function(e){n(e),p()}),{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new Om("Request aborted",Om.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new Om("Network Error",Om.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const i=r.transitional||Km;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new Om(t,i.clarifyTimeoutError?Om.ETIMEDOUT:Om.ECONNABORTED,e,m)),m=null},void 0===i&&s.setContentType(null),"setRequestHeader"in m&&Im.forEach(s.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),Im.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),d&&"json"!==d&&(m.responseType=r.responseType),f&&([l,u]=yg(f,!0),m.addEventListener("progress",l)),h&&m.upload&&([o,c]=yg(h),m.upload.addEventListener("progress",o),m.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(a=t=>{m&&(n(!t||t.type?new fg(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(a),r.signal&&(r.signal.aborted?a():r.signal.addEventListener("abort",a)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);y&&-1===Zm.protocols.indexOf(y)?n(new Om("Unsupported protocol "+y+":",Om.ERR_BAD_REQUEST,e)):m.send(i||null)}))},Tg=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const i=function(e){if(!n){n=!0,a();const t=e instanceof Error?e:this.reason;r.abort(t instanceof Om?t:new fg(t instanceof Error?t.message:t))}};let s=t&&setTimeout((()=>{s=null,i(new Om("timeout ".concat(t," of ms exceeded"),Om.ETIMEDOUT))}),t);const a=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)})),e=null)};e.forEach((e=>e.addEventListener("abort",i)));const{signal:o}=r;return o.unsubscribe=()=>Im.asap(a),o}};function Cg(e,t){this.v=e,this.k=t}function Ig(e){return function(){return new Ag(e.apply(this,arguments))}}function Ag(e){var t,n;function r(t,n){try{var s=e[t](n),a=s.value,o=a instanceof Cg;Promise.resolve(o?a.v:a).then((function(n){if(o){var l="return"===t?"return":"next";if(!a.k||n.done)return r(l,n);n=e[l](n).value}i(s.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new Promise((function(s,a){var o={key:e,arg:i,resolve:s,reject:a,next:null};n?n=n.next=o:(t=n=o,r(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}function Pg(e){return new Cg(e,0)}function Rg(e){var t={},n=!1;function r(t,r){return n=!0,r=new Promise((function(n){n(e[t](r))})),{done:!1,value:new Cg(r,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}function Og(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new jg(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function jg(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return jg=function(e){this.s=e,this.n=e.next},jg.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new jg(e)}Ag.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Ag.prototype.next=function(e){return this._invoke("next",e)},Ag.prototype.throw=function(e){return this._invoke("throw",e)},Ag.prototype.return=function(e){return this._invoke("return",e)};const Dg=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},Lg=function(){var e=Ig((function*(e,t){var n,r=!1,i=!1;try{for(var s,a=Og(Mg(e));r=!(s=yield Pg(a.next())).done;r=!1){const e=s.value;yield*Rg(Og(Dg(e,t)))}}catch(o){i=!0,n=o}finally{try{r&&null!=a.return&&(yield Pg(a.return()))}finally{if(i)throw n}}}));return function(t,n){return e.apply(this,arguments)}}(),Mg=function(){var e=Ig((function*(e){if(e[Symbol.asyncIterator])return void(yield*Rg(Og(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield Pg(t.read());if(e)break;yield n}}finally{yield Pg(t.cancel())}}));return function(t){return e.apply(this,arguments)}}(),Fg=(e,t,n,r)=>{const i=Lg(e,t);let s,a=0,o=e=>{s||(s=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await i.next();if(t)return o(),void e.close();let s=r.byteLength;if(n){let e=a+=s;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw o(t),t}},cancel:e=>(o(e),i.return())},{highWaterMark:2})},Ug="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,Vg=Ug&&"function"===typeof ReadableStream,zg=Ug&&("function"===typeof TextEncoder?(Bg=new TextEncoder,e=>Bg.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var Bg;const qg=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(i){return!1}},Hg=Vg&&qg((()=>{let e=!1;const t=new Request(Zm.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),Wg=Vg&&qg((()=>Im.isReadableStream(new Response("").body))),Kg={stream:Wg&&(e=>e.body)};var Gg;Ug&&(Gg=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Kg[e]&&(Kg[e]=Im.isFunction(Gg[e])?t=>t[e]():(t,n)=>{throw new Om("Response type '".concat(e,"' is not supported"),Om.ERR_NOT_SUPPORT,n)})})));const Qg=async(e,t)=>{const n=Im.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(Im.isBlob(e))return e.size;if(Im.isSpecCompliantForm(e)){const t=new Request(Zm.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Im.isArrayBufferView(e)||Im.isArrayBuffer(e)?e.byteLength:(Im.isURLSearchParams(e)&&(e+=""),Im.isString(e)?(await zg(e)).byteLength:void 0)})(t):n},Yg={http:null,xhr:Ng,fetch:Ug&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:s,timeout:a,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:h}=_g(e);c=c?(c+"").toLowerCase():"text";let f,p=Tg([i,s&&s.toAbortSignal()],a);const m=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let g;try{if(l&&Hg&&"get"!==n&&"head"!==n&&0!==(g=await Qg(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(Im.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=vg(g,yg(bg(l)));r=Fg(n.body,65536,e,t)}}Im.isString(d)||(d=d?"include":"omit");const i="credentials"in Request.prototype;f=new Request(t,$($({},h),{},{signal:p,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:i?d:void 0}));let s=await fetch(f);const a=Wg&&("stream"===c||"response"===c);if(Wg&&(o||a&&m)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=s[t]}));const t=Im.toFiniteNumber(s.headers.get("content-length")),[n,r]=o&&vg(t,yg(bg(o),!0))||[];s=new Response(Fg(s.body,65536,n,(()=>{r&&r(),m&&m()})),e)}c=c||"text";let y=await Kg[Im.findKey(Kg,c)||"text"](s,e);return!a&&m&&m(),await new Promise(((t,n)=>{pg(t,n,{data:y,headers:cg.from(s.headers),status:s.status,statusText:s.statusText,config:e,request:f})}))}catch(y){if(m&&m(),y&&"TypeError"===y.name&&/Load failed|fetch/i.test(y.message))throw Object.assign(new Om("Network Error",Om.ERR_NETWORK,e,f),{cause:y.cause||y});throw Om.from(y,y&&y.code,e,f)}})};Im.forEach(Yg,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));const Xg=e=>"- ".concat(e),Jg=e=>Im.isFunction(e)||null===e||!1===e,$g=e=>{e=Im.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let s=0;s<t;s++){let t;if(n=e[s],r=n,!Jg(n)&&(r=Yg[(t=String(n)).toLowerCase()],void 0===r))throw new Om("Unknown adapter '".concat(t,"'"));if(r)break;i[t||"#"+s]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(Xg).join("\n"):" "+Xg(e[0]):"as no adapter specified";throw new Om("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function Zg(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new fg(null,e)}function ey(e){Zg(e),e.headers=cg.from(e.headers),e.data=ug.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return $g(e.adapter||ng.adapter)(e).then((function(t){return Zg(e),t.data=ug.call(e,e.transformResponse,t),t.headers=cg.from(t.headers),t}),(function(t){return dg(t)||(Zg(e),t&&t.response&&(t.response.data=ug.call(e,e.transformResponse,t.response),t.response.headers=cg.from(t.response.headers))),Promise.reject(t)}))}const ty="1.9.0",ny={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{ny[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const ry={};ny.transitional=function(e,t,n){function r(e,t){return"[Axios v1.9.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,s)=>{if(!1===e)throw new Om(r(i," has been removed"+(t?" in "+t:"")),Om.ERR_DEPRECATED);return t&&!ry[i]&&(ry[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,s)}},ny.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const iy={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Om("options must be an object",Om.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],a=t[s];if(a){const t=e[s],n=void 0===t||a(t,s,e);if(!0!==n)throw new Om("option "+s+" must be "+n,Om.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Om("Unknown option "+s,Om.ERR_BAD_OPTION)}},validators:ny},sy=iy.validators;class ay{constructor(e){this.defaults=e||{},this.interceptors={request:new Wm,response:new Wm}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(r){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=xg(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&iy.assertOptions(n,{silentJSONParsing:sy.transitional(sy.boolean),forcedJSONParsing:sy.transitional(sy.boolean),clarifyTimeoutError:sy.transitional(sy.boolean)},!1),null!=r&&(Im.isFunction(r)?t.paramsSerializer={serialize:r}:iy.assertOptions(r,{encode:sy.function,serialize:sy.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),iy.assertOptions(t,{baseUrl:sy.spelling("baseURL"),withXsrfToken:sy.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=i&&Im.merge(i.common,i[t.method]);i&&Im.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=cg.concat(s,i);const a=[];let o=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,d=0;if(!o){const e=[ey.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=a.length;let h=t;for(d=0;d<u;){const e=a[d++],t=a[d++];try{h=e(h)}catch(f){t.call(this,f);break}}try{c=ey.call(this,h)}catch(f){return Promise.reject(f)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return Hm(Sg((e=xg(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Im.forEach(["delete","get","head","options"],(function(e){ay.prototype[e]=function(t,n){return this.request(xg(n||{},{method:e,url:t,data:(n||{}).data}))}})),Im.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(xg(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}ay.prototype[e]=t(),ay.prototype[e+"Form"]=t(!0)}));const oy=ay;class ly{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new fg(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new ly((function(t){e=t})),cancel:e}}}const cy=ly;const uy={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(uy).forEach((e=>{let[t,n]=e;uy[n]=t}));const dy=uy;const hy=function e(t){const n=new oy(t),r=Hp(oy.prototype.request,n);return Im.extend(r,oy.prototype,n,{allOwnKeys:!0}),Im.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(xg(t,n))},r}(ng);hy.Axios=oy,hy.CanceledError=fg,hy.CancelToken=cy,hy.isCancel=dg,hy.VERSION=ty,hy.toFormData=Fm,hy.AxiosError=Om,hy.Cancel=hy.CanceledError,hy.all=function(e){return Promise.all(e)},hy.spread=function(e){return function(t){return e.apply(null,t)}},hy.isAxiosError=function(e){return Im.isObject(e)&&!0===e.isAxiosError},hy.mergeConfig=xg,hy.AxiosHeaders=cg,hy.formToJSON=e=>eg(Im.isHTMLForm(e)?new FormData(e):e),hy.getAdapter=$g,hy.HttpStatusCode=dy,hy.default=hy;const fy=hy;var py=n(579);function my(){const[e,t]=(0,i.useState)("products"),[n,r]=(0,i.useState)([]),[s,a]=(0,i.useState)(!1),[o,l]=(0,i.useState)({name:"",price:"",quantity:"",description:"",category:"vegetables"}),[c,u]=(0,i.useState)(!1),[d,h]=(0,i.useState)(null),[f,p]=(0,i.useState)(""),[m,g]=(0,i.useState)(0),[y,v]=(0,i.useState)(""),[b,w]=(0,i.useState)(null),[E,S]=(0,i.useState)(!1),[k,x]=(0,i.useState)(null);(0,i.useEffect)((()=>{_()}),[]);const _=async()=>{if(Bp.currentUser){a(!0);try{const e=yp(Pf(zp,"products"),bp("farmerId","==",Bp.currentUser.uid)),t=(await jp(e)).docs.map((e=>$({id:e.id},e.data())));r(t)}catch(y){console.error("Error fetching products:",y),v("Failed to fetch products")}finally{a(!1)}}},N=async()=>{if(o.name&&o.price&&o.quantity)if(d||b){u(!0),v(""),g(0);try{let e=(null===b||void 0===b?void 0:b.imageUrl)||"";if(d){g(30);const t=await(async e=>{try{const t=new FormData;t.append("file",e),t.append("upload_preset","product_images"),t.append("folder","farmer_marketplace");const n=await fy.post("https://api.cloudinary.com/v1_1/".concat("dq3f158ss","/image/upload"),t,{headers:{"Content-Type":"multipart/form-data"}});return{success:!0,url:n.data.secure_url,publicId:n.data.public_id}}catch(y){return console.error("Cloudinary upload error:",y),{success:!1,error:y.message}}})(d);if(!t.success)throw new Error(t.error);e=t.url}g(70);const n=$($({},o),{},{price:parseFloat(o.price),quantity:parseInt(o.quantity),imageUrl:e,farmerId:Bp.currentUser.uid,farmerName:Bp.currentUser.email,isAvailable:!0,updatedAt:new Date});b?(await Lp(Rf(zp,"products",b.id),n),alert("Product updated successfully!")):(await Mp(Pf(zp,"products"),$($({},n),{},{createdAt:new Date})),alert("Product added successfully!")),g(100),T(),_(),t("products")}catch(y){console.error("Error saving product:",y),v("Error saving product: "+y.message)}finally{u(!1)}}else v("Please select a product image");else v("Please fill in all required fields")},T=()=>{l({name:"",price:"",quantity:"",description:"",category:"vegetables"}),h(null),p(""),g(0),w(null),v("")};return(0,py.jsxs)("div",{className:"min-vh-100 bg-pattern-1",children:[(0,py.jsxs)("div",{className:"container py-5",children:[(0,py.jsxs)("div",{className:"text-center mb-5 fade-in",children:[(0,py.jsx)("h1",{className:"display-4 fw-bold gradient-text mb-3",children:"Farmer Dashboard"}),(0,py.jsx)("p",{className:"lead text-muted",children:"Manage your products and grow your business"})]}),(0,py.jsx)("div",{className:"row justify-content-center mb-4",children:(0,py.jsx)("div",{className:"col-md-6",children:(0,py.jsx)("div",{className:"enhanced-card p-2",children:(0,py.jsxs)("div",{className:"row g-2",children:[(0,py.jsx)("div",{className:"col-6",children:(0,py.jsxs)("button",{className:"btn w-100 btn-animated ".concat("products"===e?"btn-primary-custom":"btn-outline-primary"),onClick:()=>t("products"),children:[(0,py.jsx)("span",{className:"me-2",children:"\ud83d\udce6"}),"My Products (",n.length,")"]})}),(0,py.jsx)("div",{className:"col-6",children:(0,py.jsxs)("button",{className:"btn w-100 btn-animated ".concat("add"===e?"btn-primary-custom":"btn-outline-primary"),onClick:()=>{t("add"),T()},children:[(0,py.jsx)("span",{className:"me-2",children:"\u2795"}),b?"Edit Product":"Add Product"]})})]})})})}),"products"===e&&(0,py.jsx)("div",{className:"fade-in",children:s?(0,py.jsxs)("div",{className:"text-center py-5",children:[(0,py.jsx)("div",{className:"spinner-border text-primary mb-3",style:{width:"3rem",height:"3rem"}}),(0,py.jsx)("h4",{className:"text-muted",children:"Loading your products..."})]}):0===n.length?(0,py.jsxs)("div",{className:"enhanced-card text-center py-5",children:[(0,py.jsx)("div",{className:"mb-4",style:{fontSize:"4rem"},children:"\ud83d\udce6"}),(0,py.jsx)("h3",{className:"text-muted mb-3",children:"No products yet"}),(0,py.jsx)("p",{className:"text-muted mb-4",children:"Start by adding your first product to the marketplace"}),(0,py.jsxs)("button",{className:"btn btn-primary-custom btn-animated",onClick:()=>t("add"),children:[(0,py.jsx)("span",{className:"me-2",children:"\u2795"}),"Add Your First Product"]})]}):(0,py.jsx)("div",{className:"row g-4",children:n.map((e=>{var n,r,i;return(0,py.jsx)("div",{className:"col-lg-4 col-md-6",children:(0,py.jsxs)("div",{className:"enhanced-card product-card h-100",children:[(0,py.jsxs)("div",{className:"product-image-container",children:[e.imageUrl?(0,py.jsx)("img",{src:e.imageUrl,alt:e.name,className:"product-image"}):(0,py.jsx)("div",{className:"d-flex align-items-center justify-content-center h-100 bg-pattern-2",children:(0,py.jsx)("span",{style:{fontSize:"4rem"},children:"\ud83d\udce6"})}),(0,py.jsx)("span",{className:"badge badge-custom position-absolute top-0 end-0 m-3 ".concat(e.isAvailable?"badge-available":"badge-out-of-stock"),children:e.isAvailable?"Active":"Inactive"})]}),(0,py.jsxs)("div",{className:"card-body p-4",children:[(0,py.jsx)("h5",{className:"card-title fw-bold mb-2",children:e.name}),(0,py.jsx)("span",{className:"badge bg-light text-dark mb-3 text-capitalize",children:e.category}),(0,py.jsxs)("div",{className:"row mb-3",children:[(0,py.jsxs)("div",{className:"col-6",children:[(0,py.jsx)("small",{className:"text-muted d-block",children:"Price"}),(0,py.jsxs)("span",{className:"fw-bold text-success",children:["\u20b9",e.price]})]}),(0,py.jsxs)("div",{className:"col-6",children:[(0,py.jsx)("small",{className:"text-muted d-block",children:"Stock"}),(0,py.jsxs)("span",{className:"fw-bold ".concat(e.quantity<10?"text-warning":"text-success"),children:[e.quantity," units"]})]})]}),e.description&&(0,py.jsx)("p",{className:"text-muted small mb-3",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:e.description}),(0,py.jsxs)("div",{className:"d-grid gap-2",children:[(0,py.jsxs)("div",{className:"row g-2",children:[(0,py.jsx)("div",{className:"col-6",children:(0,py.jsxs)("button",{className:"btn btn-secondary-custom btn-sm w-100",onClick:()=>{return w(n=e),l({name:n.name,price:n.price.toString(),quantity:n.quantity.toString(),description:n.description||"",category:n.category||"vegetables"}),p(n.imageUrl||""),void t("add");var n},children:[(0,py.jsx)("span",{className:"me-1",children:"\u270f\ufe0f"}),"Edit"]})}),(0,py.jsx)("div",{className:"col-6",children:(0,py.jsxs)("button",{className:"btn btn-outline-danger btn-sm w-100",onClick:()=>{x(e),S(!0)},children:[(0,py.jsx)("span",{className:"me-1",children:"\ud83d\uddd1\ufe0f"}),"Delete"]})})]}),(0,py.jsxs)("button",{className:"btn btn-animated ".concat(e.isAvailable?"btn-outline-warning":"btn-outline-success"),onClick:()=>(async(e,t)=>{try{await Lp(Rf(zp,"products",e),{isAvailable:!t,updatedAt:new Date}),_()}catch(y){console.error("Error updating availability:",y),alert("Error updating product availability")}})(e.id,e.isAvailable),children:[(0,py.jsx)("span",{className:"me-2",children:e.isAvailable?"\u23f8\ufe0f":"\u25b6\ufe0f"}),e.isAvailable?"Deactivate":"Activate"]})]}),(0,py.jsx)("div",{className:"mt-3 pt-3 border-top",children:(0,py.jsxs)("small",{className:"text-muted",children:["Added: ",(null===(n=e.createdAt)||void 0===n||null===(r=n.toDate)||void 0===r||null===(i=r.call(n))||void 0===i?void 0:i.toLocaleDateString())||"Unknown"]})})]})]})},e.id)}))})}),"add"===e&&(0,py.jsx)("div",{className:"row justify-content-center fade-in",children:(0,py.jsx)("div",{className:"col-md-8 col-lg-6",children:(0,py.jsxs)("div",{className:"enhanced-card",children:[(0,py.jsxs)("div",{className:"text-white text-center py-4",style:{background:"linear-gradient(135deg, #4CAF50 0%, #45a049 100%)",borderRadius:"20px 20px 0 0"},children:[(0,py.jsx)("h2",{className:"mb-2 fw-bold",children:b?"Edit Product":"Add New Product"}),(0,py.jsx)("p",{className:"mb-0 opacity-75",children:b?"Update your product details":"List your fresh produce for customers"})]}),(0,py.jsxs)("div",{className:"p-4",children:[y&&(0,py.jsxs)("div",{className:"alert alert-danger d-flex align-items-center mb-4",children:[(0,py.jsx)("span",{className:"me-2",children:"\u26a0\ufe0f"}),y]}),(0,py.jsxs)("form",{onSubmit:e=>{e.preventDefault(),N()},children:[(0,py.jsxs)("div",{className:"mb-4",children:[(0,py.jsxs)("label",{htmlFor:"productImage",className:"form-label-custom",children:["Product Image ",!b&&"*"]}),(0,py.jsx)("input",{id:"productImage",type:"file",className:"form-control form-control-custom",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(v(""),t){const e=(e=>["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(e.type)?e.size>5242880?{isValid:!1,error:"Image size must be less than 5MB"}:{isValid:!0}:{isValid:!1,error:"Please upload a valid image (JPEG, PNG, GIF, WebP)"})(t);if(!e.isValid)return void v(e.error);h(t);const n=new FileReader;n.onloadend=()=>{p(n.result)},n.readAsDataURL(t)}},required:!b}),(0,py.jsx)("small",{className:"text-muted",children:"Supported formats: JPEG, PNG, GIF, WebP (Max 5MB)"}),f&&(0,py.jsx)("div",{className:"mt-3",children:(0,py.jsx)("img",{src:f,alt:"Preview",className:"img-thumbnail",style:{maxHeight:"200px",maxWidth:"100%"}})}),m>0&&m<100&&(0,py.jsx)("div",{className:"mt-3",children:(0,py.jsx)("div",{className:"progress",children:(0,py.jsxs)("div",{className:"progress-bar progress-bar-striped progress-bar-animated",style:{width:"".concat(m,"%")},children:[m,"%"]})})})]}),(0,py.jsxs)("div",{className:"mb-4",children:[(0,py.jsx)("label",{htmlFor:"productName",className:"form-label-custom",children:"Product Name *"}),(0,py.jsx)("input",{id:"productName",type:"text",className:"form-control form-control-custom",placeholder:"e.g., Fresh Tomatoes",value:o.name,onChange:e=>l($($({},o),{},{name:e.target.value})),required:!0})]}),(0,py.jsxs)("div",{className:"mb-4",children:[(0,py.jsx)("label",{htmlFor:"productCategory",className:"form-label-custom",children:"Category"}),(0,py.jsxs)("select",{id:"productCategory",className:"form-select form-control-custom",value:o.category,onChange:e=>l($($({},o),{},{category:e.target.value})),children:[(0,py.jsx)("option",{value:"vegetables",children:"Vegetables"}),(0,py.jsx)("option",{value:"fruits",children:"Fruits"}),(0,py.jsx)("option",{value:"grains",children:"Grains"}),(0,py.jsx)("option",{value:"herbs",children:"Herbs"}),(0,py.jsx)("option",{value:"dairy",children:"Dairy"})]})]}),(0,py.jsxs)("div",{className:"mb-4",children:[(0,py.jsx)("label",{htmlFor:"productDescription",className:"form-label-custom",children:"Description"}),(0,py.jsx)("textarea",{id:"productDescription",className:"form-control form-control-custom",rows:"3",placeholder:"Describe your product...",value:o.description,onChange:e=>l($($({},o),{},{description:e.target.value}))})]}),(0,py.jsxs)("div",{className:"row mb-4",children:[(0,py.jsxs)("div",{className:"col-md-6",children:[(0,py.jsx)("label",{htmlFor:"productPrice",className:"form-label-custom",children:"Price per unit (\u20b9) *"}),(0,py.jsx)("input",{id:"productPrice",type:"number",step:"0.01",min:"0",className:"form-control form-control-custom",placeholder:"0.00",value:o.price,onChange:e=>l($($({},o),{},{price:e.target.value})),required:!0})]}),(0,py.jsxs)("div",{className:"col-md-6",children:[(0,py.jsx)("label",{htmlFor:"productQuantity",className:"form-label-custom",children:"Quantity Available *"}),(0,py.jsx)("input",{id:"productQuantity",type:"number",min:"1",className:"form-control form-control-custom",placeholder:"e.g., 50",value:o.quantity,onChange:e=>l($($({},o),{},{quantity:e.target.value})),required:!0})]})]}),(0,py.jsxs)("div",{className:"row g-2",children:[(0,py.jsx)("div",{className:"col-md-6",children:(0,py.jsx)("button",{type:"button",className:"btn btn-outline-secondary w-100 btn-animated",onClick:()=>{T(),t("products")},disabled:c,children:"Cancel"})}),(0,py.jsx)("div",{className:"col-md-6",children:(0,py.jsx)("button",{type:"submit",className:"btn btn-primary-custom w-100 btn-animated ".concat(c?"disabled":""),disabled:c,children:c?(0,py.jsxs)(py.Fragment,{children:[(0,py.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),m<30?"Uploading...":m<70?"Saving...":"Almost Done..."]}):b?"Update Product":"Add Product"})})]})]})]})]})})})]}),E&&(0,py.jsx)("div",{className:"modal show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:(0,py.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:(0,py.jsxs)("div",{className:"enhanced-card modal-content border-0",children:[(0,py.jsx)("div",{className:"modal-header border-0 pb-0",children:(0,py.jsx)("h5",{className:"modal-title fw-bold",children:"Confirm Delete"})}),(0,py.jsxs)("div",{className:"modal-body",children:[(0,py.jsx)("p",{className:"mb-3",children:"Are you sure you want to delete this product?"}),(0,py.jsxs)("div",{className:"alert alert-warning",children:[(0,py.jsx)("strong",{children:null===k||void 0===k?void 0:k.name}),(0,py.jsx)("br",{}),(0,py.jsx)("small",{children:"This action cannot be undone."})]})]}),(0,py.jsxs)("div",{className:"modal-footer border-0 pt-0",children:[(0,py.jsx)("button",{type:"button",className:"btn btn-outline-secondary btn-animated",onClick:()=>{S(!1),x(null)},children:"Cancel"}),(0,py.jsx)("button",{type:"button",className:"btn btn-danger btn-animated",onClick:async()=>{var e;if(k)try{await(e=Rf(zp,"products",k.id),Fp(Sf(e.firestore,Lf),[new fc(e._key,ec.none())])),alert("Product deleted successfully!"),_(),S(!1),x(null)}catch(y){console.error("Error deleting product:",y),alert("Error deleting product: "+y.message)}},children:"Delete Product"})]})]})})})]})}const gy=e=>{let{product:t,onAddToCart:n,onContactFarmer:r,showActions:s=!0}=e;const[a,o]=(0,i.useState)(!1),[l,c]=(0,i.useState)(!1);return(0,py.jsxs)("div",{className:"product-card enhanced-card h-100 fade-in",children:[(0,py.jsxs)("div",{className:"product-image-container",children:[t.imageUrl&&!l?(0,py.jsx)("img",{src:t.imageUrl,alt:t.name,className:"product-image",onError:()=>c(!0),loading:"lazy"}):(0,py.jsx)("div",{className:"d-flex align-items-center justify-content-center h-100 bg-pattern-2",style:{height:"220px"},children:(0,py.jsx)("span",{style:{fontSize:"4rem"},children:(e=>{const t=e.toLowerCase();return t.includes("tomato")?"\ud83c\udf45":t.includes("carrot")?"\ud83e\udd55":t.includes("potato")?"\ud83e\udd54":t.includes("onion")?"\ud83e\uddc5":t.includes("apple")?"\ud83c\udf4e":t.includes("banana")?"\ud83c\udf4c":t.includes("orange")?"\ud83c\udf4a":t.includes("lettuce")||t.includes("cabbage")?"\ud83e\udd6c":t.includes("corn")?"\ud83c\udf3d":t.includes("pepper")?"\ud83c\udf36\ufe0f":"\ud83e\udd6c"})(t.name)})}),(0,py.jsx)("span",{className:"badge badge-custom badge-fresh position-absolute top-0 end-0 m-3",children:"Fresh"}),t.quantity>0?(0,py.jsx)("span",{className:"badge badge-custom badge-available position-absolute top-0 start-0 m-3",children:"Available"}):(0,py.jsx)("span",{className:"badge badge-custom badge-out-of-stock position-absolute top-0 start-0 m-3",children:"Out of Stock"})]}),(0,py.jsxs)("div",{className:"card-body p-4",children:[(0,py.jsx)("h5",{className:"card-title fw-bold mb-3 text-truncate",title:t.name,children:t.name}),t.category&&(0,py.jsx)("span",{className:"badge bg-light text-dark mb-3 text-capitalize",style:{borderRadius:"20px",padding:"6px 12px"},children:t.category}),(0,py.jsxs)("div",{className:"d-flex align-items-baseline mb-3",children:[(0,py.jsx)("span",{className:"price-display mb-0",children:(u=t.price,new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(u))}),(0,py.jsx)("span",{className:"text-muted ms-2",children:"per unit"})]}),(0,py.jsx)("div",{className:"mb-3",children:(0,py.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,py.jsxs)("div",{children:[(0,py.jsx)("small",{className:"text-muted",children:"Available: "}),(0,py.jsxs)("span",{className:"fw-semibold ".concat(t.quantity<10?"text-warning":"text-success"),children:[t.quantity," units"]})]}),t.quantity<10&&t.quantity>0&&(0,py.jsx)("span",{className:"badge badge-custom badge-low-stock",children:"Low Stock"})]})}),t.description&&(0,py.jsx)("div",{className:"mb-3",children:(0,py.jsx)("p",{className:"text-muted small mb-0",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:t.description})}),(0,py.jsx)("div",{className:"farmer-info mb-3",children:(0,py.jsxs)("div",{className:"d-flex align-items-center",children:[(0,py.jsx)("span",{className:"me-2",style:{fontSize:"1.5rem"},children:"\ud83d\udc68\u200d\ud83c\udf3e"}),(0,py.jsxs)("div",{children:[(0,py.jsx)("small",{className:"text-muted d-block",children:"Sold by"}),(0,py.jsx)("span",{className:"fw-semibold small",children:t.farmerDisplayName||t.farmerName})]})]})}),t.createdAt&&(0,py.jsx)("div",{className:"mb-3",children:(0,py.jsxs)("small",{className:"text-muted",children:["Listed on: ",(e=>{if(!e)return"";return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("en-IN")})(t.createdAt)]})}),s&&(0,py.jsxs)("div",{className:"d-grid gap-2",children:[(0,py.jsx)("button",{className:"btn btn-animated fw-semibold ".concat(t.quantity>0?"btn-primary-custom":"btn-secondary"),onClick:async()=>{if(n){o(!0);try{await n(t)}catch(e){console.error("Error adding to cart:",e)}finally{o(!1)}}},disabled:a||0===t.quantity,children:a?(0,py.jsxs)(py.Fragment,{children:[(0,py.jsx)("span",{className:"spinner-border spinner-border-sm me-2"}),"Adding..."]}):(0,py.jsxs)(py.Fragment,{children:[(0,py.jsx)("span",{className:"me-2",children:"\ud83d\uded2"}),t.quantity>0?"Add to Cart":"Out of Stock"]})}),(0,py.jsxs)("button",{className:"btn btn-animated btn-secondary-custom btn-sm",onClick:()=>{r&&r(t)},children:[(0,py.jsx)("span",{className:"me-2",children:"\ud83d\udcde"}),"Contact Farmer"]})]})]})]});var u},yy=(0,i.createContext)(),vy=(e,t)=>{switch(t.type){case"ADD_TO_CART":const n=e.items.find((e=>e.id===t.payload.id));return $($({},e),{},n?{items:e.items.map((e=>e.id===t.payload.id?$($({},e),{},{quantity:e.quantity+1}):e))}:{items:[...e.items,$($({},t.payload),{},{quantity:1})]});case"REMOVE_FROM_CART":return $($({},e),{},{items:e.items.filter((e=>e.id!==t.payload))});case"UPDATE_QUANTITY":return $($({},e),{},{items:e.items.map((e=>e.id===t.payload.id?$($({},e),{},{quantity:Math.max(0,t.payload.quantity)}):e)).filter((e=>e.quantity>0))});case"CLEAR_CART":return $($({},e),{},{items:[]});case"LOAD_CART":return $($({},e),{},{items:t.payload||[]});default:return e}},by=e=>{let{children:t}=e;const[n,r]=(0,i.useReducer)(vy,{items:[]});(0,i.useEffect)((()=>{var e;const t=localStorage.getItem("cart_".concat(null===(e=Bp.currentUser)||void 0===e?void 0:e.uid));t&&r({type:"LOAD_CART",payload:JSON.parse(t)})}),[]),(0,i.useEffect)((()=>{Bp.currentUser&&localStorage.setItem("cart_".concat(Bp.currentUser.uid),JSON.stringify(n.items))}),[n.items]);return(0,py.jsx)(yy.Provider,{value:{cart:n.items,addToCart:e=>{r({type:"ADD_TO_CART",payload:e})},removeFromCart:e=>{r({type:"REMOVE_FROM_CART",payload:e})},updateQuantity:(e,t)=>{r({type:"UPDATE_QUANTITY",payload:{id:e,quantity:t}})},clearCart:()=>{r({type:"CLEAR_CART"})},getCartTotal:()=>n.items.reduce(((e,t)=>e+t.price*t.quantity),0),getCartItemsCount:()=>n.items.reduce(((e,t)=>e+t.quantity),0)},children:t})},wy=()=>{const e=(0,i.useContext)(yy);if(!e)throw new Error("useCart must be used within a CartProvider");return e};function Ey(e){let{onCartClick:t,orderSuccess:n}=e;const[r,s]=(0,i.useState)([]),[a,o]=(0,i.useState)(!0),[l,c]=(0,i.useState)(""),{addToCart:u}=wy();(0,i.useEffect)((()=>{(async()=>{try{const e=await jp(Pf(zp,"products"));s(e.docs.map((e=>$({id:e.id},e.data()))))}catch(e){console.error("Error fetching products:",e)}finally{o(!1)}})()}),[]);const d=r.filter((e=>e.name.toLowerCase().includes(l.toLowerCase())||e.farmerName&&e.farmerName.toLowerCase().includes(l.toLowerCase())||e.farmerDisplayName&&e.farmerDisplayName.toLowerCase().includes(l.toLowerCase()))),h=async e=>{const t={id:e.id,name:e.name,price:e.price,imageUrl:e.imageUrl,farmerId:e.farmerId,farmerName:e.farmerName,availableQuantity:e.quantity};u(t);const n=document.createElement("div");n.className="alert alert-success position-fixed",n.style.cssText="top: 20px; right: 20px; z-index: 9999; min-width: 300px;",n.innerHTML='\n            <div class="d-flex align-items-center">\n                <span class="me-2">\u2705</span>\n                <div>\n                    <strong>'.concat(e.name,"</strong> added to cart!\n                </div>\n            </div>\n        "),document.body.appendChild(n),setTimeout((()=>{document.body.removeChild(n)}),3e3)},f=e=>{alert("Contact farmer: ".concat(e.farmerName,"\nEmail: ").concat(e.farmerEmail||"Not available"))};return(0,py.jsx)("div",{className:"min-vh-100",style:{background:"linear-gradient(135deg, #74b9ff 0%, #0984e3 100%)"},children:(0,py.jsxs)("div",{className:"container py-5",children:[(0,py.jsxs)("div",{className:"text-center text-white mb-5",children:[(0,py.jsx)("h1",{className:"display-4 fw-bold mb-3",children:"Fresh Produce Marketplace"}),(0,py.jsx)("p",{className:"lead mb-4",children:"Discover fresh, local products from farmers near you"}),(0,py.jsx)("div",{className:"row justify-content-center",children:(0,py.jsx)("div",{className:"col-md-6",children:(0,py.jsxs)("div",{className:"search-container",children:[(0,py.jsx)("input",{type:"text",className:"form-control search-input",placeholder:"Search products or farmers...",value:l,onChange:e=>c(e.target.value)}),(0,py.jsx)("span",{className:"search-icon",children:"\ud83d\udd0d"})]})})})]}),(0,py.jsxs)("div",{className:"card shadow-lg border-0",children:[(0,py.jsx)("div",{className:"card-header bg-white py-4",children:(0,py.jsxs)("div",{className:"d-flex justify-content-between align-items-center flex-wrap",children:[(0,py.jsx)("h2",{className:"mb-0 fw-bold text-dark",children:"Available Products"}),(0,py.jsx)("div",{className:"d-flex align-items-center gap-3",children:(0,py.jsxs)("span",{className:"badge bg-primary fs-6 px-3 py-2",children:[d.length," ",1===d.length?"product":"products"," found"]})})]})}),(0,py.jsx)("div",{className:"card-body p-4",children:a?(0,py.jsxs)("div",{className:"text-center py-5",children:[(0,py.jsx)("div",{className:"spinner-border text-primary mb-3",style:{width:"3rem",height:"3rem"}}),(0,py.jsx)("h4",{className:"text-muted",children:"Loading fresh products..."})]}):0===d.length?(0,py.jsxs)("div",{className:"text-center py-5",children:[(0,py.jsx)("div",{className:"mb-3",style:{fontSize:"4rem"},children:"\ud83e\udd55"}),(0,py.jsx)("h3",{className:"text-muted",children:"No products found"}),(0,py.jsx)("p",{className:"text-muted",children:"Try adjusting your search or check back later for new listings!"})]}):(0,py.jsx)("div",{className:"row g-4",children:d.map((e=>(0,py.jsx)("div",{className:"col-lg-4 col-md-6",children:(0,py.jsx)(gy,{product:e,onAddToCart:h,onContactFarmer:f,showActions:!0})},e.id)))})})]})]})})}const Sy=async()=>{try{const e=(await async function(e,t,n){if(Ze(e.app))return Promise.reject(kt(e,"operation-not-supported-in-this-environment"));const r=On(e);Nt(e,t,sr);const i=$r(r,n);return new si(r,"signInViaPopup",t,i).executeNotNull()}(Bp,qp)).user,t=await Rp(Rf(zp,"users",e.uid));return t.exists(),{success:!0,user:e,isNewUser:!t.exists()}}catch(e){return console.error("Google sign-in error:",e),{success:!1,error:e.message}}},ky=e=>{let{user:t,onRoleSelected:n}=e;const[r,s]=(0,i.useState)("customer"),[a,o]=(0,i.useState)(!1),[l,c]=(0,i.useState)("");return(0,py.jsx)("div",{className:"modal show d-block",style:{backgroundColor:"rgba(0,0,0,0.8)"},children:(0,py.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:(0,py.jsxs)("div",{className:"enhanced-card modal-content border-0",children:[(0,py.jsx)("div",{className:"modal-header border-0 text-center py-4",style:{background:"linear-gradient(135deg, #4CAF50 0%, #45a049 100%)",borderRadius:"20px 20px 0 0"},children:(0,py.jsxs)("div",{className:"w-100",children:[(0,py.jsx)("h4",{className:"modal-title fw-bold text-white mb-2",children:"Welcome to FarmConnect! \ud83c\udf31"}),(0,py.jsx)("p",{className:"text-white opacity-75 mb-0",children:"Please select your account type to continue"})]})}),(0,py.jsxs)("div",{className:"modal-body p-4",children:[(0,py.jsxs)("div",{className:"text-center mb-4",children:[t.photoURL&&(0,py.jsx)("img",{src:t.photoURL,alt:"Profile",className:"rounded-circle mb-3",style:{width:"80px",height:"80px"}}),(0,py.jsx)("h5",{className:"fw-bold",children:t.displayName}),(0,py.jsx)("small",{className:"text-muted",children:t.email})]}),l&&(0,py.jsxs)("div",{className:"alert alert-danger d-flex align-items-center mb-4",children:[(0,py.jsx)("span",{className:"me-2",children:"\u26a0\ufe0f"}),l]}),(0,py.jsxs)("div",{className:"mb-4",children:[(0,py.jsx)("label",{className:"form-label fw-semibold mb-3",children:"I want to join as:"}),(0,py.jsxs)("div",{className:"row g-3",children:[(0,py.jsx)("div",{className:"col-6",children:(0,py.jsx)("div",{className:"card h-100 hover-lift ".concat("farmer"===r?"border-success bg-light":"border-light"),style:{cursor:"pointer",borderRadius:"12px"},onClick:()=>s("farmer"),children:(0,py.jsxs)("div",{className:"card-body text-center p-4",children:[(0,py.jsx)("div",{style:{fontSize:"3rem"},className:"mb-2",children:"\ud83d\udc68\u200d\ud83c\udf3e"}),(0,py.jsx)("h6",{className:"fw-bold mb-2",children:"Farmer"}),(0,py.jsx)("small",{className:"text-muted",children:"Sell your fresh produce directly to customers"})]})})}),(0,py.jsx)("div",{className:"col-6",children:(0,py.jsx)("div",{className:"card h-100 hover-lift ".concat("customer"===r?"border-primary bg-light":"border-light"),style:{cursor:"pointer",borderRadius:"12px"},onClick:()=>s("customer"),children:(0,py.jsxs)("div",{className:"card-body text-center p-4",children:[(0,py.jsx)("div",{style:{fontSize:"3rem"},className:"mb-2",children:"\ud83d\uded2"}),(0,py.jsx)("h6",{className:"fw-bold mb-2",children:"Customer"}),(0,py.jsx)("small",{className:"text-muted",children:"Buy fresh, local produce from nearby farmers"})]})})})]})]}),(0,py.jsxs)("div",{className:"alert alert-info d-flex align-items-center",children:[(0,py.jsx)("span",{className:"me-2",children:"\u2139\ufe0f"}),(0,py.jsxs)("small",{children:["You selected: ",(0,py.jsx)("strong",{className:"text-capitalize",children:r}),"farmer"===r?" - You can add and manage your products":" - You can browse and purchase products"]})]})]}),(0,py.jsx)("div",{className:"modal-footer border-0 pt-0",children:(0,py.jsx)("button",{className:"btn btn-primary-custom w-100 btn-animated",onClick:async()=>{o(!0),c("");try{await Dp(Rf(zp,"users",t.uid),{uid:t.uid,email:t.email,fullName:t.displayName||"",role:r,phone:t.phoneNumber||"",location:"",profilePicture:t.photoURL||"",provider:"google",createdAt:new Date,updatedAt:new Date}),n(r)}catch(l){console.error("Error saving role:",l),c("Failed to save role. Please try again.")}finally{o(!1)}},disabled:a,children:a?(0,py.jsxs)(py.Fragment,{children:[(0,py.jsx)("span",{className:"spinner-border spinner-border-sm me-2"}),"Setting up your account..."]}):"Continue as ".concat(r.charAt(0).toUpperCase()+r.slice(1))})})]})})})},xy=e=>{let{onAuthSuccess:t}=e;const[n,r]=(0,i.useState)(!0),[s,a]=(0,i.useState)({email:"",password:"",confirmPassword:"",fullName:"",role:"customer",phone:"",location:""}),[o,l]=(0,i.useState)(!1),[c,u]=(0,i.useState)(!1),[d,h]=(0,i.useState)(""),[f,p]=(0,i.useState)(!1),[m,g]=(0,i.useState)(null),y=e=>{a($($({},s),{},{[e.target.name]:e.target.value})),h("")},v=e=>{console.log("Role selected:",e),p(!1),g(null),t&&t()};return f&&m?(0,py.jsx)(ky,{user:m,onRoleSelected:v}):(0,py.jsx)("div",{className:"min-vh-100 d-flex align-items-center justify-content-center p-4 bg-pattern-2",children:(0,py.jsxs)("div",{className:"enhanced-card fade-in",style:{maxWidth:"500px",width:"100%"},children:[(0,py.jsxs)("div",{className:"text-white text-center py-5",style:{background:"linear-gradient(135deg, #4CAF50 0%, #45a049 100%)",borderRadius:"20px 20px 0 0"},children:[(0,py.jsxs)("div",{className:"d-flex align-items-center justify-content-center mb-3",children:[(0,py.jsx)("span",{className:"me-3",style:{fontSize:"3.5rem"},children:"\ud83c\udf31"}),(0,py.jsx)("h1",{className:"h2 fw-bold mb-0",children:"FarmConnect"})]}),(0,py.jsx)("p",{className:"mb-0 opacity-75 lead",children:n?"Welcome back to the marketplace!":"Join our farming community"})]}),(0,py.jsxs)("div",{className:"p-5",children:[(0,py.jsx)("div",{className:"mb-4",children:(0,py.jsx)("button",{type:"button",className:"btn btn-outline-dark w-100 btn-animated d-flex align-items-center justify-content-center",onClick:async()=>{u(!0),h("");try{const e=await Sy();e.success?e.isNewUser?(g(e.user),p(!0)):t&&t():h("Google sign-in failed. Please try again.")}catch(d){console.error("Google sign-in error:",d),h("Google sign-in failed. Please try again.")}finally{u(!1)}},disabled:c||o,style:{borderRadius:"12px",padding:"12px"},children:c?(0,py.jsxs)(py.Fragment,{children:[(0,py.jsx)("span",{className:"spinner-border spinner-border-sm me-2"}),"Signing in with Google..."]}):(0,py.jsxs)(py.Fragment,{children:[(0,py.jsxs)("svg",{className:"me-2",width:"20",height:"20",viewBox:"0 0 24 24",children:[(0,py.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,py.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,py.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,py.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]})})}),(0,py.jsx)("div",{className:"text-center mb-4",children:(0,py.jsxs)("div",{className:"d-flex align-items-center",children:[(0,py.jsx)("hr",{className:"flex-grow-1"}),(0,py.jsx)("span",{className:"mx-3 text-muted",children:"or"}),(0,py.jsx)("hr",{className:"flex-grow-1"})]})}),d&&(0,py.jsxs)("div",{className:"alert alert-danger d-flex align-items-center mb-4 slide-up",role:"alert",children:[(0,py.jsx)("span",{className:"me-2",children:"\u26a0\ufe0f"}),d]}),(0,py.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{if(!s.email||!s.password)return h("Email and password are required"),!1;if(!n){if(!s.fullName)return h("Full name is required"),!1;if(s.password!==s.confirmPassword)return h("Passwords do not match"),!1;if(s.password.length<6)return h("Password must be at least 6 characters"),!1}return!0})()){l(!0),h("");try{if(n)await function(e,t,n){return Ze(e.app)?Promise.reject(_t(e)):br(L(e),ir.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&wr(e),t}))}(Bp,s.email,s.password);else{const e=await async function(e,t,n){if(Ze(e.app))return Promise.reject(_t(e));const r=On(e),i=qn(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dr,"EMAIL_PASSWORD_PROVIDER"),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&wr(e),t})),a=await hr._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}(Bp,s.email,s.password);await Dp(Rf(zp,"users",e.user.uid),{uid:e.user.uid,email:s.email,fullName:s.fullName,role:s.role,phone:s.phone||"",location:s.location||"",provider:"email",createdAt:new Date,updatedAt:new Date})}t&&t()}catch(d){switch(console.error("Auth error:",d),d.code){case"auth/user-not-found":h("No account found with this email");break;case"auth/wrong-password":h("Incorrect password");break;case"auth/email-already-in-use":h("Email is already registered");break;case"auth/weak-password":h("Password is too weak");break;case"auth/invalid-email":h("Invalid email address");break;default:h(d.message)}}finally{l(!1)}}},className:"slide-up",children:[!n&&(0,py.jsxs)("div",{className:"mb-4",children:[(0,py.jsx)("label",{className:"form-label-custom",children:"I am a:"}),(0,py.jsxs)("div",{className:"row g-3",children:[(0,py.jsx)("div",{className:"col-6",children:(0,py.jsx)("div",{className:"card h-100 hover-lift ".concat("farmer"===s.role?"border-success bg-light":"border-light"),style:{cursor:"pointer",borderRadius:"12px"},onClick:()=>a($($({},s),{},{role:"farmer"})),children:(0,py.jsxs)("div",{className:"card-body text-center p-3",children:[(0,py.jsx)("div",{style:{fontSize:"2.5rem"},children:"\ud83d\udc68\u200d\ud83c\udf3e"}),(0,py.jsx)("small",{className:"fw-semibold",children:"Farmer"})]})})}),(0,py.jsx)("div",{className:"col-6",children:(0,py.jsx)("div",{className:"card h-100 hover-lift ".concat("customer"===s.role?"border-primary bg-light":"border-light"),style:{cursor:"pointer",borderRadius:"12px"},onClick:()=>a($($({},s),{},{role:"customer"})),children:(0,py.jsxs)("div",{className:"card-body text-center p-3",children:[(0,py.jsx)("div",{style:{fontSize:"2.5rem"},children:"\ud83d\uded2"}),(0,py.jsx)("small",{className:"fw-semibold",children:"Customer"})]})})})]})]}),!n&&(0,py.jsxs)("div",{className:"mb-3",children:[(0,py.jsx)("label",{htmlFor:"fullName",className:"form-label-custom",children:"Full Name"}),(0,py.jsx)("input",{type:"text",className:"form-control form-control-custom",id:"fullName",name:"fullName",placeholder:"Enter your full name",value:s.fullName,onChange:y,required:!n})]}),(0,py.jsxs)("div",{className:"mb-3",children:[(0,py.jsx)("label",{htmlFor:"email",className:"form-label-custom",children:"Email Address"}),(0,py.jsx)("input",{type:"email",className:"form-control form-control-custom",id:"email",name:"email",placeholder:"Enter your email",value:s.email,onChange:y,required:!0})]}),(0,py.jsxs)("div",{className:"mb-3",children:[(0,py.jsx)("label",{htmlFor:"password",className:"form-label-custom",children:"Password"}),(0,py.jsx)("input",{type:"password",className:"form-control form-control-custom",id:"password",name:"password",placeholder:"Enter your password",value:s.password,onChange:y,required:!0})]}),!n&&(0,py.jsxs)("div",{className:"mb-3",children:[(0,py.jsx)("label",{htmlFor:"confirmPassword",className:"form-label-custom",children:"Confirm Password"}),(0,py.jsx)("input",{type:"password",className:"form-control form-control-custom",id:"confirmPassword",name:"confirmPassword",placeholder:"Confirm your password",value:s.confirmPassword,onChange:y,required:!n})]}),!n&&(0,py.jsxs)("div",{className:"mb-3",children:[(0,py.jsxs)("label",{htmlFor:"phone",className:"form-label-custom",children:["Phone Number ",(0,py.jsx)("span",{className:"text-muted",children:"(Optional)"})]}),(0,py.jsx)("input",{type:"tel",className:"form-control form-control-custom",id:"phone",name:"phone",placeholder:"Enter your phone number",value:s.phone,onChange:y})]}),!n&&(0,py.jsxs)("div",{className:"mb-4",children:[(0,py.jsxs)("label",{htmlFor:"location",className:"form-label-custom",children:["Location ",(0,py.jsx)("span",{className:"text-muted",children:"(Optional)"})]}),(0,py.jsx)("input",{type:"text",className:"form-control form-control-custom",id:"location",name:"location",placeholder:"City, State",value:s.location,onChange:y})]}),(0,py.jsx)("button",{type:"submit",className:"btn btn-animated btn-primary-custom btn-lg w-100 fw-semibold",disabled:o||c,children:o?(0,py.jsxs)(py.Fragment,{children:[(0,py.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),n?"Signing in...":"Creating account..."]}):n?"Sign In":"Create Account"})]}),(0,py.jsx)("div",{className:"text-center mt-4",children:(0,py.jsxs)("p",{className:"mb-0",children:[n?"Don't have an account? ":"Already have an account? ",(0,py.jsx)("button",{type:"button",className:"btn btn-link p-0 fw-semibold gradient-text",onClick:()=>{r(!n),h(""),a({email:"",password:"",confirmPassword:"",fullName:"",role:"customer",phone:"",location:""})},children:n?"Sign up here":"Sign in here"})]})}),(0,py.jsxs)("div",{className:"alert alert-info d-flex align-items-center justify-content-center mt-4",style:{borderRadius:"12px",border:"none",background:"rgba(33, 150, 243, 0.1)"},children:[(0,py.jsx)("span",{className:"me-2",children:"\u2139\ufe0f"}),(0,py.jsx)("small",{children:"Google users can choose to be farmers or customers"})]})]})]})})},_y=e=>{let{user:t,userProfile:n,role:r,onCartClick:s,onProfileClick:a,onOrderHistoryClick:o}=e;const[l,c]=(0,i.useState)(!1),[u,d]=(0,i.useState)(!1),{getCartItemsCount:h,getCartTotal:f}=wy(),p=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e);return(0,py.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light navbar-custom sticky-top",children:[(0,py.jsxs)("div",{className:"container",children:[(0,py.jsxs)("div",{className:"navbar-brand d-flex align-items-center",children:[(0,py.jsx)("span",{className:"me-3",style:{fontSize:"2.5rem"},children:"\ud83c\udf31"}),(0,py.jsx)("span",{className:"navbar-brand-custom",children:"FarmConnect"})]}),(0,py.jsx)("button",{className:"navbar-toggler d-lg-none border-0",onClick:()=>{d(!u)},style:{background:"none"},children:(0,py.jsx)("span",{style:{fontSize:"1.5rem"},children:"\u2630"})}),(0,py.jsx)("div",{className:"collapse navbar-collapse ".concat(u?"show":""),children:(0,py.jsxs)("div",{className:"navbar-nav ms-auto d-flex align-items-center",children:[(0,py.jsx)("div",{className:"nav-item me-3",children:(0,py.jsxs)("span",{className:"nav-link fw-semibold text-muted",children:[(0,py.jsx)("span",{className:"me-2",children:"farmer"===r?"\ud83d\udc68\u200d\ud83c\udf3e":"\ud83c\udfea"}),"farmer"===r?"Farmer Dashboard":"Marketplace"]})}),"customer"===r&&(0,py.jsxs)("div",{className:"nav-item me-3",children:[(0,py.jsxs)("button",{className:"btn btn-primary-custom btn-animated position-relative d-flex align-items-center",onClick:s,style:{borderRadius:"25px",padding:"8px 16px"},children:[(0,py.jsx)("span",{className:"me-2",style:{fontSize:"1.2rem"},children:"\ud83d\uded2"}),(0,py.jsx)("span",{className:"d-none d-md-inline",children:"Cart"}),h()>0&&(0,py.jsxs)("span",{className:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger",children:[h(),(0,py.jsx)("span",{className:"visually-hidden",children:"items in cart"})]})]}),h()>0&&(0,py.jsx)("div",{className:"d-none d-lg-block",children:(0,py.jsxs)("small",{className:"text-muted",children:["Total: ",p(f())]})})]}),(0,py.jsxs)("div",{className:"nav-item dropdown position-relative",children:[(0,py.jsxs)("button",{className:"btn btn-link nav-link dropdown-toggle d-flex align-items-center p-0 border-0 bg-transparent",onClick:()=>{c(!l)},style:{textDecoration:"none"},children:[(0,py.jsx)("div",{className:"rounded-circle d-flex align-items-center justify-content-center me-2 hover-lift",style:{width:"45px",height:"45px",background:null!==n&&void 0!==n&&n.profilePicture?"url(".concat(n.profilePicture,")"):"linear-gradient(135deg, #4CAF50 0%, #2196F3 100%)",backgroundSize:"cover",backgroundPosition:"center",fontSize:"1.5rem",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)"},children:!(null!==n&&void 0!==n&&n.profilePicture)&&("farmer"===r?"\ud83d\udc68\u200d\ud83c\udf3e":"\ud83d\uded2")}),(0,py.jsxs)("div",{className:"d-none d-lg-block text-start",children:[(0,py.jsx)("div",{className:"fw-bold text-capitalize gradient-text",style:{fontSize:"0.9rem"},children:(null===n||void 0===n?void 0:n.fullName)||r}),(0,py.jsx)("small",{className:"text-muted",children:t.email})]})]}),l&&(0,py.jsxs)("div",{className:"dropdown-menu dropdown-menu-end show enhanced-card border-0 shadow-lg",style:{minWidth:"280px",marginTop:"10px"},children:[(0,py.jsx)("div",{className:"dropdown-header bg-light rounded-top p-3",children:(0,py.jsxs)("div",{className:"d-flex align-items-center",children:[(0,py.jsx)("div",{className:"rounded-circle d-flex align-items-center justify-content-center me-3",style:{width:"50px",height:"50px",background:null!==n&&void 0!==n&&n.profilePicture?"url(".concat(n.profilePicture,")"):"linear-gradient(135deg, #4CAF50 0%, #2196F3 100%)",backgroundSize:"cover",backgroundPosition:"center",fontSize:"1.5rem"},children:!(null!==n&&void 0!==n&&n.profilePicture)&&("farmer"===r?"\ud83d\udc68\u200d\ud83c\udf3e":"\ud83d\uded2")}),(0,py.jsxs)("div",{children:[(0,py.jsx)("div",{className:"fw-bold",children:(null===n||void 0===n?void 0:n.fullName)||"User"}),(0,py.jsx)("small",{className:"text-muted",children:t.email}),(0,py.jsx)("div",{children:(0,py.jsx)("span",{className:"badge bg-primary text-capitalize",children:r})})]})]})}),(0,py.jsx)("div",{className:"dropdown-divider"}),(0,py.jsxs)("button",{className:"dropdown-item d-flex align-items-center py-2",onClick:a,children:[(0,py.jsx)("span",{className:"me-3",style:{fontSize:"1.2rem"},children:"\ud83d\udc64"}),(0,py.jsxs)("div",{children:[(0,py.jsx)("div",{className:"fw-semibold",children:"My Profile"}),(0,py.jsx)("small",{className:"text-muted",children:"Manage your account"})]})]}),"farmer"===r&&(0,py.jsxs)("button",{className:"dropdown-item d-flex align-items-center py-2",children:[(0,py.jsx)("span",{className:"me-3",style:{fontSize:"1.2rem"},children:"\ud83d\udce6"}),(0,py.jsxs)("div",{children:[(0,py.jsx)("div",{className:"fw-semibold",children:"Manage Products"}),(0,py.jsx)("small",{className:"text-muted",children:"Add, edit, or remove items"})]})]}),"customer"===r&&(0,py.jsx)(py.Fragment,{children:(0,py.jsxs)("button",{className:"dropdown-item d-flex align-items-center py-2",onClick:o,children:[(0,py.jsx)("span",{className:"me-3",style:{fontSize:"1.2rem"},children:"\ud83d\udccb"}),(0,py.jsxs)("div",{children:[(0,py.jsx)("div",{className:"fw-semibold",children:"Order History"}),(0,py.jsx)("small",{className:"text-muted",children:"View past orders"})]})]})}),(0,py.jsx)("div",{className:"dropdown-divider"}),(0,py.jsxs)("button",{className:"dropdown-item d-flex align-items-center py-2 text-danger",onClick:async()=>{try{await function(e){return L(e).signOut()}(Bp)}catch(e){console.error("Logout error:",e)}},children:[(0,py.jsx)("span",{className:"me-3",style:{fontSize:"1.2rem"},children:"\ud83d\udc4b"}),(0,py.jsxs)("div",{children:[(0,py.jsx)("div",{className:"fw-semibold",children:"Sign Out"}),(0,py.jsx)("small",{children:"Log out of your account"})]})]})]})]})]})})]}),"customer"===r&&h()>0&&(0,py.jsx)("div",{className:"d-lg-none",children:(0,py.jsx)("div",{className:"container",children:(0,py.jsxs)("div",{className:"alert alert-info d-flex justify-content-between align-items-center mb-0 mt-2",children:[(0,py.jsxs)("small",{children:[(0,py.jsx)("strong",{children:h()})," items in cart"]}),(0,py.jsx)("small",{className:"fw-bold",children:p(f())})]})})}),l&&(0,py.jsx)("div",{className:"position-fixed top-0 start-0 w-100 h-100",style:{zIndex:1040},onClick:()=>c(!1)})]})},Ny=e=>{let{isOpen:t,onClose:n,onCheckout:r}=e;const{cart:i,removeFromCart:s,updateQuantity:a,getCartTotal:o,clearCart:l}=wy(),c=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e);return t?(0,py.jsx)("div",{className:"modal show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:(0,py.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",children:(0,py.jsxs)("div",{className:"enhanced-card modal-content border-0",children:[(0,py.jsxs)("div",{className:"modal-header border-0 pb-0",children:[(0,py.jsxs)("h5",{className:"modal-title fw-bold d-flex align-items-center",children:[(0,py.jsx)("span",{className:"me-2",style:{fontSize:"1.5rem"},children:"\ud83d\uded2"}),"Shopping Cart (",i.length," items)"]}),(0,py.jsx)("button",{type:"button",className:"btn-close",onClick:n})]}),(0,py.jsx)("div",{className:"modal-body",style:{maxHeight:"400px",overflowY:"auto"},children:0===i.length?(0,py.jsxs)("div",{className:"text-center py-4",children:[(0,py.jsx)("div",{style:{fontSize:"4rem"},children:"\ud83d\uded2"}),(0,py.jsx)("h4",{className:"text-muted",children:"Your cart is empty"}),(0,py.jsx)("p",{className:"text-muted",children:"Add some fresh products to get started!"})]}):(0,py.jsx)("div",{className:"space-y-3",children:i.map((e=>(0,py.jsx)("div",{className:"card border-0 bg-light",children:(0,py.jsx)("div",{className:"card-body p-3",children:(0,py.jsxs)("div",{className:"row align-items-center",children:[(0,py.jsx)("div",{className:"col-3",children:e.imageUrl?(0,py.jsx)("img",{src:e.imageUrl,alt:e.name,className:"img-fluid rounded",style:{height:"60px",objectFit:"cover"}}):(0,py.jsx)("div",{className:"bg-secondary rounded d-flex align-items-center justify-content-center",style:{height:"60px",width:"60px"},children:(0,py.jsx)("span",{style:{fontSize:"1.5rem"},children:"\ud83d\udce6"})})}),(0,py.jsxs)("div",{className:"col-6",children:[(0,py.jsx)("h6",{className:"mb-1 fw-bold",children:e.name}),(0,py.jsxs)("small",{className:"text-muted",children:["by ",e.farmerName]}),(0,py.jsxs)("div",{className:"fw-bold text-success",children:[c(e.price)," per unit"]})]}),(0,py.jsxs)("div",{className:"col-3",children:[(0,py.jsx)("div",{className:"d-flex align-items-center justify-content-between",children:(0,py.jsxs)("div",{className:"input-group input-group-sm",children:[(0,py.jsx)("button",{className:"btn btn-outline-secondary",onClick:()=>a(e.id,e.quantity-1),children:"-"}),(0,py.jsx)("input",{type:"number",className:"form-control text-center",value:e.quantity,onChange:t=>a(e.id,parseInt(t.target.value)||0),min:"0",max:e.availableQuantity}),(0,py.jsx)("button",{className:"btn btn-outline-secondary",onClick:()=>a(e.id,e.quantity+1),disabled:e.quantity>=e.availableQuantity,children:"+"})]})}),(0,py.jsx)("div",{className:"text-center mt-2",children:(0,py.jsx)("small",{className:"fw-bold",children:c(e.price*e.quantity)})}),(0,py.jsx)("div",{className:"text-center",children:(0,py.jsx)("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>s(e.id),children:"Remove"})})]})]})})},e.id)))})}),i.length>0&&(0,py.jsx)("div",{className:"modal-footer border-0 pt-0",children:(0,py.jsxs)("div",{className:"w-100",children:[(0,py.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3 p-3 bg-light rounded",children:[(0,py.jsx)("h5",{className:"mb-0 fw-bold",children:"Total:"}),(0,py.jsx)("h4",{className:"mb-0 fw-bold text-success",children:c(o())})]}),(0,py.jsxs)("div",{className:"row g-2",children:[(0,py.jsx)("div",{className:"col-6",children:(0,py.jsx)("button",{className:"btn btn-outline-secondary w-100",onClick:l,children:"Clear Cart"})}),(0,py.jsx)("div",{className:"col-6",children:(0,py.jsx)("button",{className:"btn btn-primary-custom w-100 btn-animated",onClick:r,children:"Proceed to Checkout"})})]})]})})]})})}):null},Ty=e=>{let{isOpen:t,onClose:n,onOrderComplete:r}=e;const{cart:s,getCartTotal:a,clearCart:o}=wy(),[l,c]=(0,i.useState)(!1),[u,d]=(0,i.useState)({deliveryAddress:"",phone:"",notes:"",paymentMethod:"cod"}),[h,f]=(0,i.useState)(""),p=e=>{d($($({},u),{},{[e.target.name]:e.target.value})),f("")},m=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e);return t?(0,py.jsx)("div",{className:"modal show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:(0,py.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",children:(0,py.jsxs)("div",{className:"enhanced-card modal-content border-0",children:[(0,py.jsxs)("div",{className:"modal-header border-0 pb-0",children:[(0,py.jsxs)("h5",{className:"modal-title fw-bold d-flex align-items-center",children:[(0,py.jsx)("span",{className:"me-2",style:{fontSize:"1.5rem"},children:"\ud83d\udccb"}),"Checkout"]}),(0,py.jsx)("button",{type:"button",className:"btn-close",onClick:n})]}),(0,py.jsxs)("div",{className:"modal-body",children:[h&&(0,py.jsxs)("div",{className:"alert alert-danger d-flex align-items-center mb-4",children:[(0,py.jsx)("span",{className:"me-2",children:"\u26a0\ufe0f"}),h]}),(0,py.jsxs)("div",{className:"row",children:[(0,py.jsxs)("div",{className:"col-md-6",children:[(0,py.jsx)("h6",{className:"fw-bold mb-3",children:"Order Summary"}),(0,py.jsxs)("div",{className:"bg-light rounded p-3 mb-3",style:{maxHeight:"300px",overflowY:"auto"},children:[s.map((e=>(0,py.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,py.jsxs)("div",{children:[(0,py.jsx)("div",{className:"fw-semibold",children:e.name}),(0,py.jsxs)("small",{className:"text-muted",children:[e.quantity," \xd7 ",m(e.price)]})]}),(0,py.jsx)("div",{className:"fw-bold",children:m(e.price*e.quantity)})]},e.id))),(0,py.jsx)("hr",{}),(0,py.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,py.jsx)("h6",{className:"mb-0 fw-bold",children:"Total:"}),(0,py.jsx)("h5",{className:"mb-0 fw-bold text-success",children:m(a())})]})]})]}),(0,py.jsxs)("div",{className:"col-md-6",children:[(0,py.jsx)("h6",{className:"fw-bold mb-3",children:"Delivery Details"}),(0,py.jsxs)("div",{className:"mb-3",children:[(0,py.jsx)("label",{className:"form-label-custom",children:"Delivery Address *"}),(0,py.jsx)("textarea",{className:"form-control form-control-custom",name:"deliveryAddress",rows:"3",placeholder:"Enter your complete delivery address",value:u.deliveryAddress,onChange:p,required:!0})]}),(0,py.jsxs)("div",{className:"mb-3",children:[(0,py.jsx)("label",{className:"form-label-custom",children:"Phone Number *"}),(0,py.jsx)("input",{type:"tel",className:"form-control form-control-custom",name:"phone",placeholder:"Enter your phone number",value:u.phone,onChange:p,required:!0})]}),(0,py.jsxs)("div",{className:"mb-3",children:[(0,py.jsx)("label",{className:"form-label-custom",children:"Special Instructions"}),(0,py.jsx)("textarea",{className:"form-control form-control-custom",name:"notes",rows:"2",placeholder:"Any special delivery instructions...",value:u.notes,onChange:p})]}),(0,py.jsxs)("div",{className:"mb-3",children:[(0,py.jsx)("label",{className:"form-label-custom",children:"Payment Method"}),(0,py.jsxs)("select",{className:"form-select form-control-custom",name:"paymentMethod",value:u.paymentMethod,onChange:p,children:[(0,py.jsx)("option",{value:"cod",children:"Cash on Delivery"}),(0,py.jsx)("option",{value:"online",children:"Online Payment"})]})]})]})]})]}),(0,py.jsx)("div",{className:"modal-footer border-0 pt-0",children:(0,py.jsx)("div",{className:"w-100",children:(0,py.jsxs)("div",{className:"row g-2",children:[(0,py.jsx)("div",{className:"col-6",children:(0,py.jsx)("button",{className:"btn btn-outline-secondary w-100",onClick:n,disabled:l,children:"Cancel"})}),(0,py.jsx)("div",{className:"col-6",children:(0,py.jsx)("button",{className:"btn btn-primary-custom w-100 btn-animated",onClick:async()=>{if(u.deliveryAddress.trim()?u.phone.trim()?0!==s.length||(f("Your cart is empty"),0):(f("Phone number is required"),0):(f("Delivery address is required"),0)){c(!0),f("");try{const e=s.reduce(((e,t)=>{const n=t.farmerId;return e[n]||(e[n]={farmerId:n,farmerName:t.farmerName,items:[],totalAmount:0}),e[n].items.push({productId:t.id,productName:t.name,quantity:t.quantity,pricePerUnit:t.price,totalPrice:t.price*t.quantity,imageUrl:t.imageUrl}),e[n].totalAmount+=t.price*t.quantity,e}),{}),t=Object.values(e).map((async e=>{const t={customerId:Bp.currentUser.uid,customerEmail:Bp.currentUser.email,farmerId:e.farmerId,farmerName:e.farmerName,items:e.items,totalAmount:e.totalAmount,deliveryAddress:u.deliveryAddress,phone:u.phone,notes:u.notes,paymentMethod:u.paymentMethod,status:"pending",paymentStatus:"pending",orderDate:new Date,estimatedDelivery:new Date(Date.now()+1728e5)};return await Mp(Pf(zp,"orders"),t)}));await Promise.all(t);const i=s.map((async e=>{const t=e.availableQuantity-e.quantity;await Lp(Rf(zp,"products",e.id),{quantity:Math.max(0,t),updatedAt:new Date})}));await Promise.all(i),o(),r(),n()}catch(h){console.error("Error placing order:",h),f("Failed to place order. Please try again.")}finally{c(!1)}}},disabled:l,children:l?(0,py.jsxs)(py.Fragment,{children:[(0,py.jsx)("span",{className:"spinner-border spinner-border-sm me-2"}),"Placing Order..."]}):"Place Order - ".concat(m(a()))})})]})})})]})})}):null},Cy=e=>{let{isOpen:t,onClose:n,userProfile:r,onProfileUpdate:s}=e;const[a,o]=(0,i.useState)("personal"),[l,c]=(0,i.useState)(!1),[u,d]=(0,i.useState)(""),[h,f]=(0,i.useState)(""),[p,m]=(0,i.useState)({fullName:"",email:"",phone:"",location:"",bio:""}),[g,y]=(0,i.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[v,b]=(0,i.useState)({emailNotifications:!0,smsNotifications:!1,marketingEmails:!0,language:"en",theme:"light"});(0,i.useEffect)((()=>{var e;r&&m({fullName:r.fullName||"",email:r.email||(null===(e=Bp.currentUser)||void 0===e?void 0:e.email)||"",phone:r.phone||"",location:r.location||"",bio:r.bio||""})}),[r]);const w=e=>{m($($({},p),{},{[e.target.name]:e.target.value})),d(""),f("")},E=e=>{y($($({},g),{},{[e.target.name]:e.target.value})),d(""),f("")},S=e=>{const{name:t,type:n,checked:r,value:i}=e.target;b($($({},v),{},{[t]:"checkbox"===n?r:i}))};return t?(0,py.jsx)("div",{className:"modal show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:(0,py.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-xl",children:(0,py.jsxs)("div",{className:"enhanced-card modal-content border-0",children:[(0,py.jsxs)("div",{className:"modal-header border-0 pb-0",children:[(0,py.jsxs)("h5",{className:"modal-title fw-bold d-flex align-items-center",children:[(0,py.jsx)("span",{className:"me-2",style:{fontSize:"1.5rem"},children:"\ud83d\udc64"}),"My Profile"]}),(0,py.jsx)("button",{type:"button",className:"btn-close",onClick:n})]}),(0,py.jsx)("div",{className:"modal-body p-0",children:(0,py.jsxs)("div",{className:"row g-0",children:[(0,py.jsx)("div",{className:"col-md-3 bg-light",children:(0,py.jsxs)("div",{className:"p-4",children:[(0,py.jsxs)("div",{className:"text-center mb-4",children:[(0,py.jsx)("div",{className:"rounded-circle d-inline-flex align-items-center justify-content-center mb-3",style:{width:"80px",height:"80px",background:"linear-gradient(135deg, #4CAF50 0%, #2196F3 100%)",fontSize:"2.5rem"},children:"farmer"===(null===r||void 0===r?void 0:r.role)?"\ud83d\udc68\u200d\ud83c\udf3e":"\ud83d\uded2"}),(0,py.jsx)("h6",{className:"fw-bold",children:p.fullName||"User"}),(0,py.jsx)("small",{className:"text-muted text-capitalize",children:null===r||void 0===r?void 0:r.role})]}),(0,py.jsxs)("div",{className:"nav flex-column nav-pills",children:[(0,py.jsxs)("button",{className:"nav-link text-start ".concat("personal"===a?"active":""),onClick:()=>o("personal"),children:[(0,py.jsx)("span",{className:"me-2",children:"\ud83d\udc64"}),"Personal Info"]}),(0,py.jsxs)("button",{className:"nav-link text-start ".concat("security"===a?"active":""),onClick:()=>o("security"),children:[(0,py.jsx)("span",{className:"me-2",children:"\ud83d\udd12"}),"Security"]}),(0,py.jsxs)("button",{className:"nav-link text-start ".concat("preferences"===a?"active":""),onClick:()=>o("preferences"),children:[(0,py.jsx)("span",{className:"me-2",children:"\u2699\ufe0f"}),"Preferences"]})]})]})}),(0,py.jsx)("div",{className:"col-md-9",children:(0,py.jsxs)("div",{className:"p-4",children:[u&&(0,py.jsxs)("div",{className:"alert alert-danger d-flex align-items-center mb-4",children:[(0,py.jsx)("span",{className:"me-2",children:"\u26a0\ufe0f"}),u]}),h&&(0,py.jsxs)("div",{className:"alert alert-success d-flex align-items-center mb-4",children:[(0,py.jsx)("span",{className:"me-2",children:"\u2705"}),h]}),"personal"===a&&(0,py.jsxs)("div",{className:"fade-in",children:[(0,py.jsx)("h5",{className:"fw-bold mb-4",children:"Personal Information"}),(0,py.jsxs)("div",{className:"row g-3",children:[(0,py.jsxs)("div",{className:"col-md-6",children:[(0,py.jsx)("label",{className:"form-label-custom",children:"Full Name"}),(0,py.jsx)("input",{type:"text",className:"form-control form-control-custom",name:"fullName",value:p.fullName,onChange:w,placeholder:"Enter your full name"})]}),(0,py.jsxs)("div",{className:"col-md-6",children:[(0,py.jsx)("label",{className:"form-label-custom",children:"Email Address"}),(0,py.jsx)("input",{type:"email",className:"form-control form-control-custom",name:"email",value:p.email,onChange:w,placeholder:"Enter your email"})]}),(0,py.jsxs)("div",{className:"col-md-6",children:[(0,py.jsx)("label",{className:"form-label-custom",children:"Phone Number"}),(0,py.jsx)("input",{type:"tel",className:"form-control form-control-custom",name:"phone",value:p.phone,onChange:w,placeholder:"Enter your phone number"})]}),(0,py.jsxs)("div",{className:"col-md-6",children:[(0,py.jsx)("label",{className:"form-label-custom",children:"Location"}),(0,py.jsx)("input",{type:"text",className:"form-control form-control-custom",name:"location",value:p.location,onChange:w,placeholder:"City, State"})]}),(0,py.jsxs)("div",{className:"col-12",children:[(0,py.jsx)("label",{className:"form-label-custom",children:"Bio"}),(0,py.jsx)("textarea",{className:"form-control form-control-custom",name:"bio",rows:"4",value:p.bio,onChange:w,placeholder:"Tell us about yourself..."})]})]}),(0,py.jsx)("div",{className:"mt-4",children:(0,py.jsx)("button",{className:"btn btn-primary-custom btn-animated",onClick:async()=>{c(!0),d(""),f("");try{await Lp(Rf(zp,"users",Bp.currentUser.uid),{fullName:p.fullName,phone:p.phone,location:p.location,bio:p.bio,updatedAt:new Date}),p.email!==Bp.currentUser.email&&await function(e,t){const n=L(e);return Ze(n.auth.app)?Promise.reject(_t(n.auth)):Er(n,t,null)}(Bp.currentUser,p.email),f("Profile updated successfully!"),s()}catch(u){console.error("Error updating profile:",u),d("Failed to update profile: "+u.message)}finally{c(!1)}},disabled:l,children:l?(0,py.jsxs)(py.Fragment,{children:[(0,py.jsx)("span",{className:"spinner-border spinner-border-sm me-2"}),"Saving..."]}):"Save Changes"})})]}),"security"===a&&(0,py.jsxs)("div",{className:"fade-in",children:[(0,py.jsx)("h5",{className:"fw-bold mb-4",children:"Security Settings"}),(0,py.jsxs)("div",{className:"row g-3",children:[(0,py.jsxs)("div",{className:"col-12",children:[(0,py.jsx)("label",{className:"form-label-custom",children:"Current Password"}),(0,py.jsx)("input",{type:"password",className:"form-control form-control-custom",name:"currentPassword",value:g.currentPassword,onChange:E,placeholder:"Enter current password"})]}),(0,py.jsxs)("div",{className:"col-md-6",children:[(0,py.jsx)("label",{className:"form-label-custom",children:"New Password"}),(0,py.jsx)("input",{type:"password",className:"form-control form-control-custom",name:"newPassword",value:g.newPassword,onChange:E,placeholder:"Enter new password"})]}),(0,py.jsxs)("div",{className:"col-md-6",children:[(0,py.jsx)("label",{className:"form-label-custom",children:"Confirm New Password"}),(0,py.jsx)("input",{type:"password",className:"form-control form-control-custom",name:"confirmPassword",value:g.confirmPassword,onChange:E,placeholder:"Confirm new password"})]})]}),(0,py.jsx)("div",{className:"mt-4",children:(0,py.jsx)("button",{className:"btn btn-primary-custom btn-animated",onClick:async()=>{if(g.newPassword===g.confirmPassword)if(g.newPassword.length<6)d("Password must be at least 6 characters");else{c(!0),d(""),f("");try{await(e=Bp.currentUser,t=g.newPassword,Er(L(e),null,t)),f("Password updated successfully!"),y({currentPassword:"",newPassword:"",confirmPassword:""})}catch(u){console.error("Error updating password:",u),d("Failed to update password: "+u.message)}finally{c(!1)}var e,t}else d("New passwords do not match")},disabled:l,children:l?(0,py.jsxs)(py.Fragment,{children:[(0,py.jsx)("span",{className:"spinner-border spinner-border-sm me-2"}),"Updating..."]}):"Update Password"})})]}),"preferences"===a&&(0,py.jsxs)("div",{className:"fade-in",children:[(0,py.jsx)("h5",{className:"fw-bold mb-4",children:"Preferences"}),(0,py.jsxs)("div",{className:"row g-4",children:[(0,py.jsxs)("div",{className:"col-12",children:[(0,py.jsx)("h6",{className:"fw-semibold mb-3",children:"Notifications"}),(0,py.jsxs)("div",{className:"form-check mb-2",children:[(0,py.jsx)("input",{className:"form-check-input",type:"checkbox",name:"emailNotifications",checked:v.emailNotifications,onChange:S}),(0,py.jsx)("label",{className:"form-check-label",children:"Email Notifications"})]}),(0,py.jsxs)("div",{className:"form-check mb-2",children:[(0,py.jsx)("input",{className:"form-check-input",type:"checkbox",name:"smsNotifications",checked:v.smsNotifications,onChange:S}),(0,py.jsx)("label",{className:"form-check-label",children:"SMS Notifications"})]}),(0,py.jsxs)("div",{className:"form-check",children:[(0,py.jsx)("input",{className:"form-check-input",type:"checkbox",name:"marketingEmails",checked:v.marketingEmails,onChange:S}),(0,py.jsx)("label",{className:"form-check-label",children:"Marketing Emails"})]})]}),(0,py.jsxs)("div",{className:"col-md-6",children:[(0,py.jsx)("label",{className:"form-label-custom",children:"Language"}),(0,py.jsxs)("select",{className:"form-select form-control-custom",name:"language",value:v.language,onChange:S,children:[(0,py.jsx)("option",{value:"en",children:"English"}),(0,py.jsx)("option",{value:"hi",children:"Hindi"}),(0,py.jsx)("option",{value:"mr",children:"Marathi"})]})]}),(0,py.jsxs)("div",{className:"col-md-6",children:[(0,py.jsx)("label",{className:"form-label-custom",children:"Theme"}),(0,py.jsxs)("select",{className:"form-select form-control-custom",name:"theme",value:v.theme,onChange:S,children:[(0,py.jsx)("option",{value:"light",children:"Light"}),(0,py.jsx)("option",{value:"dark",children:"Dark"}),(0,py.jsx)("option",{value:"auto",children:"Auto"})]})]})]}),(0,py.jsx)("div",{className:"mt-4",children:(0,py.jsx)("button",{className:"btn btn-primary-custom btn-animated",onClick:async()=>{c(!0),d(""),f("");try{await Lp(Rf(zp,"users",Bp.currentUser.uid),{preferences:v,updatedAt:new Date}),f("Preferences saved successfully!")}catch(u){console.error("Error saving preferences:",u),d("Failed to save preferences: "+u.message)}finally{c(!1)}},disabled:l,children:l?(0,py.jsxs)(py.Fragment,{children:[(0,py.jsx)("span",{className:"spinner-border spinner-border-sm me-2"}),"Saving..."]}):"Save Preferences"})})]})]})})]})})]})})}):null},Iy=e=>{var t;let{isOpen:n,onClose:r}=e;const[s,a]=(0,i.useState)([]),[o,l]=(0,i.useState)(!0),[c,u]=(0,i.useState)(""),[d,h]=(0,i.useState)(null);(0,i.useEffect)((()=>{n&&Bp.currentUser&&f()}),[n]);const f=async()=>{l(!0),u("");try{const e=yp(Pf(zp,"orders"),bp("customerId","==",Bp.currentUser.uid),function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=fp("orderBy",e);return Ep._create(n,t)}("orderDate","desc")),t=(await jp(e)).docs.map((e=>$({id:e.id},e.data())));a(t)}catch(c){console.error("Error fetching orders:",c),u("Failed to load order history")}finally{l(!1)}},p=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e),m=e=>{if(!e)return"Unknown";return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},g=e=>{const t={pending:{class:"bg-warning",icon:"\u23f3",text:"Pending"},confirmed:{class:"bg-info",icon:"\u2705",text:"Confirmed"},delivered:{class:"bg-success",icon:"\ud83d\udce6",text:"Delivered"},cancelled:{class:"bg-danger",icon:"\u274c",text:"Cancelled"}},n=t[e]||t.pending;return(0,py.jsxs)("span",{className:"badge ".concat(n.class," d-flex align-items-center"),children:[(0,py.jsx)("span",{className:"me-1",children:n.icon}),n.text]})},y=e=>{const t={pending:{class:"bg-warning",text:"Pending"},completed:{class:"bg-success",text:"Paid"},failed:{class:"bg-danger",text:"Failed"}},n=t[e]||t.pending;return(0,py.jsx)("span",{className:"badge ".concat(n.class),children:n.text})};return n?(0,py.jsx)("div",{className:"modal show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:(0,py.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-xl",children:(0,py.jsxs)("div",{className:"enhanced-card modal-content border-0",children:[(0,py.jsxs)("div",{className:"modal-header border-0 pb-0",children:[(0,py.jsxs)("h5",{className:"modal-title fw-bold d-flex align-items-center",children:[(0,py.jsx)("span",{className:"me-2",style:{fontSize:"1.5rem"},children:"\ud83d\udccb"}),"Order History"]}),(0,py.jsx)("button",{type:"button",className:"btn-close",onClick:r})]}),(0,py.jsx)("div",{className:"modal-body",children:o?(0,py.jsxs)("div",{className:"text-center py-5",children:[(0,py.jsx)("div",{className:"spinner-border text-primary mb-3",style:{width:"3rem",height:"3rem"}}),(0,py.jsx)("h4",{className:"text-muted",children:"Loading your orders..."})]}):c?(0,py.jsxs)("div",{className:"alert alert-danger d-flex align-items-center",children:[(0,py.jsx)("span",{className:"me-2",children:"\u26a0\ufe0f"}),c]}):0===s.length?(0,py.jsxs)("div",{className:"text-center py-5",children:[(0,py.jsx)("div",{className:"mb-4",style:{fontSize:"4rem"},children:"\ud83d\udce6"}),(0,py.jsx)("h3",{className:"text-muted mb-3",children:"No orders yet"}),(0,py.jsx)("p",{className:"text-muted",children:"Start shopping to see your order history here!"})]}):(0,py.jsxs)("div",{className:"row",children:[(0,py.jsx)("div",{className:d?"col-md-6":"col-12",children:(0,py.jsx)("div",{style:{maxHeight:"500px",overflowY:"auto"},children:s.map((e=>{var t;return(0,py.jsx)("div",{className:"card mb-3 hover-lift ".concat((null===d||void 0===d?void 0:d.id)===e.id?"border-primary":""),style:{cursor:"pointer"},onClick:()=>h(e),children:(0,py.jsx)("div",{className:"card-body",children:(0,py.jsxs)("div",{className:"row align-items-center",children:[(0,py.jsxs)("div",{className:"col-md-8",children:[(0,py.jsxs)("div",{className:"d-flex justify-content-between align-items-start mb-2",children:[(0,py.jsxs)("h6",{className:"fw-bold mb-0",children:["Order #",e.id.slice(-8).toUpperCase()]}),g(e.status)]}),(0,py.jsx)("div",{className:"mb-2",children:(0,py.jsxs)("small",{className:"text-muted",children:["\ud83d\udcc5 ",m(e.orderDate)]})}),(0,py.jsx)("div",{className:"mb-2",children:(0,py.jsxs)("small",{className:"text-muted",children:["\ud83d\udc68\u200d\ud83c\udf3e ",e.farmerName]})}),(0,py.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,py.jsx)("span",{className:"fw-bold text-success",children:p(e.totalAmount)}),y(e.paymentStatus)]})]}),(0,py.jsxs)("div",{className:"col-md-4 text-end",children:[(0,py.jsx)("div",{className:"mb-2",children:(0,py.jsxs)("small",{className:"text-muted",children:[(null===(t=e.items)||void 0===t?void 0:t.length)||0," item(s)"]})}),(0,py.jsx)("button",{className:"btn btn-outline-primary btn-sm",children:"View Details"})]})]})})},e.id)}))})}),d&&(0,py.jsx)("div",{className:"col-md-6",children:(0,py.jsxs)("div",{className:"card border-primary",children:[(0,py.jsx)("div",{className:"card-header bg-primary text-white",children:(0,py.jsxs)("h6",{className:"mb-0 fw-bold",children:["Order Details - #",d.id.slice(-8).toUpperCase()]})}),(0,py.jsxs)("div",{className:"card-body",style:{maxHeight:"500px",overflowY:"auto"},children:[(0,py.jsx)("div",{className:"mb-4",children:(0,py.jsxs)("div",{className:"row",children:[(0,py.jsxs)("div",{className:"col-6",children:[(0,py.jsx)("small",{className:"text-muted d-block",children:"Status"}),g(d.status)]}),(0,py.jsxs)("div",{className:"col-6",children:[(0,py.jsx)("small",{className:"text-muted d-block",children:"Payment"}),y(d.paymentStatus)]})]})}),(0,py.jsxs)("div",{className:"mb-4",children:[(0,py.jsx)("h6",{className:"fw-bold mb-3",children:"Items Ordered"}),null===(t=d.items)||void 0===t?void 0:t.map(((e,t)=>(0,py.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2 p-2 bg-light rounded",children:[(0,py.jsxs)("div",{children:[(0,py.jsx)("div",{className:"fw-semibold",children:e.productName}),(0,py.jsxs)("small",{className:"text-muted",children:[e.quantity," \xd7 ",p(e.pricePerUnit)]})]}),(0,py.jsx)("div",{className:"fw-bold",children:p(e.totalPrice)})]},t))),(0,py.jsx)("hr",{}),(0,py.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,py.jsx)("h6",{className:"mb-0 fw-bold",children:"Total"}),(0,py.jsx)("h5",{className:"mb-0 fw-bold text-success",children:p(d.totalAmount)})]})]}),(0,py.jsxs)("div",{className:"mb-4",children:[(0,py.jsx)("h6",{className:"fw-bold mb-3",children:"Delivery Information"}),(0,py.jsxs)("div",{className:"bg-light p-3 rounded",children:[(0,py.jsxs)("div",{className:"mb-2",children:[(0,py.jsx)("small",{className:"text-muted d-block",children:"Address"}),(0,py.jsx)("span",{children:d.deliveryAddress})]}),(0,py.jsxs)("div",{className:"mb-2",children:[(0,py.jsx)("small",{className:"text-muted d-block",children:"Phone"}),(0,py.jsx)("span",{children:d.phone})]}),d.estimatedDelivery&&(0,py.jsxs)("div",{className:"mb-2",children:[(0,py.jsx)("small",{className:"text-muted d-block",children:"Estimated Delivery"}),(0,py.jsx)("span",{children:m(d.estimatedDelivery)})]}),d.notes&&(0,py.jsxs)("div",{children:[(0,py.jsx)("small",{className:"text-muted d-block",children:"Notes"}),(0,py.jsx)("span",{children:d.notes})]})]})]}),(0,py.jsxs)("div",{className:"mb-4",children:[(0,py.jsx)("h6",{className:"fw-bold mb-3",children:"Farmer Information"}),(0,py.jsxs)("div",{className:"d-flex align-items-center p-3 bg-light rounded",children:[(0,py.jsx)("span",{className:"me-3",style:{fontSize:"2rem"},children:"\ud83d\udc68\u200d\ud83c\udf3e"}),(0,py.jsxs)("div",{children:[(0,py.jsx)("div",{className:"fw-semibold",children:d.farmerName}),(0,py.jsx)("small",{className:"text-muted",children:"Farmer"})]})]})]}),(0,py.jsxs)("div",{className:"mb-4",children:[(0,py.jsx)("h6",{className:"fw-bold mb-3",children:"Payment Information"}),(0,py.jsxs)("div",{className:"bg-light p-3 rounded",children:[(0,py.jsxs)("div",{className:"mb-2",children:[(0,py.jsx)("small",{className:"text-muted d-block",children:"Payment Method"}),(0,py.jsx)("span",{className:"text-capitalize",children:"cod"===d.paymentMethod?"Cash on Delivery":"Online Payment"})]}),(0,py.jsxs)("div",{children:[(0,py.jsx)("small",{className:"text-muted d-block",children:"Order Date"}),(0,py.jsx)("span",{children:m(d.orderDate)})]})]})]})]})]})})]})}),s.length>0&&(0,py.jsx)("div",{className:"modal-footer border-0 pt-0",children:(0,py.jsx)("div",{className:"w-100 text-center",children:(0,py.jsxs)("small",{className:"text-muted",children:["Showing ",s.length," order(s) \u2022 Click on any order to view details"]})})})]})})}):null},Ay=[{email:"farmer1@farmconnect.com",fullName:"Green Valley Organic Farm",role:"farmer",phone:"+91-9876543210",location:"Pune, Maharashtra",provider:"email"},{email:"farmer2@farmconnect.com",fullName:"Sunrise Fresh Produce",role:"farmer",phone:"+91-9876543211",location:"Nashik, Maharashtra",provider:"email"},{email:"customer1@farmconnect.com",fullName:"Priya Sharma",role:"customer",phone:"+91-9876543212",location:"Mumbai, Maharashtra",provider:"email"}],Py=[{name:"Fresh Organic Tomatoes",description:"Juicy red tomatoes grown without pesticides",price:45,quantity:50,category:"vegetables",farmerId:"REPLACE_WITH_FARMER_UID",farmerName:"Green Valley Organic Farm",location:"Pune, Maharashtra",imageUrl:"https://images.unsplash.com/photo-1546470427-e2c3d8b2e7f0?w=400",isAvailable:!0},{name:"Fresh Green Lettuce",description:"Crispy lettuce leaves, perfect for salads",price:30,quantity:35,category:"vegetables",farmerId:"REPLACE_WITH_FARMER_UID",farmerName:"Green Valley Organic Farm",location:"Pune, Maharashtra",imageUrl:"https://images.unsplash.com/photo-1556909114-4e3b9c1c0b6d?w=400",isAvailable:!0},{name:"Sweet Orange Carrots",description:"Crunchy carrots rich in vitamins",price:40,quantity:60,category:"vegetables",farmerId:"REPLACE_WITH_FARMER_UID",farmerName:"Sunrise Fresh Produce",location:"Nashik, Maharashtra",imageUrl:"https://images.unsplash.com/photo-1598170845058-32b9d6a5da37?w=400",isAvailable:!0}],Ry=async()=>{try{console.log("Adding sample users...");for(const e of Ay){const t=await Mp(Pf(zp,"users"),$($({},e),{},{createdAt:new Date,updatedAt:new Date}));await Dp(Rf(zp,"users",t.id),$($({},e),{},{uid:t.id,createdAt:new Date,updatedAt:new Date})),console.log("User added with ID:",t.id)}alert("Sample users added successfully!")}catch(e){console.error("Error adding users:",e),alert("Error adding users: "+e.message)}},Oy=async()=>{try{console.log("Adding sample products...");for(const e of Py)await Mp(Pf(zp,"products"),$($({},e),{},{createdAt:new Date,updatedAt:new Date}));console.log("Sample products added successfully!"),alert("Sample products added successfully!")}catch(e){console.error("Error adding products:",e),alert("Error adding products: "+e.message)}};const jy=function(){const[e,t]=(0,i.useState)(null),[n,r]=(0,i.useState)(""),[s,a]=(0,i.useState)(!0),[o,l]=(0,i.useState)(null),[c,u]=(0,i.useState)(!1),[d,h]=(0,i.useState)(!1),[f,p]=(0,i.useState)(!1),[m,g]=(0,i.useState)(!1),[y,v]=(0,i.useState)(!1),b=async t=>{try{const n=await Rp(Rf(zp,"users",t));if(n.exists()){const e=n.data();return l(e),r(e.role),e}return null!==e&&void 0!==e&&e.email.includes("farmer")?r("farmer"):r("customer"),null}catch(n){return console.error("Error fetching user profile:",n),null!==e&&void 0!==e&&e.email.includes("farmer")?r("farmer"):r("customer"),null}};(0,i.useEffect)((()=>{const e=function(e,t,n,r){return L(e).onAuthStateChanged(t,n,r)}(Bp,(async e=>{t(e),e?await b(e.uid):(r(""),l(null)),a(!1)}));return()=>e()}),[]);const w=()=>{u(!0)};return s?(0,py.jsx)("div",{className:"d-flex align-items-center justify-content-center min-vh-100 loading-container",children:(0,py.jsxs)("div",{className:"text-center text-white fade-in",children:[(0,py.jsx)("div",{className:"spinner-border mb-4",style:{width:"4rem",height:"4rem"}}),(0,py.jsx)("h2",{className:"fw-bold gradient-text mb-2",children:"FarmConnect"}),(0,py.jsx)("p",{className:"lead",children:"Loading your marketplace..."})]})}):e?(0,py.jsx)(by,{children:(0,py.jsxs)("div",{className:"min-vh-100 bg-pattern-1",children:[(0,py.jsx)(_y,{user:e,userProfile:o,role:n,onCartClick:w,onProfileClick:()=>{p(!0)},onOrderHistoryClick:()=>{g(!0)}}),e&&"farmer"===n&&(0,py.jsx)("div",{className:"container mt-3",children:(0,py.jsxs)("div",{className:"alert alert-warning",children:[(0,py.jsx)("h6",{children:"Development Tools"}),(0,py.jsxs)("div",{className:"d-flex gap-2",children:[(0,py.jsx)("button",{className:"btn btn-warning btn-sm",onClick:Ry,children:"Add Sample Users"}),(0,py.jsx)("button",{className:"btn btn-info btn-sm",onClick:Oy,children:"Add Sample Products"})]})]})}),y&&(0,py.jsx)("div",{className:"container mt-3",children:(0,py.jsxs)("div",{className:"alert alert-success d-flex align-items-center slide-up",children:[(0,py.jsx)("span",{className:"me-2",style:{fontSize:"1.5rem"},children:"\ud83c\udf89"}),(0,py.jsxs)("div",{children:[(0,py.jsx)("strong",{children:"Order placed successfully!"}),(0,py.jsx)("br",{}),(0,py.jsx)("small",{children:"You will receive a confirmation email shortly."})]})]})}),(0,py.jsx)("main",{className:"fade-in",children:"farmer"===n?(0,py.jsx)(my,{}):(0,py.jsx)(Ey,{onCartClick:w,orderSuccess:y})}),(0,py.jsx)(Cy,{isOpen:f,onClose:()=>p(!1),userProfile:o,onProfileUpdate:async()=>{e&&await b(e.uid)}}),"customer"===n&&(0,py.jsx)(Iy,{isOpen:m,onClose:()=>g(!1)}),"customer"===n&&(0,py.jsx)(Ny,{isOpen:c,onClose:()=>u(!1),onCheckout:()=>{u(!1),h(!0)}}),"customer"===n&&(0,py.jsx)(Ty,{isOpen:d,onClose:()=>h(!1),onOrderComplete:()=>{v(!0),setTimeout((()=>v(!1)),5e3)}})]})}):(0,py.jsx)(xy,{})};s.createRoot(document.getElementById("root")).render((0,py.jsx)(i.StrictMode,{children:(0,py.jsx)(jy,{})}))})();
//# sourceMappingURL=main.5db33e60.js.map